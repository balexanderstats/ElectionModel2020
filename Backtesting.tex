\documentclass{article}\usepackage[]{graphicx}\usepackage[]{color}
% maxwidth is the original width if it is less than linewidth
% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.686,0.059,0.569}{#1}}%
\newcommand{\hlstr}[1]{\textcolor[rgb]{0.192,0.494,0.8}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{0.678,0.584,0.686}{\textit{#1}}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlstd}[1]{\textcolor[rgb]{0.345,0.345,0.345}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.161,0.373,0.58}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.69,0.353,0.396}{#1}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0.333,0.667,0.333}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0.737,0.353,0.396}{\textbf{#1}}}%
\let\hlipl\hlkwb

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX

\usepackage{alltt}
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}

Here we fit the model to previous elections and calculate the error for each of the 12 weeks before the election.
Note that some states can not be predicted in early points due to lack of poll data for a state and the state's cluster.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlkwd{library}\hlstd{(bayesurvey)}
\hlkwd{library}\hlstd{(politicaldata)}
\hlkwd{library}\hlstd{(MCMCpack)}
\end{alltt}


{\ttfamily\noindent\itshape\color{messagecolor}{\#\# Loading required package: coda}}

{\ttfamily\noindent\itshape\color{messagecolor}{\#\# Loading required package: MASS}}

{\ttfamily\noindent\itshape\color{messagecolor}{\#\# \#\#\\\#\# \#\# Markov Chain Monte Carlo Package (MCMCpack)}}

{\ttfamily\noindent\itshape\color{messagecolor}{\#\# \#\# Copyright (C) 2003-2020 Andrew D. Martin, Kevin M. Quinn, and Jong Hee Park}}

{\ttfamily\noindent\itshape\color{messagecolor}{\#\# \#\#\\\#\# \#\# Support provided by the U.S. National Science Foundation}}

{\ttfamily\noindent\itshape\color{messagecolor}{\#\# \#\# (Grants SES-0350646 and SES-0350613)\\\#\# \#\#}}\begin{alltt}
\hlstd{pres_results} \hlkwb{=} \hlkwd{propnormdfreplace}\hlstd{(pres_results,} \hlkwd{c}\hlstd{(}\hlnum{4}\hlstd{,}\hlnum{5}\hlstd{))}
\hlstd{pres_results}\hlopt{$}\hlstd{margin} \hlkwb{=} \hlstd{pres_results}\hlopt{$}\hlstd{dem}\hlopt{-}\hlstd{pres_results}\hlopt{$}\hlstd{rep}
\hlstd{label7} \hlkwb{=} \hlkwd{c}\hlstd{(}\hlstr{"Strong Red"}\hlstd{,} \hlstr{"Red"}\hlstd{,} \hlstr{"Lean Red"}\hlstd{,} \hlstr{"Competitive"}\hlstd{,}
           \hlstr{"Lean Blue"}\hlstd{,} \hlstr{"Blue"}\hlstd{,} \hlstr{"Strong Blue"}\hlstd{)}
\hlstd{elect1976} \hlkwb{=} \hlkwd{subset}\hlstd{(pres_results , year} \hlopt{==} \hlnum{1976}\hlstd{)}
\hlstd{elect1980} \hlkwb{=} \hlkwd{subset}\hlstd{(pres_results , year} \hlopt{==} \hlnum{1980}\hlstd{)}
\hlstd{elect1984} \hlkwb{=} \hlkwd{subset}\hlstd{(pres_results , year} \hlopt{==} \hlnum{1984}\hlstd{)}
\hlstd{elect1988} \hlkwb{=} \hlkwd{subset}\hlstd{(pres_results , year} \hlopt{==} \hlnum{1988}\hlstd{)}
\hlstd{elect1992}  \hlkwb{=} \hlkwd{subset}\hlstd{(pres_results , year} \hlopt{==} \hlnum{1992}\hlstd{)}
\hlstd{elect1996}  \hlkwb{=} \hlkwd{subset}\hlstd{(pres_results , year} \hlopt{==} \hlnum{1996}\hlstd{)}
\hlstd{elect2000}  \hlkwb{=} \hlkwd{subset}\hlstd{(pres_results , year} \hlopt{==} \hlnum{2000}\hlstd{)}
\hlstd{elect2004}  \hlkwb{=} \hlkwd{subset}\hlstd{(pres_results , year} \hlopt{==} \hlnum{2004}\hlstd{)}
\hlstd{elect2008}  \hlkwb{=} \hlkwd{subset}\hlstd{(pres_results , year} \hlopt{==} \hlnum{2008}\hlstd{)}
\hlstd{elect2012}  \hlkwb{=} \hlkwd{subset}\hlstd{(pres_results , year} \hlopt{==} \hlnum{2012}\hlstd{)}
\hlstd{elect2016}  \hlkwb{=} \hlkwd{subset}\hlstd{(pres_results , year} \hlopt{==} \hlnum{2016}\hlstd{)}
\hlstd{electdata} \hlkwb{=} \hlkwd{data.frame}\hlstd{(}\hlstr{"state"} \hlstd{= elect2008}\hlopt{$}\hlstd{state,} \hlstr{"1976"} \hlstd{= elect1976}\hlopt{$}\hlstd{margin,} \hlstr{"1980"} \hlstd{= elect1980}\hlopt{$}\hlstd{margin,} \hlstr{"1984"} \hlstd{= elect1984}\hlopt{$}\hlstd{margin,} \hlstr{"1988"} \hlstd{= elect1988}\hlopt{$}\hlstd{margin,} \hlstr{"1992"} \hlstd{=elect1992}\hlopt{$}\hlstd{margin,} \hlstr{"1996"} \hlstd{=elect1996}\hlopt{$}\hlstd{margin,} \hlstr{"2000"} \hlstd{= elect2000}\hlopt{$}\hlstd{margin,} \hlstr{"2004"} \hlstd{= elect2004}\hlopt{$}\hlstd{margin,} \hlstr{"2008"} \hlstd{=  elect2008}\hlopt{$}\hlstd{margin,} \hlstr{"2012"} \hlstd{= elect2012}\hlopt{$}\hlstd{margin,} \hlstr{"2016"} \hlstd{= elect2016}\hlopt{$}\hlstd{margin)}
\hlstd{polldata} \hlkwb{=} \hlkwd{read.csv}\hlstd{(}\hlstr{"PollingDataSetStateLevelOnly7-17-20.csv"}\hlstd{)}
\hlstd{polls2008} \hlkwb{=} \hlkwd{subset}\hlstd{(polldata, Year} \hlopt{==} \hlstr{"2008"}\hlstd{)}
\hlstd{polls2008} \hlkwb{=} \hlstd{polls2008[}\hlkwd{complete.cases}\hlstd{(polls2008[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2008"}\hlstd{,} \hlstr{"McCain"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2012} \hlkwb{=} \hlkwd{subset}\hlstd{(polldata, Year} \hlopt{==} \hlstr{"2012"}\hlstd{)}
\hlstd{polls2012} \hlkwb{=} \hlstd{polls2012[}\hlkwd{complete.cases}\hlstd{(polls2012[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2012"}\hlstd{,} \hlstr{"Romney"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2016} \hlkwb{=} \hlkwd{subset}\hlstd{(polldata, Year} \hlopt{==} \hlstr{"2016"}\hlstd{)}
\hlstd{polls2016} \hlkwb{=} \hlstd{polls2016[}\hlkwd{complete.cases}\hlstd{(polls2016[,} \hlkwd{c}\hlstd{(}\hlstr{"Trump"}\hlstd{,} \hlstr{"Clinton"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{elect2008} \hlkwb{=} \hlkwd{propnormdfreplace}\hlstd{(elect2008,} \hlkwd{c}\hlstd{(}\hlnum{4}\hlstd{,}\hlnum{5}\hlstd{))}
\hlstd{elect2012} \hlkwb{=} \hlkwd{propnormdfreplace}\hlstd{(elect2012,} \hlkwd{c}\hlstd{(}\hlnum{4}\hlstd{,}\hlnum{5}\hlstd{))}
\hlstd{elect2016} \hlkwb{=} \hlkwd{propnormdfreplace}\hlstd{(elect2016,} \hlkwd{c}\hlstd{(}\hlnum{4}\hlstd{,}\hlnum{5}\hlstd{))}
\hlstd{results2008} \hlkwb{=} \hlstd{elect2008[,} \hlkwd{c}\hlstd{(}\hlnum{2}\hlstd{,} \hlnum{4}\hlstd{)]}
\hlstd{results2008}\hlopt{$}\hlstd{state} \hlkwb{=} \hlkwd{as.factor}\hlstd{(results2008}\hlopt{$}\hlstd{state)}
\hlcom{#results2008 = results2008[elect2008$state %in% states2008,]}
\hlstd{results2012} \hlkwb{=} \hlstd{elect2012[,} \hlkwd{c}\hlstd{(}\hlnum{2}\hlstd{,} \hlnum{4}\hlstd{)]}
\hlstd{results2012}\hlopt{$}\hlstd{state} \hlkwb{=} \hlkwd{as.factor}\hlstd{(results2012}\hlopt{$}\hlstd{state)}
\hlcom{#results2008 = results2012[elect2012$state %in% states2012,]}
\hlstd{results2016} \hlkwb{=} \hlstd{elect2016[,} \hlkwd{c}\hlstd{(}\hlnum{2}\hlstd{,} \hlnum{4}\hlstd{)]}
\hlstd{results2016}\hlopt{$}\hlstd{state} \hlkwb{=} \hlkwd{as.factor}\hlstd{(results2016}\hlopt{$}\hlstd{state)}
\end{alltt}
\end{kframe}
\end{knitrout}



Twelve weeks to go Error distribution
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldata,} \hlnum{84} \hlopt{<}  \hlstd{polldata}\hlopt{$}\hlstd{EndDaysUntil)}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, polldata}\hlopt{$}\hlstd{EndDaysUntil} \hlopt{<} \hlnum{100}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2008"}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlstd{polls2008temp[}\hlkwd{complete.cases}\hlstd{(polls2008temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2008"}\hlstd{,} \hlstr{"McCain"}\hlstd{,} \hlstr{"observations"}\hlstd{,}\hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2012temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2012"}\hlstd{)}
\hlstd{polls2012temp} \hlkwb{=} \hlstd{polls2012temp[}\hlkwd{complete.cases}\hlstd{(polls2012temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2012"}\hlstd{,} \hlstr{"Romney"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2016temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2016"}\hlstd{)}
\hlstd{polls2016temp} \hlkwb{=} \hlstd{polls2016temp[}\hlkwd{complete.cases}\hlstd{(polls2016temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Trump"}\hlstd{,} \hlstr{"Clinton"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2008ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2008temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{9}\hlstd{,} \hlnum{10}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[,} \hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,}\hlnum{4}\hlopt{:}\hlnum{5}\hlstd{) ],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2012ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2012temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{34}\hlstd{,} \hlnum{35}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{35}\hlstd{,}  \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,}\hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{5}\hlopt{:}\hlnum{6}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2016ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2016temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{44}\hlstd{,} \hlnum{45}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{45}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}\hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{6}\hlopt{:}\hlnum{7}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{error2008ra_12W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2008ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning in ae\_by\_state(polls2008ratemp[, 1:2], results2008[-8, ]): Predicted names do not match names of actual data}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in ae\_by\_state(polls2008ratemp[, 1:2], results2008[-8, ]): Incompatiable dimensions of predicted and actual}}\begin{alltt}
\hlstd{error2012ra_12W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2016ra_12W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlkwd{mean}\hlstd{(error2008ra_12W[,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in mean(error2008ra\_12W[, 2]): object 'error2008ra\_12W' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_12W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.05162672
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_12W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.0548004
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2008ra_12W[error2008ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in mean(error2008ra\_12W[error2008ra[, 1] \%in\% comp2008, 2]): object 'error2008ra\_12W' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_12W[error2012ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2012ra[, 1] \%in\% comp2012: object 'error2012ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_12W[error2016ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2016ra[, 1] \%in\% comp2016: object 'error2016ra' not found}}\begin{alltt}
\hlstd{cicoverage2008_12W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning in polls2008ratemp\$Margin.of.Error > ae\_by\_state(polls2008ratemp[-8, : longer object length is not a multiple of shorter object length}}\begin{alltt}
\hlstd{cicoverage2012_12W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012)[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{51}
\hlstd{cicoverage2016_12W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016)[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{51}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_12W, cicoverage2012_12W, cicoverage2016_12W))}
\end{alltt}
\begin{verbatim}
## [1] NA
\end{verbatim}
\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_12W, cicoverage2012_12W, cicoverage2016_12W)}
\end{alltt}
\begin{verbatim}
## [1] NA NA NA
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008))}
\end{alltt}
\begin{verbatim}
##    polls2008ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.12837279    AK              0.048777713
## 2                       0.08110860    AL              0.014033613
## 3                       0.11051929    AR              0.081155614
## 4                       0.07502618    AZ              0.022270411
## 5                       0.08749961    CA              0.033986335
## 6                       0.09945105    CO              0.037526788
## 7                       0.09072593    CT              0.104709091
## 8                              NaN    DC                      NaN
## 9                       0.11051929    DE              0.146942979
## 10                      0.05039804    FL              0.030829250
## 11                      0.05429643    GA              0.018684037
## 12                      0.08059878    HI              0.162295357
## 13                      0.03870004    IA              0.011365306
## 14                      0.07248412    ID              0.055709712
## 15                      0.11177066    IL              0.023544659
## 16                      0.07388674    IN              0.026273185
## 17                      0.06659206    KS              0.008250197
## 18                      0.09745054    KY              0.007875623
## 19                      0.08294709    LA              0.025319658
## 20                      0.08692778    MA              0.047341677
## 21                      0.11319285    MD              0.050452035
## 22                      0.11025461    ME              0.017489533
## 23                      0.08080728    MI              0.068658212
## 24                      0.07696800    MN              0.012405457
## 25                      0.06918584    MO              0.007212065
## 26                      0.05555053    MS              0.017105344
## 27                      0.07571508    MT              0.007021550
## 28                      0.05167705    NC              0.014192134
## 29                      0.06967494    ND              0.040255289
## 30                      0.11668293    NE              0.003810752
## 31                      0.12837279    NH              0.110555547
## 32                      0.05439420    NJ              0.072686185
## 33                      0.07936473    NM              0.050860543
## 34                      0.05962211    NV              0.074500370
## 35                      0.07826145    NY              0.036144356
## 36                      0.07214208    OH              0.010345981
## 37                      0.18377166    OK              0.015338053
## 38                      0.08059878    OR              0.016495310
## 39                      0.05414846    PA              0.018244842
## 40                      0.12738136    RI              0.041405835
## 41                      0.12837279    SC              0.016425844
## 42                      0.11051929    SD              0.022395480
## 43                      0.13544646    TN              0.023091506
## 44                      0.05146672    TX              0.014024939
## 45                      0.16508162    UT              0.026201622
## 46                      0.04985221    VA              0.024797842
## 47                      0.27117792    VT              0.072793387
## 48                      0.04859674    WA              0.016546589
## 49                      0.04544591    WI              0.020266903
## 50                      0.08059878    WV              0.134379340
## 51                      0.11390798    WY              0.086218197
##    Total.Average.Error
## 1          0.048777713
## 2          0.014033613
## 3          0.081155614
## 4          0.022270411
## 5          0.033986335
## 6          0.037526788
## 7          0.104709091
## 8                  NaN
## 9          0.146942979
## 10         0.030829250
## 11         0.018684037
## 12         0.162295357
## 13         0.011365306
## 14         0.055709712
## 15         0.023544659
## 16         0.026273185
## 17         0.008250197
## 18         0.007875623
## 19         0.025319658
## 20         0.047341677
## 21         0.050452035
## 22         0.017489533
## 23         0.068658212
## 24         0.012405457
## 25         0.007212065
## 26         0.017105344
## 27         0.007021550
## 28         0.014192134
## 29         0.040255289
## 30         0.003810752
## 31         0.110555547
## 32         0.072686185
## 33         0.050860543
## 34         0.074500370
## 35         0.036144356
## 36         0.010345981
## 37         0.015338053
## 38         0.016495310
## 39         0.018244842
## 40         0.041405835
## 41         0.016425844
## 42         0.022395480
## 43         0.023091506
## 44         0.014024939
## 45         0.026201622
## 46         0.024797842
## 47         0.072793387
## 48         0.016546589
## 49         0.020266903
## 50         0.134379340
## 51         0.086218197
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012))}
\end{alltt}
\begin{verbatim}
##    polls2012ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.11827356    AK              0.042579914
## 2                       0.11827356    AL              0.081589295
## 3                       0.09519672    AR              0.153106481
## 4                       0.06124847    AZ              0.015776081
## 5                       0.09519672    CA              0.087165684
## 6                       0.04837606    CO              0.013921454
## 7                       0.08931820    CT              0.029555419
## 8                              NaN    DC                      NaN
## 9                       0.09519672    DE              0.062907122
## 10                      0.03711685    FL              0.005856292
## 11                      0.06571859    GA              0.009609350
## 12                      0.08971810    HI              0.147304887
## 13                      0.05909780    IA              0.010325149
## 14                      0.11827356    ID              0.133640878
## 15                      0.08971810    IL              0.016041636
## 16                      0.11827356    IN              0.021430756
## 17                      0.30078516    KS              0.043609045
## 18                      0.09519672    KY              0.146990151
## 19                      0.09519672    LA              0.119030684
## 20                      0.05139296    MA              0.015199646
## 21                      0.09519672    MD              0.101654831
## 22                      0.09094086    ME              0.011107504
## 23                      0.10298450    MI              0.011385953
## 24                      0.05054970    MN              0.021983495
## 25                      0.05596265    MO              0.034001046
## 26                      0.16879902    MS              0.006282650
## 27                      0.13884150    MT              0.039598683
## 28                      0.03239795    NC              0.003431138
## 29                      0.11827356    ND              0.070539092
## 30                      0.07253341    NE              0.042450172
## 31                      0.05166514    NH              0.007034578
## 32                      0.08038582    NJ              0.017119417
## 33                      0.06667848    NM              0.020183270
## 34                      0.04532003    NV              0.011073192
## 35                      0.04920710    NY              0.022020437
## 36                      0.03811501    OH              0.009698814
## 37                      0.11827356    OK              0.137150207
## 38                      0.05071371    OR              0.010757989
## 39                      0.03678023    PA              0.011123153
## 40                      0.04515491    RI              0.038661983
## 41                      0.08413689    SC              0.032728996
## 42                      0.19360576    SD              0.074188204
## 43                      0.13363585    TN              0.070224058
## 44                      0.10054427    TX              0.032647124
## 45                      0.12496776    UT              0.048900387
## 46                      0.06005629    VA              0.009356967
## 47                      0.08971810    VT              0.112738990
## 48                      0.03537602    WA              0.010417080
## 49                      0.06230909    WI              0.019726869
## 50                      0.08971810    WV              0.206476575
## 51                      0.11827356    WY              0.181033350
##    Total.Average.Error
## 1          0.042579914
## 2          0.081589295
## 3          0.153106481
## 4          0.015776081
## 5          0.087165684
## 6          0.013921454
## 7          0.029555419
## 8                  NaN
## 9          0.062907122
## 10         0.005856292
## 11         0.009609350
## 12         0.147304887
## 13         0.010325149
## 14         0.133640878
## 15         0.016041636
## 16         0.021430756
## 17         0.043609045
## 18         0.146990151
## 19         0.119030684
## 20         0.015199646
## 21         0.101654831
## 22         0.011107504
## 23         0.011385953
## 24         0.021983495
## 25         0.034001046
## 26         0.006282650
## 27         0.039598683
## 28         0.003431138
## 29         0.070539092
## 30         0.042450172
## 31         0.007034578
## 32         0.017119417
## 33         0.020183270
## 34         0.011073192
## 35         0.022020437
## 36         0.009698814
## 37         0.137150207
## 38         0.010757989
## 39         0.011123153
## 40         0.038661983
## 41         0.032728996
## 42         0.074188204
## 43         0.070224058
## 44         0.032647124
## 45         0.048900387
## 46         0.009356967
## 47         0.112738990
## 48         0.010417080
## 49         0.019726869
## 50         0.206476575
## 51         0.181033350
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016))}
\end{alltt}
\begin{verbatim}
##    polls2016ratemp$Margin.of.Error state Average.Error.by.predict
## 1                               NA    AK              0.072859871
## 2                               NA    AL              0.002600027
## 3                       0.20160084    AR              0.216827058
## 4                       0.06242329    AZ              0.015048544
## 5                       0.09965079    CA              0.029283091
## 6                       0.07136446    CO              0.023764707
## 7                       0.20160084    CT              0.002560206
## 8                       0.07477464    DC              0.336449023
## 9                       0.20160084    DE              0.013989467
## 10                      0.05752904    FL              0.014348977
## 11                      0.03861451    GA              0.020967306
## 12                      0.20160084    HI              0.100437693
## 13                      0.03795269    IA              0.059175703
## 14                              NA    ID              0.026385349
## 15                      0.06853148    IL              0.016647719
## 16                      0.12578747    IN              0.074785960
## 17                              NA    KS              0.045601714
## 18                      0.07136446    KY              0.159774917
## 19                      0.06009487    LA              0.142593280
## 20                      0.07477464    MA              0.026009926
## 21                      0.20160084    MD              0.066186815
## 22                      0.20160084    ME              0.058007770
## 23                      0.05948326    MI              0.034068431
## 24                      0.12078126    MN              0.021856021
## 25                      0.05474670    MO              0.132401339
## 26                              NA    MS              0.055442990
## 27                      0.07136446    MT              0.114165270
## 28                      0.09660965    NC              0.026674868
## 29                              NA    ND              0.051750966
## 30                              NA    NE              0.021239677
## 31                      0.07632485    NH              0.018622636
## 32                      0.07133809    NJ              0.006381303
## 33                      0.06009487    NM              0.005631442
## 34                      0.07136446    NV              0.009868467
## 35                      0.08130036    NY              0.002357078
## 36                      0.03767196    OH              0.048235058
## 37                              NA    OK              0.046705909
## 38                      0.06009487    OR              0.020681882
## 39                      0.04149837    PA              0.053714915
## 40                      0.07477464    RI              0.037395820
## 41                      0.04762476    SC              0.060635048
## 42                      0.07136446    SD              0.162787208
## 43                      0.16782291    TN              0.070165591
## 44                      0.07136446    TX              0.050200883
## 45                      0.10182763    UT              0.086852501
## 46                      0.06803910    VA              0.006284559
## 47                      0.20160084    VT              0.077888582
## 48                      0.17951089    WA              0.008806565
## 49                      0.05366212    WI              0.061998563
## 50                      0.54820500    WV              0.148638728
## 51                              NA    WY              0.110711733
##    Total.Average.Error
## 1          0.072859871
## 2          0.002600027
## 3          0.216827058
## 4          0.015048544
## 5          0.029283091
## 6          0.023764707
## 7          0.002560206
## 8          0.336449023
## 9          0.013989467
## 10         0.014348977
## 11         0.020967306
## 12         0.100437693
## 13         0.059175703
## 14         0.026385349
## 15         0.016647719
## 16         0.074785960
## 17         0.045601714
## 18         0.159774917
## 19         0.142593280
## 20         0.026009926
## 21         0.066186815
## 22         0.058007770
## 23         0.034068431
## 24         0.021856021
## 25         0.132401339
## 26         0.055442990
## 27         0.114165270
## 28         0.026674868
## 29         0.051750966
## 30         0.021239677
## 31         0.018622636
## 32         0.006381303
## 33         0.005631442
## 34         0.009868467
## 35         0.002357078
## 36         0.048235058
## 37         0.046705909
## 38         0.020681882
## 39         0.053714915
## 40         0.037395820
## 41         0.060635048
## 42         0.162787208
## 43         0.070165591
## 44         0.050200883
## 45         0.086852501
## 46         0.006284559
## 47         0.077888582
## 48         0.008806565
## 49         0.061998563
## 50         0.148638728
## 51         0.110711733
\end{verbatim}
\end{kframe}
\end{knitrout}
11 Weeks
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldata,} \hlnum{77} \hlopt{<}  \hlstd{polldata}\hlopt{$}\hlstd{EndDaysUntil)}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, polldata}\hlopt{$}\hlstd{EndDaysUntil} \hlopt{<} \hlnum{100}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2008"}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlstd{polls2008temp[}\hlkwd{complete.cases}\hlstd{(polls2008temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2008"}\hlstd{,} \hlstr{"McCain"}\hlstd{,} \hlstr{"observations"}\hlstd{,}\hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2012temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2012"}\hlstd{)}
\hlstd{polls2012temp} \hlkwb{=} \hlstd{polls2012temp[}\hlkwd{complete.cases}\hlstd{(polls2012temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2012"}\hlstd{,} \hlstr{"Romney"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2016temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2016"}\hlstd{)}
\hlstd{polls2016temp} \hlkwb{=} \hlstd{polls2016temp[}\hlkwd{complete.cases}\hlstd{(polls2016temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Trump"}\hlstd{,} \hlstr{"Clinton"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2008ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2008temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{9}\hlstd{,} \hlnum{10}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[,} \hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,}\hlnum{4}\hlopt{:}\hlnum{5}\hlstd{) ],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2012ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2012temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{34}\hlstd{,} \hlnum{35}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{35}\hlstd{,}  \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,}\hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{5}\hlopt{:}\hlnum{6}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2016ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2016temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{44}\hlstd{,} \hlnum{45}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{45}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}\hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{6}\hlopt{:}\hlnum{7}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{error2008ra_11W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2008ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning in ae\_by\_state(polls2008ratemp[, 1:2], results2008[-8, ]): Predicted names do not match names of actual data}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in ae\_by\_state(polls2008ratemp[, 1:2], results2008[-8, ]): Incompatiable dimensions of predicted and actual}}\begin{alltt}
\hlstd{error2012ra_11W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2016ra_11W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlkwd{mean}\hlstd{(error2008ra_11W[,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in mean(error2008ra\_11W[, 2]): object 'error2008ra\_11W' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_11W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] NaN
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_11W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.06271874
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2008ra_11W[error2008ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in mean(error2008ra\_11W[error2008ra[, 1] \%in\% comp2008, 2]): object 'error2008ra\_11W' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_11W[error2012ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2012ra[, 1] \%in\% comp2012: object 'error2012ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_11W[error2016ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2016ra[, 1] \%in\% comp2016: object 'error2016ra' not found}}\begin{alltt}
\hlstd{cicoverage2008_11W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning in polls2008ratemp\$Margin.of.Error > ae\_by\_state(polls2008ratemp[-8, : longer object length is not a multiple of shorter object length}}\begin{alltt}
\hlstd{cicoverage2012_11W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012)[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{51}
\hlstd{cicoverage2016_11W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016)[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{51}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_11W, cicoverage2012_11W, cicoverage2016_11W))}
\end{alltt}
\begin{verbatim}
## [1] NA
\end{verbatim}
\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_11W, cicoverage2012_11W, cicoverage2016_11W)}
\end{alltt}
\begin{verbatim}
## [1] NA NA NA
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008))}
\end{alltt}
\begin{verbatim}
##    polls2008ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.13410554    AK              0.045184446
## 2                       0.07891986    AL              0.012956421
## 3                       0.11578070    AR              0.077129588
## 4                       0.07188121    AZ              0.017857831
## 5                       0.09054129    CA              0.037778563
## 6                       0.04799536    CO              0.031303213
## 7                       0.04527627    CT              0.103170189
## 8                              NaN    DC                      NaN
## 9                       0.11578070    DE              0.150969005
## 10                      0.07642263    FL              0.040329722
## 11                      0.05139785    GA              0.017584470
## 12                      0.08627142    HI              0.179165781
## 13                      0.03239390    IA              0.008289826
## 14                      0.06713529    ID              0.054750034
## 15                      0.09741364    IL              0.027476312
## 16                      0.06863280    IN              0.026842132
## 17                      0.07404466    KS              0.005907513
## 18                      0.09890123    KY              0.008713793
## 19                      0.07402868    LA              0.022737390
## 20                      0.07354952    MA              0.106982604
## 21                      0.08627142    MD              0.078529395
## 22                      0.12514561    ME              0.015824587
## 23                      0.06232405    MI              0.055831428
## 24                      0.08481313    MN              0.001981699
## 25                      0.07426423    MO              0.010722348
## 26                      0.05308479    MS              0.016566324
## 27                      0.07676126    MT              0.007429952
## 28                      0.05327672    NC              0.016475291
## 29                      0.13776354    ND              0.032766659
## 30                      0.13410554    NE              0.010627341
## 31                      0.13780631    NH              0.050377963
## 32                      0.07446718    NJ              0.036902186
## 33                      0.11941396    NM              0.053464235
## 34                      0.13410554    NV              0.129330784
## 35                      0.08176491    NY              0.035319385
## 36                      0.07831446    OH              0.015968513
## 37                      0.19273285    OK              0.024399068
## 38                      0.08258310    OR              0.030900345
## 39                      0.04734961    PA              0.016712756
## 40                      0.08627142    RI              0.091209897
## 41                      0.07745346    SC              0.006807548
## 42                      0.09579772    SD              0.002497421
## 43                      0.11885528    TN              0.004580488
## 44                      0.08508254    TX              0.002057523
## 45                      0.18037782    UT              0.007923176
## 46                      0.05854622    VA              0.056429992
## 47                      0.28424845    VT              0.072885316
## 48                      0.04644196    WA              0.023098395
## 49                      0.03676687    WI              0.022652262
## 50                      0.32846110    WV              0.031451231
## 51                      0.10707761    WY              0.084757563
##    Total.Average.Error
## 1          0.045184446
## 2          0.012956421
## 3          0.077129588
## 4          0.017857831
## 5          0.037778563
## 6          0.031303213
## 7          0.103170189
## 8                  NaN
## 9          0.150969005
## 10         0.040329722
## 11         0.017584470
## 12         0.179165781
## 13         0.008289826
## 14         0.054750034
## 15         0.027476312
## 16         0.026842132
## 17         0.005907513
## 18         0.008713793
## 19         0.022737390
## 20         0.106982604
## 21         0.078529395
## 22         0.015824587
## 23         0.055831428
## 24         0.001981699
## 25         0.010722348
## 26         0.016566324
## 27         0.007429952
## 28         0.016475291
## 29         0.032766659
## 30         0.010627341
## 31         0.050377963
## 32         0.036902186
## 33         0.053464235
## 34         0.129330784
## 35         0.035319385
## 36         0.015968513
## 37         0.024399068
## 38         0.030900345
## 39         0.016712756
## 40         0.091209897
## 41         0.006807548
## 42         0.002497421
## 43         0.004580488
## 44         0.002057523
## 45         0.007923176
## 46         0.056429992
## 47         0.072885316
## 48         0.023098395
## 49         0.022652262
## 50         0.031451231
## 51         0.084757563
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012))}
\end{alltt}
\begin{verbatim}
##    polls2012ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.14522064    AK             4.314572e-02
## 2                       0.14522064    AL             8.215510e-02
## 3                       0.11500487    AR             1.518774e-01
## 4                       0.05989764    AZ             1.633017e-02
## 5                       0.07805601    CA             1.472539e-02
## 6                       0.11500487    CO             2.853469e-03
## 7                       0.11500487    CT             5.739242e-02
## 8                              NaN    DC                      NaN
## 9                       0.11500487    DE             6.413620e-02
## 10                      0.03630569    FL             6.534904e-05
## 11                      0.06451788    GA             4.998038e-03
## 12                      0.07336906    HI             1.313414e-01
## 13                      0.07336906    IA             5.610358e-02
## 14                      0.14522064    ID             1.342067e-01
## 15                      0.09093480    IL             2.156060e-02
## 16                      0.14522064    IN             2.199656e-02
## 17                      0.07061287    KS             1.021054e-01
## 18                      0.11500487    KY             1.457611e-01
## 19                      0.11500487    LA             1.178016e-01
## 20                      0.05268555    MA             1.871149e-02
## 21                      0.11500487    MD             1.028839e-01
## 22                      0.11155385    ME             1.814288e-02
## 23                      0.06590711    MI             1.994055e-02
## 24                      0.05487464    MN             2.426863e-02
## 25                      0.06380651    MO             2.608969e-02
## 26                      0.17296448    MS             1.367337e-03
## 27                      0.22636210    MT             4.314069e-02
## 28                      0.03296783    NC             3.398482e-03
## 29                      0.14522064    ND             7.110490e-02
## 30                      0.07146163    NE             4.302735e-02
## 31                      0.06580275    NH             1.620055e-02
## 32                      0.11500487    NJ             5.918630e-02
## 33                      0.05886242    NM             2.624472e-02
## 34                      0.04498560    NV             1.139233e-02
## 35                      0.04332964    NY             1.936211e-02
## 36                      0.03665386    OH             1.761954e-03
## 37                      0.39130839    OK             3.919651e-02
## 38                      0.06295845    OR             7.929640e-03
## 39                      0.03648607    PA             4.738371e-03
## 40                      0.04479233    RI             4.174449e-02
## 41                      0.08632068    SC             3.156285e-02
## 42                      0.20396740    SD             7.258373e-02
## 43                      0.13459835    TN             7.023566e-02
## 44                      0.10070999    TX             3.241544e-02
## 45                             NaN    UT                      NaN
## 46                      0.09045713    VA             3.609070e-03
## 47                      0.07336906    VT             9.677549e-02
## 48                      0.03843260    WA             8.694228e-03
## 49                      0.07046794    WI             6.093755e-03
## 50                      0.07336906    WV             2.224401e-01
## 51                      0.14522064    WY             1.815992e-01
##    Total.Average.Error
## 1         4.314572e-02
## 2         8.215510e-02
## 3         1.518774e-01
## 4         1.633017e-02
## 5         1.472539e-02
## 6         2.853469e-03
## 7         5.739242e-02
## 8                  NaN
## 9         6.413620e-02
## 10        6.534904e-05
## 11        4.998038e-03
## 12        1.313414e-01
## 13        5.610358e-02
## 14        1.342067e-01
## 15        2.156060e-02
## 16        2.199656e-02
## 17        1.021054e-01
## 18        1.457611e-01
## 19        1.178016e-01
## 20        1.871149e-02
## 21        1.028839e-01
## 22        1.814288e-02
## 23        1.994055e-02
## 24        2.426863e-02
## 25        2.608969e-02
## 26        1.367337e-03
## 27        4.314069e-02
## 28        3.398482e-03
## 29        7.110490e-02
## 30        4.302735e-02
## 31        1.620055e-02
## 32        5.918630e-02
## 33        2.624472e-02
## 34        1.139233e-02
## 35        1.936211e-02
## 36        1.761954e-03
## 37        3.919651e-02
## 38        7.929640e-03
## 39        4.738371e-03
## 40        4.174449e-02
## 41        3.156285e-02
## 42        7.258373e-02
## 43        7.023566e-02
## 44        3.241544e-02
## 45                 NaN
## 46        3.609070e-03
## 47        9.677549e-02
## 48        8.694228e-03
## 49        6.093755e-03
## 50        2.224401e-01
## 51        1.815992e-01
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016))}
\end{alltt}
\begin{verbatim}
##    polls2016ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.13744520    AK              0.018941200
## 2                               NA    AL              0.126887503
## 3                       0.16078644    AR              0.219844086
## 4                       0.05507475    AZ              0.012896125
## 5                       0.08001778    CA              0.036120664
## 6                       0.07004639    CO              0.024403705
## 7                       0.05919404    CT              0.019695094
## 8                       0.05879652    DC              0.334366668
## 9                       0.16078644    DE              0.017006495
## 10                      0.05906976    FL              0.030341883
## 11                      0.07814883    GA              0.033373858
## 12                      0.16078644    HI              0.097420665
## 13                      0.04777265    IA              0.052920867
## 14                      0.13744520    ID              0.118186420
## 15                      0.06765760    IL              0.017022711
## 16                      0.10456861    IN              0.064514167
## 17                      0.14209249    KS              0.062096144
## 18                      0.07814883    KY              0.163468422
## 19                      0.26691921    LA              0.068211557
## 20                      0.05879652    MA              0.023927572
## 21                      0.28856473    MD              0.014285320
## 22                      0.03096687    ME              0.047278596
## 23                      0.05880095    MI              0.032313436
## 24                      0.12545710    MN              0.022574247
## 25                      0.03760905    MO              0.113862455
## 26                              NA    MS              0.074044541
## 27                      0.07622498    MT              0.101804503
## 28                      0.06783387    NC              0.022418716
## 29                              NA    ND              0.181238496
## 30                      0.13744520    NE              0.070561394
## 31                      0.07814883    NH              0.004791847
## 32                      0.06089155    NJ              0.021389702
## 33                      0.09084309    NM              0.002376808
## 34                      0.04643873    NV              0.010170131
## 35                      0.06527324    NY              0.004666927
## 36                      0.02800089    OH              0.061634168
## 37                              NA    OK              0.176193440
## 38                      0.14750535    OR              0.017617468
## 39                      0.03879293    PA              0.050600302
## 40                      0.05879652    RI              0.039478174
## 41                      0.03185363    SC              0.060472102
## 42                      0.07814883    SD              0.166480712
## 43                      0.17166988    TN              0.071054844
## 44                      0.06753864    TX              0.014970420
## 45                      0.10192667    UT              0.048003879
## 46                      0.06300350    VA              0.004635692
## 47                      0.16078644    VT              0.074871554
## 48                      0.17853555    WA              0.008310798
## 49                      0.07080315    WI              0.030923034
## 50                      0.53532521    WV              0.139434943
## 51                              NA    WY              0.240199264
##    Total.Average.Error
## 1          0.018941200
## 2          0.126887503
## 3          0.219844086
## 4          0.012896125
## 5          0.036120664
## 6          0.024403705
## 7          0.019695094
## 8          0.334366668
## 9          0.017006495
## 10         0.030341883
## 11         0.033373858
## 12         0.097420665
## 13         0.052920867
## 14         0.118186420
## 15         0.017022711
## 16         0.064514167
## 17         0.062096144
## 18         0.163468422
## 19         0.068211557
## 20         0.023927572
## 21         0.014285320
## 22         0.047278596
## 23         0.032313436
## 24         0.022574247
## 25         0.113862455
## 26         0.074044541
## 27         0.101804503
## 28         0.022418716
## 29         0.181238496
## 30         0.070561394
## 31         0.004791847
## 32         0.021389702
## 33         0.002376808
## 34         0.010170131
## 35         0.004666927
## 36         0.061634168
## 37         0.176193440
## 38         0.017617468
## 39         0.050600302
## 40         0.039478174
## 41         0.060472102
## 42         0.166480712
## 43         0.071054844
## 44         0.014970420
## 45         0.048003879
## 46         0.004635692
## 47         0.074871554
## 48         0.008310798
## 49         0.030923034
## 50         0.139434943
## 51         0.240199264
\end{verbatim}
\end{kframe}
\end{knitrout}


10 Weeks before
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldata,} \hlnum{70} \hlopt{<}  \hlstd{polldata}\hlopt{$}\hlstd{EndDaysUntil)}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, polldata}\hlopt{$}\hlstd{EndDaysUntil} \hlopt{<} \hlnum{100}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2008"}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlstd{polls2008temp[}\hlkwd{complete.cases}\hlstd{(polls2008temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2008"}\hlstd{,} \hlstr{"McCain"}\hlstd{,} \hlstr{"observations"}\hlstd{,}\hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2012temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2012"}\hlstd{)}
\hlstd{polls2012temp} \hlkwb{=} \hlstd{polls2012temp[}\hlkwd{complete.cases}\hlstd{(polls2012temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2012"}\hlstd{,} \hlstr{"Romney"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2016temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2016"}\hlstd{)}
\hlstd{polls2016temp} \hlkwb{=} \hlstd{polls2016temp[}\hlkwd{complete.cases}\hlstd{(polls2016temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Trump"}\hlstd{,} \hlstr{"Clinton"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2008ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2008temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{9}\hlstd{,} \hlnum{10}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[,} \hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,}\hlnum{4}\hlopt{:}\hlnum{5}\hlstd{) ],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2012ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2012temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{34}\hlstd{,} \hlnum{35}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{35}\hlstd{,}  \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,}\hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{5}\hlopt{:}\hlnum{6}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2016ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2016temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{44}\hlstd{,} \hlnum{45}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{45}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}\hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{6}\hlopt{:}\hlnum{7}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{error2008ra_10W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2008ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning in ae\_by\_state(polls2008ratemp[, 1:2], results2008[-8, ]): Predicted names do not match names of actual data}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in ae\_by\_state(polls2008ratemp[, 1:2], results2008[-8, ]): Incompatiable dimensions of predicted and actual}}\begin{alltt}
\hlstd{error2012ra_10W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2016ra_10W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlkwd{mean}\hlstd{(error2008ra_10W[,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in mean(error2008ra\_10W[, 2]): object 'error2008ra\_10W' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_10W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] NaN
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_10W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.05960663
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2008ra_10W[error2008ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in mean(error2008ra\_10W[error2008ra[, 1] \%in\% comp2008, 2]): object 'error2008ra\_10W' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_10W[error2012ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2012ra[, 1] \%in\% comp2012: object 'error2012ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_10W[error2016ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2016ra[, 1] \%in\% comp2016: object 'error2016ra' not found}}\begin{alltt}
\hlstd{cicoverage2008_10W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning in polls2008ratemp\$Margin.of.Error > ae\_by\_state(polls2008ratemp[-8, : longer object length is not a multiple of shorter object length}}\begin{alltt}
\hlstd{cicoverage2012_10W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012)[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{51}
\hlstd{cicoverage2016_10W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016)[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{51}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_10W, cicoverage2012_10W, cicoverage2016_10W))}
\end{alltt}
\begin{verbatim}
## [1] NA
\end{verbatim}
\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_10W, cicoverage2012_10W, cicoverage2016_10W)}
\end{alltt}
\begin{verbatim}
## [1] NA NA NA
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008))}
\end{alltt}
\begin{verbatim}
##    polls2008ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.14781969    AK              0.062265492
## 2                       0.07845873    AL              0.013624748
## 3                       0.11096244    AR              0.080723138
## 4                       0.07087444    AZ              0.016323527
## 5                       0.08504725    CA              0.037847385
## 6                       0.07331779    CO              0.042190459
## 7                       0.04691381    CT              0.105037931
## 8                              NaN    DC                      NaN
## 9                       0.11096244    DE              0.147375455
## 10                      0.06903054    FL              0.026684693
## 11                      0.05257590    GA              0.017278232
## 12                      0.09148968    HI              0.169683492
## 13                      0.03656389    IA              0.010134358
## 14                      0.12443528    ID              0.042628796
## 15                      0.10726050    IL              0.027622575
## 16                      0.11096244    IN              0.026213603
## 17                      0.08244706    KS              0.003705165
## 18                      0.09829487    KY              0.008537754
## 19                      0.11096244    LA              0.073577673
## 20                      0.09439429    MA              0.054311040
## 21                      0.11085054    MD              0.051880101
## 22                      0.11144293    ME              0.016481004
## 23                      0.04583406    MI              0.061179363
## 24                      0.08346656    MN              0.003563026
## 25                      0.12311597    MO              0.006602764
## 26                      0.05150747    MS              0.015465141
## 27                      0.11096244    MT              0.009300036
## 28                      0.04840316    NC              0.016568068
## 29                      0.11096244    ND              0.023092494
## 30                      0.14781969    NE              0.027708387
## 31                      0.08061558    NH              0.037920887
## 32                      0.04726550    NJ              0.072338349
## 33                      0.08520351    NM              0.057813070
## 34                      0.07842283    NV              0.071287147
## 35                      0.07924466    NY              0.037337237
## 36                      0.05797914    OH              0.002249882
## 37                      0.18622923    OK              0.019823574
## 38                      0.07574402    OR              0.055958314
## 39                      0.04198394    PA              0.016202463
## 40                      0.12331821    RI              0.038762098
## 41                      0.14781969    SC              0.002938065
## 42                      0.11096244    SD              0.021963004
## 43                      0.09919718    TN              0.016491336
## 44                      0.06055826    TX              0.003385668
## 45                      0.18966844    UT              0.010409258
## 46                      0.02535703    VA              0.029580955
## 47                      0.25665301    VT              0.064480007
## 48                      0.04802029    WA              0.030676606
## 49                      0.04507419    WI              0.020879593
## 50                      0.34411090    WV              0.034169782
## 51                      0.14781969    WY              0.117237876
##    Total.Average.Error
## 1          0.062265492
## 2          0.013624748
## 3          0.080723138
## 4          0.016323527
## 5          0.037847385
## 6          0.042190459
## 7          0.105037931
## 8                  NaN
## 9          0.147375455
## 10         0.026684693
## 11         0.017278232
## 12         0.169683492
## 13         0.010134358
## 14         0.042628796
## 15         0.027622575
## 16         0.026213603
## 17         0.003705165
## 18         0.008537754
## 19         0.073577673
## 20         0.054311040
## 21         0.051880101
## 22         0.016481004
## 23         0.061179363
## 24         0.003563026
## 25         0.006602764
## 26         0.015465141
## 27         0.009300036
## 28         0.016568068
## 29         0.023092494
## 30         0.027708387
## 31         0.037920887
## 32         0.072338349
## 33         0.057813070
## 34         0.071287147
## 35         0.037337237
## 36         0.002249882
## 37         0.019823574
## 38         0.055958314
## 39         0.016202463
## 40         0.038762098
## 41         0.002938065
## 42         0.021963004
## 43         0.016491336
## 44         0.003385668
## 45         0.010409258
## 46         0.029580955
## 47         0.064480007
## 48         0.030676606
## 49         0.020879593
## 50         0.034169782
## 51         0.117237876
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012))}
\end{alltt}
\begin{verbatim}
##    polls2012ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.11025523    AK             0.0377680341
## 2                       0.11025523    AL             0.0767774146
## 3                       0.09921147    AR             0.1592832802
## 4                       0.08349578    AZ             0.0371810416
## 5                       0.08026851    CA             0.0185413998
## 6                       0.04620406    CO             0.0146634208
## 7                       0.05610854    CT             0.0290461733
## 8                              NaN    DC                      NaN
## 9                       0.09921147    DE             0.0567303225
## 10                      0.06969872    FL             0.0016133485
## 11                      0.08180091    GA             0.0047310456
## 12                      0.13423814    HI             0.1657765576
## 13                      0.05592504    IA             0.0154820946
## 14                      0.11025523    ID             0.1288289977
## 15                      0.17618087    IL             0.0096057505
## 16                      0.09400670    IN             0.0006571471
## 17                      0.31341257    KS             0.0454087040
## 18                      0.09921147    KY             0.1531669506
## 19                      0.09921147    LA             0.1252074828
## 20                      0.06466737    MA             0.0239105934
## 21                      0.09921147    MD             0.0954780312
## 22                      0.08855114    ME             0.0114957840
## 23                      0.06060856    MI             0.0268332620
## 24                      0.05035140    MN             0.0192158013
## 25                      0.09761012    MO             0.0245534103
## 26                      0.16661148    MS             0.0002604440
## 27                      0.24868852    MT             0.0427873266
## 28                      0.02361154    NC             0.0204284174
## 29                      0.07349067    ND             0.0178015935
## 30                      0.06384616    NE             0.0420367863
## 31                      0.04012491    NH             0.0112185443
## 32                      0.07551040    NJ             0.0185463379
## 33                      0.05992765    NM             0.0209493226
## 34                      0.04096869    NV             0.0140377804
## 35                      0.06429687    NY             0.0215820080
## 36                      0.04076571    OH             0.0020550576
## 37                      0.11025523    OK             0.1323383267
## 38                      0.13423814    OR             0.0114497444
## 39                      0.04562755    PA             0.0094159650
## 40                      0.05655040    RI             0.0466702306
## 41                      0.11025523    SC             0.0176976763
## 42                      0.09921147    SD             0.1299242180
## 43                      0.09921147    TN             0.1412499419
## 44                      0.07156775    TX             0.0809364716
## 45                             NaN    UT                      NaN
## 46                      0.05783006    VA             0.0005009552
## 47                      0.13423814    VT             0.1312106608
## 48                      0.03726641    WA             0.0121316538
## 49                      0.03639469    WI             0.0143199295
## 50                      0.15362062    WV             0.0724499767
## 51                      0.11025523    WY             0.1762214694
##    Total.Average.Error
## 1         0.0377680341
## 2         0.0767774146
## 3         0.1592832802
## 4         0.0371810416
## 5         0.0185413998
## 6         0.0146634208
## 7         0.0290461733
## 8                  NaN
## 9         0.0567303225
## 10        0.0016133485
## 11        0.0047310456
## 12        0.1657765576
## 13        0.0154820946
## 14        0.1288289977
## 15        0.0096057505
## 16        0.0006571471
## 17        0.0454087040
## 18        0.1531669506
## 19        0.1252074828
## 20        0.0239105934
## 21        0.0954780312
## 22        0.0114957840
## 23        0.0268332620
## 24        0.0192158013
## 25        0.0245534103
## 26        0.0002604440
## 27        0.0427873266
## 28        0.0204284174
## 29        0.0178015935
## 30        0.0420367863
## 31        0.0112185443
## 32        0.0185463379
## 33        0.0209493226
## 34        0.0140377804
## 35        0.0215820080
## 36        0.0020550576
## 37        0.1323383267
## 38        0.0114497444
## 39        0.0094159650
## 40        0.0466702306
## 41        0.0176976763
## 42        0.1299242180
## 43        0.1412499419
## 44        0.0809364716
## 45                 NaN
## 46        0.0005009552
## 47        0.1312106608
## 48        0.0121316538
## 49        0.0143199295
## 50        0.0724499767
## 51        0.1762214694
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016))}
\end{alltt}
\begin{verbatim}
##    polls2016ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.12563190    AK              0.017710619
## 2                               NA    AL              0.002600027
## 3                       0.10994556    AR              0.239337984
## 4                       0.07922133    AZ              0.027391135
## 5                       0.10994556    CA              0.064795599
## 6                       0.09564382    CO              0.007191241
## 7                       0.09143450    CT              0.015564960
## 8                       0.08144907    DC              0.329458966
## 9                       0.10994556    DE              0.036500392
## 10                      0.06611089    FL              0.026739592
## 11                      0.04962840    GA              0.012964051
## 12                      0.10994556    HI              0.077926768
## 13                      0.05085207    IA              0.052978506
## 14                      0.12563190    ID              0.116955839
## 15                      0.05333531    IL              0.021785035
## 16                      0.10151506    IN              0.065477150
## 17                      0.14271896    KS              0.060539100
## 18                      0.07922133    KY              0.165197191
## 19                      0.27158835    LA              0.066349583
## 20                      0.18771476    MA              0.011587340
## 21                      0.24064115    MD              0.018357850
## 22                      0.04699612    ME              0.050997029
## 23                      0.06575503    MI              0.045660575
## 24                      0.10994556    MN              0.088169670
## 25                      0.05568607    MO              0.128989723
## 26                              NA    MS              0.055442990
## 27                      0.07922133    MT              0.119587544
## 28                      0.05488567    NC              0.036242380
## 29                              NA    ND              0.051750966
## 30                      0.12563190    NE              0.069330813
## 31                      0.04691291    NH              0.018895082
## 32                      0.11440681    NJ              0.002069129
## 33                      0.08366222    NM              0.003319039
## 34                      0.04315338    NV              0.020341070
## 35                      0.07867193    NY              0.001764554
## 36                      0.03873511    OH              0.062060248
## 37                              NA    OK              0.046705909
## 38                      0.11386887    OR              0.021257837
## 39                      0.05343715    PA              0.037594099
## 40                      0.08144907    RI              0.044385876
## 41                      0.03238124    SC              0.061030341
## 42                      0.07922133    SD              0.168209482
## 43                      0.28717157    TN              0.072765096
## 44                      0.08160406    TX              0.017195947
## 45                      0.09644621    UT              0.061737549
## 46                      0.07130055    VA              0.033944042
## 47                      0.10994556    VT              0.055377656
## 48                      0.10994556    WA              0.008617295
## 49                      0.05631595    WI              0.060130773
## 50                      0.10994556    WV              0.318097129
## 51                              NA    WY              0.110711733
##    Total.Average.Error
## 1          0.017710619
## 2          0.002600027
## 3          0.239337984
## 4          0.027391135
## 5          0.064795599
## 6          0.007191241
## 7          0.015564960
## 8          0.329458966
## 9          0.036500392
## 10         0.026739592
## 11         0.012964051
## 12         0.077926768
## 13         0.052978506
## 14         0.116955839
## 15         0.021785035
## 16         0.065477150
## 17         0.060539100
## 18         0.165197191
## 19         0.066349583
## 20         0.011587340
## 21         0.018357850
## 22         0.050997029
## 23         0.045660575
## 24         0.088169670
## 25         0.128989723
## 26         0.055442990
## 27         0.119587544
## 28         0.036242380
## 29         0.051750966
## 30         0.069330813
## 31         0.018895082
## 32         0.002069129
## 33         0.003319039
## 34         0.020341070
## 35         0.001764554
## 36         0.062060248
## 37         0.046705909
## 38         0.021257837
## 39         0.037594099
## 40         0.044385876
## 41         0.061030341
## 42         0.168209482
## 43         0.072765096
## 44         0.017195947
## 45         0.061737549
## 46         0.033944042
## 47         0.055377656
## 48         0.008617295
## 49         0.060130773
## 50         0.318097129
## 51         0.110711733
\end{verbatim}
\end{kframe}
\end{knitrout}

9 Weeks to go
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldata,} \hlnum{63} \hlopt{<}  \hlstd{polldata}\hlopt{$}\hlstd{EndDaysUntil)}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, polldata}\hlopt{$}\hlstd{EndDaysUntil} \hlopt{<} \hlnum{100}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2008"}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlstd{polls2008temp[}\hlkwd{complete.cases}\hlstd{(polls2008temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2008"}\hlstd{,} \hlstr{"McCain"}\hlstd{,} \hlstr{"observations"}\hlstd{,}\hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2012temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2012"}\hlstd{)}
\hlstd{polls2012temp} \hlkwb{=} \hlstd{polls2012temp[}\hlkwd{complete.cases}\hlstd{(polls2012temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2012"}\hlstd{,} \hlstr{"Romney"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2016temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2016"}\hlstd{)}
\hlstd{polls2016temp} \hlkwb{=} \hlstd{polls2016temp[}\hlkwd{complete.cases}\hlstd{(polls2016temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Trump"}\hlstd{,} \hlstr{"Clinton"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2008ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2008temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{9}\hlstd{,} \hlnum{10}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[,} \hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,}\hlnum{4}\hlopt{:}\hlnum{5}\hlstd{) ],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2012ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2012temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{34}\hlstd{,} \hlnum{35}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{35}\hlstd{,}  \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,}\hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{5}\hlopt{:}\hlnum{6}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2016ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2016temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{44}\hlstd{,} \hlnum{45}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{45}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}\hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{6}\hlopt{:}\hlnum{7}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{error2008ra_9W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2008ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning in ae\_by\_state(polls2008ratemp[, 1:2], results2008[-8, ]): Predicted names do not match names of actual data}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in ae\_by\_state(polls2008ratemp[, 1:2], results2008[-8, ]): Incompatiable dimensions of predicted and actual}}\begin{alltt}
\hlstd{error2012ra_9W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2016ra_9W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlkwd{mean}\hlstd{(error2008ra_9W[,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in mean(error2008ra\_9W[, 2]): object 'error2008ra\_9W' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_9W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.04814389
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_9W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.05677674
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2008ra_9W[error2008ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in mean(error2008ra\_9W[error2008ra[, 1] \%in\% comp2008, 2]): object 'error2008ra\_9W' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_9W[error2012ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2012ra[, 1] \%in\% comp2012: object 'error2012ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_9W[error2016ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2016ra[, 1] \%in\% comp2016: object 'error2016ra' not found}}\begin{alltt}
\hlstd{cicoverage2008_9W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning in polls2008ratemp\$Margin.of.Error > ae\_by\_state(polls2008ratemp[-8, : longer object length is not a multiple of shorter object length}}\begin{alltt}
\hlstd{cicoverage2012_9W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012)[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{51}
\hlstd{cicoverage2016_9W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016)[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{51}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_9W, cicoverage2012_9W, cicoverage2016_9W))}
\end{alltt}
\begin{verbatim}
## [1] NA
\end{verbatim}
\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_9W, cicoverage2012_9W, cicoverage2016_9W)}
\end{alltt}
\begin{verbatim}
## [1]        NA        NA 0.7254902
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008))}
\end{alltt}
\begin{verbatim}
##    polls2008ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.12836678    AK              0.072624030
## 2                       0.07904606    AL              0.013089959
## 3                       0.10943717    AR              0.076927426
## 4                       0.07268094    AZ              0.015651011
## 5                       0.08591360    CA              0.035599848
## 6                       0.07360250    CO              0.041312882
## 7                       0.04736281    CT              0.106595508
## 8                              NaN    DC                      NaN
## 9                       0.10943717    DE              0.151171167
## 10                      0.06200830    FL              0.025222913
## 11                      0.05251779    GA              0.017530641
## 12                      0.08470994    HI              0.170804909
## 13                      0.03577922    IA              0.010918574
## 14                      0.14181912    ID              0.045987462
## 15                      0.11586778    IL              0.042665302
## 16                      0.05122981    IN              0.046559897
## 17                      0.08019574    KS              0.003789126
## 18                      0.09570356    KY              0.001149952
## 19                      0.10251811    LA              0.032456619
## 20                      0.09744975    MA              0.055151370
## 21                      0.10002752    MD              0.055938850
## 22                      0.09802204    ME              0.024387626
## 23                      0.04792333    MI              0.061398796
## 24                      0.08461277    MN              0.002906572
## 25                      0.11586778    MO              0.085353130
## 26                      0.05153505    MS              0.014887566
## 27                      0.10943717    MT              0.013095747
## 28                      0.04930913    NC              0.017123110
## 29                      0.06945050    ND              0.033251953
## 30                      0.12836678    NE              0.038066925
## 31                      0.07112367    NH              0.032814763
## 32                      0.05559386    NJ              0.062737113
## 33                      0.08179560    NM              0.043480983
## 34                      0.04237938    NV              0.078235197
## 35                      0.07803962    NY              0.034261101
## 36                      0.06671801    OH              0.023274041
## 37                      0.12836678    OK              0.118426992
## 38                      0.04073904    OR              0.041647777
## 39                      0.03809870    PA              0.014187773
## 40                      0.08470994    RI              0.082849025
## 41                      0.12836678    SC              0.007420472
## 42                      0.12046562    SD              0.008535020
## 43                      0.08846334    TN              0.007607819
## 44                      0.05817537    TX              0.002681790
## 45                      0.19083359    UT              0.011773772
## 46                      0.03193280    VA              0.032575425
## 47                      0.22521822    VT              0.062261753
## 48                      0.04287929    WA              0.016455242
## 49                      0.03876422    WI              0.018752184
## 50                      0.35545965    WV              0.038528062
## 51                      0.12836678    WY              0.127596414
##    Total.Average.Error
## 1          0.072624030
## 2          0.013089959
## 3          0.076927426
## 4          0.015651011
## 5          0.035599848
## 6          0.041312882
## 7          0.106595508
## 8                  NaN
## 9          0.151171167
## 10         0.025222913
## 11         0.017530641
## 12         0.170804909
## 13         0.010918574
## 14         0.045987462
## 15         0.042665302
## 16         0.046559897
## 17         0.003789126
## 18         0.001149952
## 19         0.032456619
## 20         0.055151370
## 21         0.055938850
## 22         0.024387626
## 23         0.061398796
## 24         0.002906572
## 25         0.085353130
## 26         0.014887566
## 27         0.013095747
## 28         0.017123110
## 29         0.033251953
## 30         0.038066925
## 31         0.032814763
## 32         0.062737113
## 33         0.043480983
## 34         0.078235197
## 35         0.034261101
## 36         0.023274041
## 37         0.118426992
## 38         0.041647777
## 39         0.014187773
## 40         0.082849025
## 41         0.007420472
## 42         0.008535020
## 43         0.007607819
## 44         0.002681790
## 45         0.011773772
## 46         0.032575425
## 47         0.062261753
## 48         0.016455242
## 49         0.018752184
## 50         0.038528062
## 51         0.127596414
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012))}
\end{alltt}
\begin{verbatim}
##    polls2012ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.09797803    AK              0.034304070
## 2                       0.09797803    AL              0.073313450
## 3                       0.09733975    AR              0.148290220
## 4                       0.05866686    AZ              0.015747922
## 5                       0.08934677    CA              0.012432392
## 6                       0.04271483    CO              0.016026114
## 7                       0.10005184    CT              0.041022468
## 8                              NaN    DC                      NaN
## 9                       0.09733975    DE              0.067723382
## 10                      0.05011792    FL              0.006783233
## 11                      0.05868290    GA              0.006760364
## 12                      0.14504932    HI              0.157651657
## 13                      0.05860787    IA              0.014111738
## 14                      0.09797803    ID              0.125365033
## 15                      0.12637058    IL              0.025509264
## 16                      0.09098673    IN              0.002424055
## 17                      0.26969580    KS              0.038201815
## 18                      0.09733975    KY              0.142173891
## 19                      0.09733975    LA              0.114214423
## 20                      0.05856482    MA              0.023741150
## 21                      0.09733975    MD              0.106471091
## 22                      0.14613488    ME              0.013894383
## 23                      0.05992599    MI              0.024732556
## 24                      0.14504932    MN              0.019974564
## 25                      0.05204456    MO              0.033909381
## 26                      0.09797803    MS              0.019170157
## 27                      0.07416785    MT              0.027636102
## 28                      0.03517242    NC              0.005670225
## 29                      0.07243640    ND              0.016430167
## 30                      0.06178417    NE              0.041091150
## 31                      0.08363095    NH              0.048884587
## 32                      0.06192677    NJ              0.024491839
## 33                      0.09733975    NM              0.026205880
## 34                      0.06069872    NV              0.021460934
## 35                      0.05862345    NY              0.020254080
## 36                      0.05565321    OH              0.006107737
## 37                      0.09797803    OK              0.128874362
## 38                      0.05447012    OR              0.011472194
## 39                      0.03088061    PA              0.009794725
## 40                      0.05277192    RI              0.045644133
## 41                      0.09797803    SC              0.014233712
## 42                      0.09733975    SD              0.118931158
## 43                      0.09733975    TN              0.130256882
## 44                      0.06917378    TX              0.041912990
## 45                      0.12414604    UT              0.048778588
## 46                      0.04904171    VA              0.014202634
## 47                      0.33409108    VT              0.047055855
## 48                      0.03560112    WA              0.011359459
## 49                      0.03493135    WI              0.015456918
## 50                      0.16153850    WV              0.074282084
## 51                      0.09797803    WY              0.172757505
##    Total.Average.Error
## 1          0.034304070
## 2          0.073313450
## 3          0.148290220
## 4          0.015747922
## 5          0.012432392
## 6          0.016026114
## 7          0.041022468
## 8                  NaN
## 9          0.067723382
## 10         0.006783233
## 11         0.006760364
## 12         0.157651657
## 13         0.014111738
## 14         0.125365033
## 15         0.025509264
## 16         0.002424055
## 17         0.038201815
## 18         0.142173891
## 19         0.114214423
## 20         0.023741150
## 21         0.106471091
## 22         0.013894383
## 23         0.024732556
## 24         0.019974564
## 25         0.033909381
## 26         0.019170157
## 27         0.027636102
## 28         0.005670225
## 29         0.016430167
## 30         0.041091150
## 31         0.048884587
## 32         0.024491839
## 33         0.026205880
## 34         0.021460934
## 35         0.020254080
## 36         0.006107737
## 37         0.128874362
## 38         0.011472194
## 39         0.009794725
## 40         0.045644133
## 41         0.014233712
## 42         0.118931158
## 43         0.130256882
## 44         0.041912990
## 45         0.048778588
## 46         0.014202634
## 47         0.047055855
## 48         0.011359459
## 49         0.015456918
## 50         0.074282084
## 51         0.172757505
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016))}
\end{alltt}
\begin{verbatim}
##    polls2016ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.11402627    AK             7.141087e-03
## 2                       0.18697786    AL             4.547027e-02
## 3                       0.23950937    AR             1.182252e-01
## 4                       0.07799213    AZ             2.428002e-02
## 5                       0.07671686    CA             1.970603e-02
## 6                       0.07160877    CO             2.372034e-02
## 7                       0.05797204    CT             8.446450e-03
## 8                       0.08003526    DC             3.495244e-01
## 9                       0.15498558    DE             3.028856e-02
## 10                      0.05539067    FL             1.408567e-02
## 11                      0.03910333    GA             2.463458e-02
## 12                      0.20671483    HI             3.208053e-02
## 13                      0.05619882    IA             9.043580e-02
## 14                      0.11430978    ID             6.241982e-02
## 15                      0.04662443    IL             1.616200e-03
## 16                      0.08066602    IN             1.160850e-01
## 17                      0.14405616    KS             6.063706e-02
## 18                      0.37216415    KY             6.634081e-02
## 19                      0.05619882    LA             1.415171e-01
## 20                      0.08003526    MA             3.908532e-02
## 21                      0.11191142    MD             1.730838e-02
## 22                      0.04885735    ME             4.170092e-02
## 23                      0.06182855    MI             3.065529e-02
## 24                      0.14511249    MN             2.442482e-02
## 25                      0.03951922    MO             1.148300e-01
## 26                      0.13809845    MS             5.512714e-02
## 27                      0.05414625    MT             1.040467e-01
## 28                      0.06750777    NC             2.685887e-02
## 29                      0.16054594    ND             6.339081e-02
## 30                      0.05315193    NE             6.658166e-02
## 31                      0.05474323    NH             3.834638e-02
## 32                      0.05202577    NJ             2.257882e-02
## 33                      0.04425947    NM             1.294189e-02
## 34                      0.04469449    NV             8.870338e-03
## 35                      0.07702433    NY             7.695250e-04
## 36                      0.04284452    OH             5.732568e-02
## 37                      0.18697786    OK             9.477621e-02
## 38                      0.10892396    OR             1.100319e-02
## 39                      0.04043747    PA             4.111987e-02
## 40                      0.13692778    RI             1.210768e-02
## 41                      0.05221368    SC             5.637233e-02
## 42                      0.08066602    SD             1.746305e-01
## 43                      0.08066602    TN             1.511553e-01
## 44                      0.08066602    TX             6.204414e-02
## 45                      0.08025813    UT             5.625495e-02
## 46                      0.07019932    VA             3.188843e-02
## 47                      0.14515005    VT             2.631946e-05
## 48                      0.08470703    WA             4.503274e-03
## 49                      0.04901915    WI             6.031459e-02
## 50                      0.15498558    WV             3.118853e-01
## 51                      0.18697786    WY             1.587820e-01
##    Total.Average.Error
## 1         7.141087e-03
## 2         4.547027e-02
## 3         1.182252e-01
## 4         2.428002e-02
## 5         1.970603e-02
## 6         2.372034e-02
## 7         8.446450e-03
## 8         3.495244e-01
## 9         3.028856e-02
## 10        1.408567e-02
## 11        2.463458e-02
## 12        3.208053e-02
## 13        9.043580e-02
## 14        6.241982e-02
## 15        1.616200e-03
## 16        1.160850e-01
## 17        6.063706e-02
## 18        6.634081e-02
## 19        1.415171e-01
## 20        3.908532e-02
## 21        1.730838e-02
## 22        4.170092e-02
## 23        3.065529e-02
## 24        2.442482e-02
## 25        1.148300e-01
## 26        5.512714e-02
## 27        1.040467e-01
## 28        2.685887e-02
## 29        6.339081e-02
## 30        6.658166e-02
## 31        3.834638e-02
## 32        2.257882e-02
## 33        1.294189e-02
## 34        8.870338e-03
## 35        7.695250e-04
## 36        5.732568e-02
## 37        9.477621e-02
## 38        1.100319e-02
## 39        4.111987e-02
## 40        1.210768e-02
## 41        5.637233e-02
## 42        1.746305e-01
## 43        1.511553e-01
## 44        6.204414e-02
## 45        5.625495e-02
## 46        3.188843e-02
## 47        2.631946e-05
## 48        4.503274e-03
## 49        6.031459e-02
## 50        3.118853e-01
## 51        1.587820e-01
\end{verbatim}
\end{kframe}
\end{knitrout}



\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldata,} \hlnum{56} \hlopt{<}  \hlstd{polldata}\hlopt{$}\hlstd{EndDaysUntil)}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, polldata}\hlopt{$}\hlstd{EndDaysUntil} \hlopt{<} \hlnum{100}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2008"}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlstd{polls2008temp[}\hlkwd{complete.cases}\hlstd{(polls2008temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2008"}\hlstd{,} \hlstr{"McCain"}\hlstd{,} \hlstr{"observations"}\hlstd{,}\hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2012temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2012"}\hlstd{)}
\hlstd{polls2012temp} \hlkwb{=} \hlstd{polls2012temp[}\hlkwd{complete.cases}\hlstd{(polls2012temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2012"}\hlstd{,} \hlstr{"Romney"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2016temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2016"}\hlstd{)}
\hlstd{polls2016temp} \hlkwb{=} \hlstd{polls2016temp[}\hlkwd{complete.cases}\hlstd{(polls2016temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Trump"}\hlstd{,} \hlstr{"Clinton"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2008ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2008temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{9}\hlstd{,} \hlnum{10}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[,} \hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,}\hlnum{4}\hlopt{:}\hlnum{5}\hlstd{) ],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2012ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2012temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{34}\hlstd{,} \hlnum{35}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{35}\hlstd{,}  \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,}\hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{5}\hlopt{:}\hlnum{6}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2016ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2016temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{44}\hlstd{,} \hlnum{45}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{45}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}\hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{6}\hlopt{:}\hlnum{7}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{error2008ra_8W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2008ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning in ae\_by\_state(polls2008ratemp[, 1:2], results2008[-8, ]): Predicted names do not match names of actual data}}

{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in ae\_by\_state(polls2008ratemp[, 1:2], results2008[-8, ]): Incompatiable dimensions of predicted and actual}}\begin{alltt}
\hlstd{error2012ra_8W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2016ra_8W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlkwd{mean}\hlstd{(error2008ra_8W[,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in mean(error2008ra\_8W[, 2]): object 'error2008ra\_8W' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_8W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.04911454
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_8W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.04652536
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2008ra_8W[error2008ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in mean(error2008ra\_8W[error2008ra[, 1] \%in\% comp2008, 2]): object 'error2008ra\_8W' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_8W[error2012ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2012ra[, 1] \%in\% comp2012: object 'error2012ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_8W[error2016ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2016ra[, 1] \%in\% comp2016: object 'error2016ra' not found}}\begin{alltt}
\hlstd{cicoverage2008_8W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\end{alltt}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning in polls2008ratemp\$Margin.of.Error > ae\_by\_state(polls2008ratemp[-8, : longer object length is not a multiple of shorter object length}}\begin{alltt}
\hlstd{cicoverage2012_8W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012)[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{51}
\hlstd{cicoverage2016_8W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016)[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{51}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_8W, cicoverage2012_8W, cicoverage2016_8W))}
\end{alltt}
\begin{verbatim}
## [1] NA
\end{verbatim}
\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_8W, cicoverage2012_8W, cicoverage2016_8W)}
\end{alltt}
\begin{verbatim}
## [1]        NA        NA 0.8039216
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008))}
\end{alltt}
\begin{verbatim}
##    polls2008ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.03795067    AK              0.076124372
## 2                       0.07983666    AL              0.013084000
## 3                       0.14616041    AR              0.009141582
## 4                       0.07683128    AZ              0.015728067
## 5                       0.08611976    CA              0.036646968
## 6                       0.04366050    CO              0.035667202
## 7                       0.05511060    CT              0.114579753
## 8                              NaN    DC                      NaN
## 9                       0.12123612    DE              0.150117639
## 10                      0.03816488    FL              0.029153690
## 11                      0.04563319    GA              0.013182400
## 12                      0.08490205    HI              0.179925199
## 13                      0.03860679    IA              0.005655352
## 14                      0.12070190    ID              0.085177812
## 15                      0.10339316    IL              0.046079129
## 16                      0.06420262    IN              0.022025088
## 17                      0.07904563    KS              0.003118367
## 18                      0.13185650    KY              0.035742667
## 19                      0.07093851    LA              0.026685916
## 20                      0.09918224    MA              0.055649644
## 21                      0.08857497    MD              0.057533420
## 22                      0.10352939    ME              0.017613674
## 23                      0.04581132    MI              0.066036170
## 24                      0.08300534    MN              0.000951846
## 25                      0.10819013    MO              0.035217906
## 26                      0.12123612    MS              0.042683058
## 27                      0.07536480    MT              0.013681705
## 28                      0.08028110    NC              0.020784940
## 29                      0.12123612    ND              0.020350311
## 30                      0.12067730    NE              0.001375037
## 31                      0.10685414    NH              0.049402476
## 32                      0.06277225    NJ              0.046249603
## 33                      0.08715805    NM              0.051001177
## 34                      0.05091882    NV              0.073838183
## 35                      0.07105575    NY              0.085362819
## 36                      0.06996527    OH              0.018531337
## 37                      0.19816013    OK              0.013506269
## 38                      0.05323045    OR              0.034157109
## 39                      0.03928416    PA              0.019409879
## 40                      0.12433501    RI              0.040380190
## 41                      0.07018835    SC              0.010340370
## 42                      0.09833593    SD              0.002231995
## 43                      0.09130817    TN              0.009584090
## 44                      0.12123612    TX              0.035623115
## 45                      0.12070190    UT              0.100195528
## 46                      0.02911840    VA              0.036181263
## 47                      0.23548938    VT              0.059361087
## 48                      0.06276677    WA              0.044959672
## 49                      0.05010625    WI              0.042811163
## 50                      0.20260224    WV              0.034013530
## 51                      0.23737019    WY              0.056574575
##    Total.Average.Error
## 1          0.076124372
## 2          0.013084000
## 3          0.009141582
## 4          0.015728067
## 5          0.036646968
## 6          0.035667202
## 7          0.114579753
## 8                  NaN
## 9          0.150117639
## 10         0.029153690
## 11         0.013182400
## 12         0.179925199
## 13         0.005655352
## 14         0.085177812
## 15         0.046079129
## 16         0.022025088
## 17         0.003118367
## 18         0.035742667
## 19         0.026685916
## 20         0.055649644
## 21         0.057533420
## 22         0.017613674
## 23         0.066036170
## 24         0.000951846
## 25         0.035217906
## 26         0.042683058
## 27         0.013681705
## 28         0.020784940
## 29         0.020350311
## 30         0.001375037
## 31         0.049402476
## 32         0.046249603
## 33         0.051001177
## 34         0.073838183
## 35         0.085362819
## 36         0.018531337
## 37         0.013506269
## 38         0.034157109
## 39         0.019409879
## 40         0.040380190
## 41         0.010340370
## 42         0.002231995
## 43         0.009584090
## 44         0.035623115
## 45         0.100195528
## 46         0.036181263
## 47         0.059361087
## 48         0.044959672
## 49         0.042811163
## 50         0.034013530
## 51         0.056574575
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012))}
\end{alltt}
\begin{verbatim}
##    polls2012ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.09135462    AK             0.0402871652
## 2                       0.09135462    AL             0.0792965457
## 3                       0.10005770    AR             0.1429741687
## 4                       0.05727066    AZ             0.0115920305
## 5                       0.25420857    CA             0.0337739393
## 6                       0.04399779    CO             0.0140175821
## 7                       0.10005770    CT             0.0662956596
## 8                              NaN    DC                      NaN
## 9                       0.10005770    DE             0.0730394340
## 10                      0.03514312    FL             0.0039601237
## 11                      0.07492103    GA             0.0247941920
## 12                      0.11683632    HI             0.1363337697
## 13                      0.06786976    IA             0.0133301211
## 14                      0.09135462    ID             0.1313481288
## 15                      0.07427321    IL             0.0215538996
## 16                      0.09182669    IN             0.0005074022
## 17                      0.29063890    KS             0.0384472198
## 18                      0.10005770    KY             0.1368578391
## 19                      0.10005770    LA             0.1088983713
## 20                      0.05468612    MA             0.0312391056
## 21                      0.10005770    MD             0.1117871427
## 22                      0.09492964    ME             0.0126895661
## 23                      0.06078005    MI             0.0319890509
## 24                      0.07477115    MN             0.0240613100
## 25                      0.05046572    MO             0.0399228619
## 26                      0.09135462    MS             0.0251532524
## 27                      0.07103596    MT             0.0273687344
## 28                      0.04333599    NC             0.0001109439
## 29                      0.18875784    ND             0.0219267253
## 30                      0.06732337    NE             0.0415840403
## 31                      0.08026780    NH             0.0238329884
## 32                      0.06494283    NJ             0.0246658170
## 33                      0.06457302    NM             0.0140821049
## 34                      0.04520841    NV             0.0187839637
## 35                      0.04854487    NY             0.0186918935
## 36                      0.03683917    OH             0.0051654813
## 37                      0.09135462    OK             0.1348574578
## 38                      0.06640383    OR             0.0061568562
## 39                      0.03743592    PA             0.0046268537
## 40                      0.03989754    RI             0.0521150098
## 41                      0.08632924    SC             0.0318897953
## 42                      0.14467741    SD             0.0543931648
## 43                      0.12521871    TN             0.0686506299
## 44                      0.09762015    TX             0.0317614466
## 45                      0.12708888    UT             0.0483929103
## 46                      0.05155601    VA             0.0162880736
## 47                      0.28427855    VT             0.0395886647
## 48                      0.11683632    WA             0.0044217326
## 49                      0.03461830    WI             0.0160336372
## 50                      0.11683632    WV             0.2174476916
## 51                      0.09135462    WY             0.1787406005
##    Total.Average.Error
## 1         0.0402871652
## 2         0.0792965457
## 3         0.1429741687
## 4         0.0115920305
## 5         0.0337739393
## 6         0.0140175821
## 7         0.0662956596
## 8                  NaN
## 9         0.0730394340
## 10        0.0039601237
## 11        0.0247941920
## 12        0.1363337697
## 13        0.0133301211
## 14        0.1313481288
## 15        0.0215538996
## 16        0.0005074022
## 17        0.0384472198
## 18        0.1368578391
## 19        0.1088983713
## 20        0.0312391056
## 21        0.1117871427
## 22        0.0126895661
## 23        0.0319890509
## 24        0.0240613100
## 25        0.0399228619
## 26        0.0251532524
## 27        0.0273687344
## 28        0.0001109439
## 29        0.0219267253
## 30        0.0415840403
## 31        0.0238329884
## 32        0.0246658170
## 33        0.0140821049
## 34        0.0187839637
## 35        0.0186918935
## 36        0.0051654813
## 37        0.1348574578
## 38        0.0061568562
## 39        0.0046268537
## 40        0.0521150098
## 41        0.0318897953
## 42        0.0543931648
## 43        0.0686506299
## 44        0.0317614466
## 45        0.0483929103
## 46        0.0162880736
## 47        0.0395886647
## 48        0.0044217326
## 49        0.0160336372
## 50        0.2174476916
## 51        0.1787406005
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016))}
\end{alltt}
\begin{verbatim}
##    polls2016ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.05018903    AK              0.024004920
## 2                       0.07214022    AL              0.028246707
## 3                       0.18179815    AR              0.223216216
## 4                       0.02993990    AZ              0.012653662
## 5                       0.07685708    CA              0.030346829
## 6                       0.07488450    CO              0.022522634
## 7                       0.04825993    CT              0.013826971
## 8                       0.09074011    DC              0.337945977
## 9                       0.03644809    DE              0.013911091
## 10                      0.03906832    FL              0.012196730
## 11                      0.03092414    GA              0.014529712
## 12                      0.23851862    HI              0.030173423
## 13                      0.05238842    IA              0.052201924
## 14                      0.04014558    ID              0.114219537
## 15                      0.08281099    IL              0.016613112
## 16                      0.14363063    IN              0.037101427
## 17                      0.04014558    KS              0.042232474
## 18                      0.08622260    KY              0.157650154
## 19                      0.12262028    LA              0.048926252
## 20                      0.09896219    MA              0.004342626
## 21                      0.11025879    MD              0.022444092
## 22                      0.06753218    ME              0.035251295
## 23                      0.04323779    MI              0.027048216
## 24                      0.08274523    MN              0.029367033
## 25                      0.03412855    MO              0.111251192
## 26                      0.14765844    MS              0.053950445
## 27                      0.03683753    MT              0.100793124
## 28                      0.05018721    NC              0.035860887
## 29                      0.13833560    ND              0.054754024
## 30                      0.04450531    NE              0.069339996
## 31                      0.08301051    NH              0.018260783
## 32                      0.08369346    NJ              0.008681408
## 33                      0.05288881    NM              0.010933882
## 34                      0.08622260    NV              0.011993231
## 35                      0.08703610    NY              0.002718107
## 36                      0.06027327    OH              0.039716937
## 37                      0.07315282    OK              0.058334244
## 38                      0.10326629    OR              0.005855327
## 39                      0.03800988    PA              0.036966097
## 40                      0.17018296    RI              0.007112371
## 41                      0.05107733    SC              0.049880278
## 42                      0.08622260    SD              0.160662444
## 43                      0.14287600    TN              0.058436638
## 44                      0.05639272    TX              0.019613856
## 45                      0.07940183    UT              0.055990485
## 46                      0.06962438    VA              0.023558085
## 47                      0.15701099    VT              0.003294695
## 48                      0.08579886    WA              0.002122982
## 49                      0.05764693    WI              0.039416573
## 50                      0.23410027    WV              0.120262072
## 51                      0.12313241    WY              0.153481049
##    Total.Average.Error
## 1          0.024004920
## 2          0.028246707
## 3          0.223216216
## 4          0.012653662
## 5          0.030346829
## 6          0.022522634
## 7          0.013826971
## 8          0.337945977
## 9          0.013911091
## 10         0.012196730
## 11         0.014529712
## 12         0.030173423
## 13         0.052201924
## 14         0.114219537
## 15         0.016613112
## 16         0.037101427
## 17         0.042232474
## 18         0.157650154
## 19         0.048926252
## 20         0.004342626
## 21         0.022444092
## 22         0.035251295
## 23         0.027048216
## 24         0.029367033
## 25         0.111251192
## 26         0.053950445
## 27         0.100793124
## 28         0.035860887
## 29         0.054754024
## 30         0.069339996
## 31         0.018260783
## 32         0.008681408
## 33         0.010933882
## 34         0.011993231
## 35         0.002718107
## 36         0.039716937
## 37         0.058334244
## 38         0.005855327
## 39         0.036966097
## 40         0.007112371
## 41         0.049880278
## 42         0.160662444
## 43         0.058436638
## 44         0.019613856
## 45         0.055990485
## 46         0.023558085
## 47         0.003294695
## 48         0.002122982
## 49         0.039416573
## 50         0.120262072
## 51         0.153481049
\end{verbatim}
\end{kframe}
\end{knitrout}


7 weeks to go
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldata,} \hlnum{49} \hlopt{<}  \hlstd{polldata}\hlopt{$}\hlstd{EndDaysUntil)}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, polldata}\hlopt{$}\hlstd{EndDaysUntil} \hlopt{<} \hlnum{100}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2008"}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlstd{polls2008temp[}\hlkwd{complete.cases}\hlstd{(polls2008temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2008"}\hlstd{,} \hlstr{"McCain"}\hlstd{,} \hlstr{"observations"}\hlstd{,}\hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2012temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2012"}\hlstd{)}
\hlstd{polls2012temp} \hlkwb{=} \hlstd{polls2012temp[}\hlkwd{complete.cases}\hlstd{(polls2012temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2012"}\hlstd{,} \hlstr{"Romney"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2016temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2016"}\hlstd{)}
\hlstd{polls2016temp} \hlkwb{=} \hlstd{polls2016temp[}\hlkwd{complete.cases}\hlstd{(polls2016temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Trump"}\hlstd{,} \hlstr{"Clinton"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2008ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2008temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{9}\hlstd{,} \hlnum{10}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[,} \hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,}\hlnum{4}\hlopt{:}\hlnum{5}\hlstd{) ],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2012ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2012temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{34}\hlstd{,} \hlnum{35}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{35}\hlstd{,}  \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,}\hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{5}\hlopt{:}\hlnum{6}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2016ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2016temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{44}\hlstd{,} \hlnum{45}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{45}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}\hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{6}\hlopt{:}\hlnum{7}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{error2008ra_7W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2012ra_7W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2016ra_7W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlkwd{mean}\hlstd{(error2008ra_7W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.03545952
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_7W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.04898713
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_7W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.04333466
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2008ra_7W[error2008ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2008ra[, 1] \%in\% comp2008: object 'error2008ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_7W[error2012ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2012ra[, 1] \%in\% comp2012: object 'error2012ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_7W[error2016ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2016ra[, 1] \%in\% comp2016: object 'error2016ra' not found}}\begin{alltt}
\hlstd{cicoverage2008_7W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlstd{cicoverage2012_7W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlstd{cicoverage2016_7W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_7W, cicoverage2012_7W, cicoverage2016_7W))}
\end{alltt}
\begin{verbatim}
## [1] 0.88
\end{verbatim}
\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_7W, cicoverage2012_7W, cicoverage2016_7W)}
\end{alltt}
\begin{verbatim}
## [1] 0.90 0.84 0.90
\end{verbatim}
\begin{alltt}
\hlstd{cicoverage2008_7Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2008)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2008ratemp[, 1] \%in\% comp2008: object 'comp2008' not found}}\begin{alltt}
\hlstd{cicoverage2012_7Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2012)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2012ratemp[, 1] \%in\% comp2012: object 'comp2012' not found}}\begin{alltt}
\hlstd{cicoverage2016_7Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2016)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2016ratemp[, 1] \%in\% comp2016: object 'comp2016' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_7Wcomp, cicoverage2012_7Wcomp, cicoverage2016_7Wcomp))}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in mean(c(cicoverage2008\_7Wcomp, cicoverage2012\_7Wcomp, cicoverage2016\_7Wcomp)): object 'cicoverage2008\_7Wcomp' not found}}\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_7Wcomp, cicoverage2012_7Wcomp, cicoverage2016_7Wcomp)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): object 'cicoverage2008\_7Wcomp' not found}}\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008))}
\end{alltt}
\begin{verbatim}
##    polls2008ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.04741151    AK              0.075761769
## 2                       0.07801646    AL              0.012302837
## 3                       0.14135560    AR              0.017815883
## 4                       0.07104507    AZ              0.015701677
## 5                       0.08154119    CA              0.033660207
## 6                       0.04737812    CO              0.040006253
## 7                       0.07158533    CT              0.104312450
## 8                              NaN    DC                      NaN
## 9                       0.13877929    DE              0.090943821
## 10                      0.05274373    FL              0.041645362
## 11                      0.07468923    GA              0.026519191
## 12                      0.26669280    HI              0.098422538
## 13                      0.04126382    IA              0.002275702
## 14                      0.17976047    ID              0.003076608
## 15                      0.09585132    IL              0.026703916
## 16                      0.06356746    IN              0.021961143
## 17                      0.10101245    KS              0.007533169
## 18                      0.09020902    KY              0.006493866
## 19                      0.07020388    LA              0.024233046
## 20                      0.09491529    MA              0.054832417
## 21                      0.08648105    MD              0.056634271
## 22                      0.09283873    ME              0.019096957
## 23                      0.05006943    MI              0.072088337
## 24                      0.06675172    MN              0.001399040
## 25                      0.07426746    MO              0.012336389
## 26                      0.04666760    MS              0.011883514
## 27                      0.07503191    MT              0.011932334
## 28                      0.05805690    NC              0.025734720
## 29                      0.11455043    ND              0.014646229
## 30                      0.11367169    NE              0.003924826
## 31                      0.08047538    NH              0.048457394
## 32                      0.06562679    NJ              0.043916972
## 33                      0.13204072    NM              0.088524007
## 34                      0.04892060    NV              0.083153853
## 35                      0.05506961    NY              0.048249681
## 36                      0.04733108    OH              0.033577682
## 37                      0.15488884    OK              0.001980713
## 38                      0.05220460    OR              0.039664064
## 39                      0.03427607    PA              0.013172043
## 40                      0.08109688    RI              0.087124893
## 41                      0.10792010    SC              0.012590812
## 42                      0.09200384    SD              0.010978634
## 43                      0.10495924    TN              0.001677260
## 44                      0.05748051    TX              0.003050931
## 45                      0.14384728    UT              0.012221342
## 46                      0.05903565    VA              0.043487238
## 47                      0.12306006    VT              0.071563390
## 48                      0.04941523    WA              0.036080625
## 49                      0.05424493    WI              0.027836693
## 50                      0.21145485    WV              0.034326113
## 51                      0.14861657    WY              0.097463208
##    Total.Average.Error
## 1          0.075761769
## 2          0.012302837
## 3          0.017815883
## 4          0.015701677
## 5          0.033660207
## 6          0.040006253
## 7          0.104312450
## 8                  NaN
## 9          0.090943821
## 10         0.041645362
## 11         0.026519191
## 12         0.098422538
## 13         0.002275702
## 14         0.003076608
## 15         0.026703916
## 16         0.021961143
## 17         0.007533169
## 18         0.006493866
## 19         0.024233046
## 20         0.054832417
## 21         0.056634271
## 22         0.019096957
## 23         0.072088337
## 24         0.001399040
## 25         0.012336389
## 26         0.011883514
## 27         0.011932334
## 28         0.025734720
## 29         0.014646229
## 30         0.003924826
## 31         0.048457394
## 32         0.043916972
## 33         0.088524007
## 34         0.083153853
## 35         0.048249681
## 36         0.033577682
## 37         0.001980713
## 38         0.039664064
## 39         0.013172043
## 40         0.087124893
## 41         0.012590812
## 42         0.010978634
## 43         0.001677260
## 44         0.003050931
## 45         0.012221342
## 46         0.043487238
## 47         0.071563390
## 48         0.036080625
## 49         0.027836693
## 50         0.034326113
## 51         0.097463208
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012))}
\end{alltt}
\begin{verbatim}
##    polls2012ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.07648562    AK             0.0683680342
## 2                       0.07648562    AL             0.1073774148
## 3                       0.40305110    AR             0.0499708989
## 4                       0.06064884    AZ             0.0262078599
## 5                       0.06430739    CA             0.0160614436
## 6                       0.05972772    CO             0.0082901716
## 7                       0.07220927    CT             0.0202950074
## 8                              NaN    DC                      NaN
## 9                       0.11216336    DE             0.0616667678
## 10                      0.03589675    FL             0.0036394470
## 11                      0.07222094    GA             0.0231955015
## 12                      0.14044189    HI             0.1685614824
## 13                      0.05239988    IA             0.0171018677
## 14                      0.07648562    ID             0.1594289979
## 15                      0.14044189    IL             0.0372982313
## 16                      0.09088764    IN             0.0083922107
## 17                      0.29440515    KS             0.0396640777
## 18                      0.23438022    KY             0.0858778805
## 19                      0.11216336    LA             0.1202710376
## 20                      0.06790979    MA             0.0159086715
## 21                      0.21302395    MD             0.0421134601
## 22                      0.08074209    ME             0.0066942709
## 23                      0.05514630    MI             0.0146786803
## 24                      0.04173797    MN             0.0173062378
## 25                      0.09362837    MO             0.0140582269
## 26                      0.07648562    MS             0.0532341214
## 27                      0.11216336    MT             0.1031451001
## 28                      0.04394898    NC             0.0021714630
## 29                      0.07648562    ND             0.0963272123
## 30                      0.07648562    NE             0.1065090321
## 31                      0.05758774    NH             0.0203842919
## 32                      0.06174154    NJ             0.0219413896
## 33                      0.06101621    NM             0.0117241864
## 34                      0.07222094    NV             0.0504464111
## 35                      0.08694506    NY             0.0257525952
## 36                      0.03473263    OH             0.0001486193
## 37                      0.07648562    OK             0.1629383269
## 38                      0.14044189    OR             0.0142346692
## 39                      0.03361350    PA             0.0111138778
## 40                      0.05920623    RI             0.0391435885
## 41                      0.08254731    SC             0.0382990753
## 42                      0.16062678    SD             0.0578663368
## 43                      0.11314552    TN             0.0691865898
## 44                      0.08102661    TX             0.0250973630
## 45                      0.12703547    UT             0.0490479149
## 46                      0.03424921    VA             0.0010930990
## 47                      0.36056981    VT             0.0517552560
## 48                      0.04385568    WA             0.0082277789
## 49                      0.04020194    WI             0.0184569191
## 50                      0.15265609    WV             0.0718619696
## 51                      0.07648562    WY             0.2068214695
##    Total.Average.Error
## 1         0.0683680342
## 2         0.1073774148
## 3         0.0499708989
## 4         0.0262078599
## 5         0.0160614436
## 6         0.0082901716
## 7         0.0202950074
## 8                  NaN
## 9         0.0616667678
## 10        0.0036394470
## 11        0.0231955015
## 12        0.1685614824
## 13        0.0171018677
## 14        0.1594289979
## 15        0.0372982313
## 16        0.0083922107
## 17        0.0396640777
## 18        0.0858778805
## 19        0.1202710376
## 20        0.0159086715
## 21        0.0421134601
## 22        0.0066942709
## 23        0.0146786803
## 24        0.0173062378
## 25        0.0140582269
## 26        0.0532341214
## 27        0.1031451001
## 28        0.0021714630
## 29        0.0963272123
## 30        0.1065090321
## 31        0.0203842919
## 32        0.0219413896
## 33        0.0117241864
## 34        0.0504464111
## 35        0.0257525952
## 36        0.0001486193
## 37        0.1629383269
## 38        0.0142346692
## 39        0.0111138778
## 40        0.0391435885
## 41        0.0382990753
## 42        0.0578663368
## 43        0.0691865898
## 44        0.0250973630
## 45        0.0490479149
## 46        0.0010930990
## 47        0.0517552560
## 48        0.0082277789
## 49        0.0184569191
## 50        0.0718619696
## 51        0.2068214695
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016))}
\end{alltt}
\begin{verbatim}
##    polls2016ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.04756319    AK              0.026429742
## 2                       0.08473851    AL              0.036481096
## 3                       0.14662364    AR              0.105103224
## 4                       0.05010176    AZ              0.001746707
## 5                       0.09581028    CA              0.026553318
## 6                       0.07991729    CO              0.010264324
## 7                       0.03273677    CT              0.017174629
## 8                       0.08685852    DC              0.340108628
## 9                       0.04607148    DE              0.006927962
## 10                      0.04985097    FL              0.008738144
## 11                      0.03861804    GA              0.020476182
## 12                      0.17972385    HI              0.121720395
## 13                      0.04928879    IA              0.045646730
## 14                      0.11631919    ID              0.064279584
## 15                      0.05270649    IL              0.004535891
## 16                      0.09811435    IN              0.034840847
## 17                      0.14254753    KS              0.060354797
## 18                      0.20401068    KY              0.085672631
## 19                      0.14272733    LA              0.044110248
## 20                      0.13405745    MA              0.002559183
## 21                      0.17972385    MD              0.087469517
## 22                      0.05702548    ME              0.013949948
## 23                      0.03335203    MI              0.015257176
## 24                      0.06932907    MN              0.024001385
## 25                      0.02456237    MO              0.112435423
## 26                      0.13633963    MS              0.041385008
## 27                      0.06943184    MT              0.083415040
## 28                      0.07168933    NC              0.020869518
## 29                      0.12833838    ND              0.071385183
## 30                      0.07885907    NE              0.055791402
## 31                      0.05034281    NH              0.029732190
## 32                      0.08420201    NJ              0.011492080
## 33                      0.05759689    NM              0.010364872
## 34                      0.03896670    NV              0.010203507
## 35                      0.07707023    NY              0.001407501
## 36                      0.05520579    OH              0.042017569
## 37                      0.07013890    OK              0.070296210
## 38                      0.08917393    OR              0.035211278
## 39                      0.04077852    PA              0.039132016
## 40                      0.16251117    RI              0.008354467
## 41                      0.05797707    SC              0.045038319
## 42                      0.08898537    SD              0.157405538
## 43                      0.08898537    TN              0.133930387
## 44                      0.06214227    TX              0.018738275
## 45                      0.08144906    UT              0.046135768
## 46                      0.07374863    VA              0.027196966
## 47                      0.20270645    VT              0.008712482
## 48                      0.07349656    WA              0.008021343
## 49                      0.05757484    WI              0.044512609
## 50                      0.18287489    WV              0.110129070
## 51                      0.18527516    WY              0.059125147
##    Total.Average.Error
## 1          0.026429742
## 2          0.036481096
## 3          0.105103224
## 4          0.001746707
## 5          0.026553318
## 6          0.010264324
## 7          0.017174629
## 8          0.340108628
## 9          0.006927962
## 10         0.008738144
## 11         0.020476182
## 12         0.121720395
## 13         0.045646730
## 14         0.064279584
## 15         0.004535891
## 16         0.034840847
## 17         0.060354797
## 18         0.085672631
## 19         0.044110248
## 20         0.002559183
## 21         0.087469517
## 22         0.013949948
## 23         0.015257176
## 24         0.024001385
## 25         0.112435423
## 26         0.041385008
## 27         0.083415040
## 28         0.020869518
## 29         0.071385183
## 30         0.055791402
## 31         0.029732190
## 32         0.011492080
## 33         0.010364872
## 34         0.010203507
## 35         0.001407501
## 36         0.042017569
## 37         0.070296210
## 38         0.035211278
## 39         0.039132016
## 40         0.008354467
## 41         0.045038319
## 42         0.157405538
## 43         0.133930387
## 44         0.018738275
## 45         0.046135768
## 46         0.027196966
## 47         0.008712482
## 48         0.008021343
## 49         0.044512609
## 50         0.110129070
## 51         0.059125147
\end{verbatim}
\end{kframe}
\end{knitrout}
6 weeks to go

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldata,} \hlnum{42} \hlopt{<}  \hlstd{polldata}\hlopt{$}\hlstd{EndDaysUntil)}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, polldata}\hlopt{$}\hlstd{EndDaysUntil} \hlopt{<} \hlnum{100}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2008"}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlstd{polls2008temp[}\hlkwd{complete.cases}\hlstd{(polls2008temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2008"}\hlstd{,} \hlstr{"McCain"}\hlstd{,} \hlstr{"observations"}\hlstd{,}\hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2012temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2012"}\hlstd{)}
\hlstd{polls2012temp} \hlkwb{=} \hlstd{polls2012temp[}\hlkwd{complete.cases}\hlstd{(polls2012temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2012"}\hlstd{,} \hlstr{"Romney"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2016temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2016"}\hlstd{)}
\hlstd{polls2016temp} \hlkwb{=} \hlstd{polls2016temp[}\hlkwd{complete.cases}\hlstd{(polls2016temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Trump"}\hlstd{,} \hlstr{"Clinton"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2008ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2008temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{9}\hlstd{,} \hlnum{10}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[,} \hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,}\hlnum{4}\hlopt{:}\hlnum{5}\hlstd{) ],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2012ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2012temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{34}\hlstd{,} \hlnum{35}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{35}\hlstd{,}  \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,}\hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{5}\hlopt{:}\hlnum{6}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2016ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2016temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{44}\hlstd{,} \hlnum{45}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{45}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}\hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{6}\hlopt{:}\hlnum{7}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{error2008ra_6W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2012ra_6W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2016ra_6W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlkwd{mean}\hlstd{(error2008ra_6W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.04366336
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_6W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.04459955
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_6W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.04314112
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2008ra_6W[error2008ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2008ra[, 1] \%in\% comp2008: object 'error2008ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_6W[error2012ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2012ra[, 1] \%in\% comp2012: object 'error2012ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_6W[error2016ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2016ra[, 1] \%in\% comp2016: object 'error2016ra' not found}}\begin{alltt}
\hlstd{cicoverage2008_6W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlstd{cicoverage2012_6W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlstd{cicoverage2016_6W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_6W, cicoverage2012_6W, cicoverage2016_6W))}
\end{alltt}
\begin{verbatim}
## [1] 0.88
\end{verbatim}
\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_6W, cicoverage2012_6W, cicoverage2016_6W)}
\end{alltt}
\begin{verbatim}
## [1] 0.86 0.90 0.88
\end{verbatim}
\begin{alltt}
\hlstd{cicoverage2008_6Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2008)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2008ratemp[, 1] \%in\% comp2008: object 'comp2008' not found}}\begin{alltt}
\hlstd{cicoverage2012_6Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2012)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2012ratemp[, 1] \%in\% comp2012: object 'comp2012' not found}}\begin{alltt}
\hlstd{cicoverage2016_6Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2016)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2016ratemp[, 1] \%in\% comp2016: object 'comp2016' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_6Wcomp, cicoverage2012_6Wcomp, cicoverage2016_6Wcomp))}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in mean(c(cicoverage2008\_6Wcomp, cicoverage2012\_6Wcomp, cicoverage2016\_6Wcomp)): object 'cicoverage2008\_6Wcomp' not found}}\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_6Wcomp, cicoverage2012_6Wcomp, cicoverage2016_6Wcomp)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): object 'cicoverage2008\_6Wcomp' not found}}\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008))}
\end{alltt}
\begin{verbatim}
##    polls2008ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.07841673    AK              0.073760332
## 2                       0.08727895    AL              0.008520217
## 3                       0.11937423    AR              0.023902777
## 4                       0.06523141    AZ              0.043050112
## 5                       0.07284958    CA              0.052027626
## 6                       0.05651787    CO              0.039450016
## 7                       0.04222072    CT              0.109097090
## 8                              NaN    DC                      NaN
## 9                       0.14396794    DE              0.076789373
## 10                      0.05494800    FL              0.037816419
## 11                      0.06944192    GA              0.037542259
## 12                      0.29854835    HI              0.110512740
## 13                      0.05148111    IA              0.000538434
## 14                      0.22169071    ID              0.034041209
## 15                      0.13411343    IL              0.085522288
## 16                      0.04704072    IN              0.023881667
## 17                      0.09855097    KS              0.006541378
## 18                      0.07263918    KY              0.001001136
## 19                      0.15370744    LA              0.039180950
## 20                      0.06294560    MA              0.112976428
## 21                      0.08204543    MD              0.083683261
## 22                      0.10847289    ME              0.120949482
## 23                      0.06348461    MI              0.063870106
## 24                      0.05466645    MN              0.026463042
## 25                      0.06387617    MO              0.018030082
## 26                      0.04779357    MS              0.008595102
## 27                      0.06826118    MT              0.012633422
## 28                      0.06123830    NC              0.031037843
## 29                      0.07966531    ND              0.018134552
## 30                      0.11451864    NE              0.011652411
## 31                      0.07206339    NH              0.053360681
## 32                      0.06232009    NJ              0.044928417
## 33                      0.07612650    NM              0.043644071
## 34                      0.12528571    NV              0.089194667
## 35                      0.07620871    NY              0.052213490
## 36                      0.04660626    OH              0.040038353
## 37                      0.15029136    OK              0.004519279
## 38                      0.05213547    OR              0.034570245
## 39                      0.04067027    PA              0.041407847
## 40                      0.12323505    RI              0.056733544
## 41                      0.09008292    SC              0.008026634
## 42                      0.08430668    SD              0.017065366
## 43                      0.08559833    TN              0.011007452
## 44                      0.06819927    TX              0.001094838
## 45                      0.34101762    UT              0.034717825
## 46                      0.04246849    VA              0.041733343
## 47                      0.11978024    VT              0.078368882
## 48                      0.04944277    WA              0.021368433
## 49                      0.04921703    WI              0.046076036
## 50                      0.08204543    WV              0.112355049
## 51                      0.16439416    WY              0.039542037
##    Total.Average.Error
## 1          0.073760332
## 2          0.008520217
## 3          0.023902777
## 4          0.043050112
## 5          0.052027626
## 6          0.039450016
## 7          0.109097090
## 8                  NaN
## 9          0.076789373
## 10         0.037816419
## 11         0.037542259
## 12         0.110512740
## 13         0.000538434
## 14         0.034041209
## 15         0.085522288
## 16         0.023881667
## 17         0.006541378
## 18         0.001001136
## 19         0.039180950
## 20         0.112976428
## 21         0.083683261
## 22         0.120949482
## 23         0.063870106
## 24         0.026463042
## 25         0.018030082
## 26         0.008595102
## 27         0.012633422
## 28         0.031037843
## 29         0.018134552
## 30         0.011652411
## 31         0.053360681
## 32         0.044928417
## 33         0.043644071
## 34         0.089194667
## 35         0.052213490
## 36         0.040038353
## 37         0.004519279
## 38         0.034570245
## 39         0.041407847
## 40         0.056733544
## 41         0.008026634
## 42         0.017065366
## 43         0.011007452
## 44         0.001094838
## 45         0.034717825
## 46         0.041733343
## 47         0.078368882
## 48         0.021368433
## 49         0.046076036
## 50         0.112355049
## 51         0.039542037
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012))}
\end{alltt}
\begin{verbatim}
##    polls2012ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.13698363    AK              0.044659058
## 2                       0.13698363    AL              0.083668438
## 3                       0.10027459    AR              0.155669615
## 4                       0.06185214    AZ              0.007422021
## 5                       0.06012493    CA              0.019012238
## 6                       0.03236075    CO              0.010001408
## 7                       0.07191345    CT              0.020068467
## 8                              NaN    DC                      NaN
## 9                       0.10027459    DE              0.060343987
## 10                      0.03967667    FL              0.006518053
## 11                      0.08072944    GA              0.025960780
## 12                      0.11528908    HI              0.146329404
## 13                      0.06442226    IA              0.013165096
## 14                      0.13698363    ID              0.135720022
## 15                      0.11528908    IL              0.015066153
## 16                      0.13698363    IN              0.023509899
## 17                      0.28779318    KS              0.039406257
## 18                      0.23549889    KY              0.086068038
## 19                      0.10027459    LA              0.121593818
## 20                      0.06756936    MA              0.020096393
## 21                      0.12695944    MD              0.040992283
## 22                      0.07567143    ME              0.004799779
## 23                      0.04479926    MI              0.005065722
## 24                      0.11528908    MN              0.031296817
## 25                      0.06013739    MO              0.026756051
## 26                      0.13698363    MS              0.029525145
## 27                      0.10649106    MT              0.034933777
## 28                      0.04909911    NC              0.002034933
## 29                      0.13698363    ND              0.072618236
## 30                      0.09252782    NE              0.045014474
## 31                      0.07847901    NH              0.051194215
## 32                      0.04220332    NJ              0.026046607
## 33                      0.05515619    NM              0.006702319
## 34                      0.04079695    NV              0.014319719
## 35                      0.07237971    NY              0.018235613
## 36                      0.03738204    OH              0.006535025
## 37                      0.38854610    OK              0.037285313
## 38                      0.06916017    OR              0.016617708
## 39                      0.04401349    PA              0.008846123
## 40                      0.05972448    RI              0.042456065
## 41                      0.08319321    SC              0.032971756
## 42                      0.16610016    SD              0.056908049
## 43                      0.11435955    TN              0.069003632
## 44                      0.08253354    TX              0.025155718
## 45                      0.12233167    UT              0.049052131
## 46                      0.05404341    VA              0.004031302
## 47                      0.30921965    VT              0.037534478
## 48                      0.03654859    WA              0.001247750
## 49                      0.03110057    WI              0.007952914
## 50                      0.11528908    WV              0.207452057
## 51                      0.13698363    WY              0.183112493
##    Total.Average.Error
## 1          0.044659058
## 2          0.083668438
## 3          0.155669615
## 4          0.007422021
## 5          0.019012238
## 6          0.010001408
## 7          0.020068467
## 8                  NaN
## 9          0.060343987
## 10         0.006518053
## 11         0.025960780
## 12         0.146329404
## 13         0.013165096
## 14         0.135720022
## 15         0.015066153
## 16         0.023509899
## 17         0.039406257
## 18         0.086068038
## 19         0.121593818
## 20         0.020096393
## 21         0.040992283
## 22         0.004799779
## 23         0.005065722
## 24         0.031296817
## 25         0.026756051
## 26         0.029525145
## 27         0.034933777
## 28         0.002034933
## 29         0.072618236
## 30         0.045014474
## 31         0.051194215
## 32         0.026046607
## 33         0.006702319
## 34         0.014319719
## 35         0.018235613
## 36         0.006535025
## 37         0.037285313
## 38         0.016617708
## 39         0.008846123
## 40         0.042456065
## 41         0.032971756
## 42         0.056908049
## 43         0.069003632
## 44         0.025155718
## 45         0.049052131
## 46         0.004031302
## 47         0.037534478
## 48         0.001247750
## 49         0.007952914
## 50         0.207452057
## 51         0.183112493
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016))}
\end{alltt}
\begin{verbatim}
##    polls2016ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.04522908    AK             0.0186703065
## 2                       0.06615516    AL             0.0392466193
## 3                       0.16518062    AR             0.2251370285
## 4                       0.04406369    AZ             0.0001536511
## 5                       0.08870779    CA             0.0210699441
## 6                       0.07915157    CO             0.0223810806
## 7                       0.16518062    CT             0.0108701765
## 8                       0.06201638    DC             0.3411052047
## 9                       0.16518062    DE             0.0222994372
## 10                      0.03799721    FL             0.0094216630
## 11                      0.02757032    GA             0.0098571109
## 12                      0.13963263    HI             0.0269052445
## 13                      0.05925883    IA             0.0313386672
## 14                      0.06018153    ID             0.0534032664
## 15                      0.04017632    IL             0.0029363249
## 16                      0.07935400    IN             0.0298655018
## 17                      0.09804795    KS             0.0444981601
## 18                      0.10025878    KY             0.1421970208
## 19                      0.07015836    LA             0.1298222385
## 20                      0.07233424    MA             0.0214209709
## 21                      0.16518062    MD             0.0578768452
## 22                      0.16518062    ME             0.0663177403
## 23                      0.03133879    MI             0.0214560805
## 24                      0.05518903    MN             0.0317290073
## 25                      0.02207027    MO             0.1153200860
## 26                      0.10150247    MS             0.0355901110
## 27                      0.06913736    MT             0.0766952915
## 28                      0.05703091    NC             0.0199480699
## 29                      0.10008957    ND             0.0741201000
## 30                      0.07778031    NE             0.0389070726
## 31                      0.06826908    NH             0.0304470701
## 32                      0.06192007    NJ             0.0203545489
## 33                      0.05718016    NM             0.0049201148
## 34                      0.02794935    NV             0.0242667172
## 35                      0.03808574    NY             0.0051083269
## 36                      0.05747391    OH             0.0334209406
## 37                      0.06032757    OK             0.0589284976
## 38                      0.09336045    OR             0.0005656563
## 39                      0.03782303    PA             0.0370893147
## 40                      0.09532680    RI             0.0059314431
## 41                      0.04507096    SC             0.0460865393
## 42                      0.11614430    SD             0.0942038281
## 43                      0.09508147    TN             0.0426311187
## 44                      0.09857857    TX             0.0007307803
## 45                      0.11426067    UT             0.0273592596
## 46                      0.08880903    VA             0.0118605644
## 47                      0.16518062    VT             0.0695786116
## 48                      0.16518062    WA             0.0055836604
## 49                      0.07151008    WI             0.0384002079
## 50                      0.36075999    WV             0.1408047014
## 51                      0.12957980    WY             0.0593292807
##    Total.Average.Error
## 1         0.0186703065
## 2         0.0392466193
## 3         0.2251370285
## 4         0.0001536511
## 5         0.0210699441
## 6         0.0223810806
## 7         0.0108701765
## 8         0.3411052047
## 9         0.0222994372
## 10        0.0094216630
## 11        0.0098571109
## 12        0.0269052445
## 13        0.0313386672
## 14        0.0534032664
## 15        0.0029363249
## 16        0.0298655018
## 17        0.0444981601
## 18        0.1421970208
## 19        0.1298222385
## 20        0.0214209709
## 21        0.0578768452
## 22        0.0663177403
## 23        0.0214560805
## 24        0.0317290073
## 25        0.1153200860
## 26        0.0355901110
## 27        0.0766952915
## 28        0.0199480699
## 29        0.0741201000
## 30        0.0389070726
## 31        0.0304470701
## 32        0.0203545489
## 33        0.0049201148
## 34        0.0242667172
## 35        0.0051083269
## 36        0.0334209406
## 37        0.0589284976
## 38        0.0005656563
## 39        0.0370893147
## 40        0.0059314431
## 41        0.0460865393
## 42        0.0942038281
## 43        0.0426311187
## 44        0.0007307803
## 45        0.0273592596
## 46        0.0118605644
## 47        0.0695786116
## 48        0.0055836604
## 49        0.0384002079
## 50        0.1408047014
## 51        0.0593292807
\end{verbatim}
\end{kframe}
\end{knitrout}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldata,} \hlnum{35} \hlopt{<}  \hlstd{polldata}\hlopt{$}\hlstd{EndDaysUntil)}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, polldata}\hlopt{$}\hlstd{EndDaysUntil} \hlopt{<} \hlnum{100}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2008"}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlstd{polls2008temp[}\hlkwd{complete.cases}\hlstd{(polls2008temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2008"}\hlstd{,} \hlstr{"McCain"}\hlstd{,} \hlstr{"observations"}\hlstd{,}\hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2012temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2012"}\hlstd{)}
\hlstd{polls2012temp} \hlkwb{=} \hlstd{polls2012temp[}\hlkwd{complete.cases}\hlstd{(polls2012temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2012"}\hlstd{,} \hlstr{"Romney"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2016temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2016"}\hlstd{)}
\hlstd{polls2016temp} \hlkwb{=} \hlstd{polls2016temp[}\hlkwd{complete.cases}\hlstd{(polls2016temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Trump"}\hlstd{,} \hlstr{"Clinton"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2008ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2008temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{9}\hlstd{,} \hlnum{10}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[,} \hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,}\hlnum{4}\hlopt{:}\hlnum{5}\hlstd{) ],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2012ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2012temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{34}\hlstd{,} \hlnum{35}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{35}\hlstd{,}  \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,}\hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{5}\hlopt{:}\hlnum{6}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2016ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2016temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{44}\hlstd{,} \hlnum{45}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{45}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}\hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{6}\hlopt{:}\hlnum{7}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{error2008ra_5W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2012ra_5W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2016ra_5W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlkwd{mean}\hlstd{(error2008ra_5W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.0398167
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_5W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.0451352
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_5W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.03692934
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2008ra_5W[error2008ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2008ra[, 1] \%in\% comp2008: object 'error2008ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_5W[error2012ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2012ra[, 1] \%in\% comp2012: object 'error2012ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_5W[error2016ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2016ra[, 1] \%in\% comp2016: object 'error2016ra' not found}}\begin{alltt}
\hlstd{cicoverage2008_5W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlstd{cicoverage2012_5W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlstd{cicoverage2016_5W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_5W, cicoverage2012_5W, cicoverage2016_5W))}
\end{alltt}
\begin{verbatim}
## [1] NA
\end{verbatim}
\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_5W, cicoverage2012_5W, cicoverage2016_5W)}
\end{alltt}
\begin{verbatim}
## [1] 0.84   NA 0.94
\end{verbatim}
\begin{alltt}
\hlstd{cicoverage2008_5Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2008)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2008ratemp[, 1] \%in\% comp2008: object 'comp2008' not found}}\begin{alltt}
\hlstd{cicoverage2012_5Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2012)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2012ratemp[, 1] \%in\% comp2012: object 'comp2012' not found}}\begin{alltt}
\hlstd{cicoverage2016_5Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2016)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2016ratemp[, 1] \%in\% comp2016: object 'comp2016' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_5Wcomp, cicoverage2012_5Wcomp, cicoverage2016_5Wcomp))}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in mean(c(cicoverage2008\_5Wcomp, cicoverage2012\_5Wcomp, cicoverage2016\_5Wcomp)): object 'cicoverage2008\_5Wcomp' not found}}\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_5Wcomp, cicoverage2012_5Wcomp, cicoverage2016_5Wcomp)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): object 'cicoverage2008\_5Wcomp' not found}}\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008))}
\end{alltt}
\begin{verbatim}
##    polls2008ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.07558080    AK             7.607170e-02
## 2                       0.09469033    AL             9.046270e-03
## 3                       0.12645778    AR             2.811460e-02
## 4                       0.06789026    AZ             3.432804e-02
## 5                       0.04911551    CA             5.832534e-02
## 6                       0.05368345    CO             2.928071e-02
## 7                       0.05069198    CT             1.053616e-01
## 8                              NaN    DC                      NaN
## 9                       0.12855709    DE             7.441977e-02
## 10                      0.07126905    FL             2.330375e-02
## 11                      0.05129670    GA             3.603946e-02
## 12                      0.34988959    HI             8.353285e-02
## 13                      0.05168332    IA             2.069352e-05
## 14                      0.16224081    ID             3.783628e-03
## 15                      0.08108374    IL             3.667633e-02
## 16                      0.03603194    IN             2.054435e-02
## 17                      0.10061443    KS             5.759777e-03
## 18                      0.11434623    KY             6.290621e-02
## 19                      0.17243048    LA             2.775136e-02
## 20                      0.07325878    MA             3.739260e-02
## 21                      0.07942012    MD             4.960888e-02
## 22                      0.09692800    ME             2.671430e-02
## 23                      0.05975027    MI             5.393171e-02
## 24                      0.05450618    MN             2.572235e-02
## 25                      0.07578653    MO             1.653462e-03
## 26                      0.05217760    MS             1.001948e-02
## 27                      0.07753882    MT             2.413141e-02
## 28                      0.08536393    NC             2.671920e-02
## 29                      0.13153615    ND             3.303994e-02
## 30                      0.14065606    NE             2.145195e-02
## 31                      0.08391314    NH             3.777677e-02
## 32                      0.05478742    NJ             4.344163e-02
## 33                      0.10863088    NM             6.697819e-02
## 34                      0.05125102    NV             7.382790e-02
## 35                      0.06923134    NY             5.200245e-02
## 36                      0.02861373    OH             4.154333e-02
## 37                      0.14065606    OK             1.018120e-01
## 38                      0.04067266    OR             3.635748e-02
## 39                      0.04912351    PA             2.861073e-02
## 40                      0.08154150    RI             3.214643e-02
## 41                      0.08082993    SC             1.109795e-02
## 42                      0.11434623    SD             2.352900e-02
## 43                      0.14038932    TN             2.265205e-02
## 44                      0.06379317    TX             7.301361e-05
## 45                      0.15093249    UT             9.929270e-03
## 46                      0.03297866    VA             3.800699e-02
## 47                      0.09889472    VT             1.364642e-01
## 48                      0.04792276    WA             2.028452e-02
## 49                      0.03848142    WI             4.121777e-02
## 50                      0.11776672    WV             3.644993e-02
## 51                      0.14065606    WY             1.109814e-01
##    Total.Average.Error
## 1         7.607170e-02
## 2         9.046270e-03
## 3         2.811460e-02
## 4         3.432804e-02
## 5         5.832534e-02
## 6         2.928071e-02
## 7         1.053616e-01
## 8                  NaN
## 9         7.441977e-02
## 10        2.330375e-02
## 11        3.603946e-02
## 12        8.353285e-02
## 13        2.069352e-05
## 14        3.783628e-03
## 15        3.667633e-02
## 16        2.054435e-02
## 17        5.759777e-03
## 18        6.290621e-02
## 19        2.775136e-02
## 20        3.739260e-02
## 21        4.960888e-02
## 22        2.671430e-02
## 23        5.393171e-02
## 24        2.572235e-02
## 25        1.653462e-03
## 26        1.001948e-02
## 27        2.413141e-02
## 28        2.671920e-02
## 29        3.303994e-02
## 30        2.145195e-02
## 31        3.777677e-02
## 32        4.344163e-02
## 33        6.697819e-02
## 34        7.382790e-02
## 35        5.200245e-02
## 36        4.154333e-02
## 37        1.018120e-01
## 38        3.635748e-02
## 39        2.861073e-02
## 40        3.214643e-02
## 41        1.109795e-02
## 42        2.352900e-02
## 43        2.265205e-02
## 44        7.301361e-05
## 45        9.929270e-03
## 46        3.800699e-02
## 47        1.364642e-01
## 48        2.028452e-02
## 49        4.121777e-02
## 50        3.644993e-02
## 51        1.109814e-01
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012))}
\end{alltt}
\begin{verbatim}
##    polls2012ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.10824717    AK              0.035791768
## 2                       0.10824717    AL              0.074801149
## 3                       0.38333351    AR              0.046924351
## 4                       0.15330691    AZ              0.033206555
## 5                       0.08303219    CA              0.017823304
## 6                       0.05473458    CO              0.003668020
## 7                       0.14210168    CT              0.025858771
## 8                              NaN    DC                      NaN
## 9                       0.12032764    DE              0.068472848
## 10                      0.03472571    FL              0.003600006
## 11                      0.07754031    GA              0.014665915
## 12                      0.09244660    HI              0.135878233
## 13                      0.09244660    IA              0.051566733
## 14                      0.10824717    ID              0.126852732
## 15                      0.09244660    IL              0.004614982
## 16                      0.10824717    IN              0.014642609
## 17                      0.08723920    KS              0.091972674
## 18                      0.22924333    KY              0.080081404
## 19                      0.21123356    LA              0.058423361
## 20                      0.06848159    MA              0.019823902
## 21                      0.12032764    MD              0.107220556
## 22                      0.06095476    ME              0.000818141
## 23                      0.05833771    MI              0.027793927
## 24                      0.04338832    MN              0.017689150
## 25                      0.08787668    MO              0.011474762
## 26                      0.16974320    MS              0.001652068
## 27                      0.10041267    MT              0.028478036
## 28                      0.03702511    NC              0.006162179
## 29                      0.06679262    ND              0.019472097
## 30                      0.10824717    NE              0.073932766
## 31                      0.06724404    NH              0.019288126
## 32                      0.06994414    NJ              0.019726734
## 33                      0.06533811    NM              0.018181443
## 34                      0.08723920    NV              0.053236015
## 35                      0.04720886    NY              0.015957830
## 36                      0.03333551    OH              0.015827819
## 37                      0.10824717    OK              0.130362061
## 38                      0.09244660    OR              0.018448580
## 39                      0.04299450    PA              0.006514694
## 40                      0.10523231    RI              0.030020719
## 41                      0.08738056    SC              0.030594252
## 42                      0.15281029    SD              0.057047297
## 43                      0.10880843    TN              0.068074775
## 44                      0.07946630    TX              0.021404282
## 45                              NA    UT              0.022857634
## 46                      0.05161812    VA              0.017187419
## 47                      0.09244660    VT              0.101312336
## 48                      0.03942478    WA              0.002305631
## 49                      0.03641423    WI              0.012901110
## 50                      0.09244660    WV              0.217903228
## 51                      0.10824717    WY              0.174245203
##    Total.Average.Error
## 1          0.035791768
## 2          0.074801149
## 3          0.046924351
## 4          0.033206555
## 5          0.017823304
## 6          0.003668020
## 7          0.025858771
## 8                  NaN
## 9          0.068472848
## 10         0.003600006
## 11         0.014665915
## 12         0.135878233
## 13         0.051566733
## 14         0.126852732
## 15         0.004614982
## 16         0.014642609
## 17         0.091972674
## 18         0.080081404
## 19         0.058423361
## 20         0.019823902
## 21         0.107220556
## 22         0.000818141
## 23         0.027793927
## 24         0.017689150
## 25         0.011474762
## 26         0.001652068
## 27         0.028478036
## 28         0.006162179
## 29         0.019472097
## 30         0.073932766
## 31         0.019288126
## 32         0.019726734
## 33         0.018181443
## 34         0.053236015
## 35         0.015957830
## 36         0.015827819
## 37         0.130362061
## 38         0.018448580
## 39         0.006514694
## 40         0.030020719
## 41         0.030594252
## 42         0.057047297
## 43         0.068074775
## 44         0.021404282
## 45         0.022857634
## 46         0.017187419
## 47         0.101312336
## 48         0.002305631
## 49         0.012901110
## 50         0.217903228
## 51         0.174245203
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016))}
\end{alltt}
\begin{verbatim}
##    polls2016ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.05817447    AK             0.0228758963
## 2                       0.05376003    AL             0.0384212826
## 3                       0.12264713    AR             0.0850634167
## 4                       0.05148450    AZ             0.0000919409
## 5                       0.07853212    CA             0.0365312901
## 6                       0.06903525    CO             0.0093417251
## 7                       0.04176499    CT             0.0116957962
## 8                       0.51004299    DC             0.1750452523
## 9                       0.06833595    DE             0.0129445382
## 10                      0.05184637    FL             0.0085534295
## 11                      0.04700670    GA             0.0019500207
## 12                      0.14889404    HI             0.0338496084
## 13                      0.05254545    IA             0.0385139700
## 14                      0.06827354    ID             0.0438482189
## 15                      0.12784672    IL             0.0130373990
## 16                      0.07222319    IN             0.0269087584
## 17                      0.03347695    KS             0.0070728357
## 18                      0.24733903    KY             0.0921440698
## 19                      0.08166515    LA             0.0340801675
## 20                      0.17127928    MA             0.0044217600
## 21                      0.14159804    MD             0.0183218706
## 22                      0.04831373    ME             0.0201708365
## 23                      0.03839168    MI             0.0197547920
## 24                      0.03330689    MN             0.0327648998
## 25                      0.04220095    MO             0.1199727155
## 26                      0.09692575    MS             0.0359561061
## 27                      0.07347914    MT             0.0636346809
## 28                      0.05567876    NC             0.0267439250
## 29                      0.08293678    ND             0.0768637696
## 30                      0.05951408    NE             0.0335721800
## 31                      0.06085346    NH             0.0288609704
## 32                      0.08604952    NJ             0.0073025695
## 33                      0.05379464    NM             0.0041043992
## 34                      0.04184261    NV             0.0133624985
## 35                      0.05521308    NY             0.0065315543
## 36                      0.05324424    OH             0.0338925914
## 37                      0.05881253    OK             0.0554822359
## 38                      0.08299252    OR             0.0098625869
## 39                      0.03950914    PA             0.0360093463
## 40                      0.10134714    RI             0.0015176586
## 41                      0.05544369    SC             0.0341406504
## 42                      0.08608010    SD             0.1468005372
## 43                      0.08608010    TN             0.1233253868
## 44                      0.06308222    TX             0.0198886540
## 45                      0.12706278    UT             0.0416464050
## 46                      0.06609638    VA             0.0039736729
## 47                      0.17601027    VT             0.1031953559
## 48                      0.06716386    WA             0.0077013869
## 49                      0.03523479    WI             0.0152712694
## 50                      0.13892011    WV             0.1123812280
## 51                      0.27795665    WY             0.0721143053
##    Total.Average.Error
## 1         0.0228758963
## 2         0.0384212826
## 3         0.0850634167
## 4         0.0000919409
## 5         0.0365312901
## 6         0.0093417251
## 7         0.0116957962
## 8         0.1750452523
## 9         0.0129445382
## 10        0.0085534295
## 11        0.0019500207
## 12        0.0338496084
## 13        0.0385139700
## 14        0.0438482189
## 15        0.0130373990
## 16        0.0269087584
## 17        0.0070728357
## 18        0.0921440698
## 19        0.0340801675
## 20        0.0044217600
## 21        0.0183218706
## 22        0.0201708365
## 23        0.0197547920
## 24        0.0327648998
## 25        0.1199727155
## 26        0.0359561061
## 27        0.0636346809
## 28        0.0267439250
## 29        0.0768637696
## 30        0.0335721800
## 31        0.0288609704
## 32        0.0073025695
## 33        0.0041043992
## 34        0.0133624985
## 35        0.0065315543
## 36        0.0338925914
## 37        0.0554822359
## 38        0.0098625869
## 39        0.0360093463
## 40        0.0015176586
## 41        0.0341406504
## 42        0.1468005372
## 43        0.1233253868
## 44        0.0198886540
## 45        0.0416464050
## 46        0.0039736729
## 47        0.1031953559
## 48        0.0077013869
## 49        0.0152712694
## 50        0.1123812280
## 51        0.0721143053
\end{verbatim}
\end{kframe}
\end{knitrout}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldata,} \hlnum{28} \hlopt{<}  \hlstd{polldata}\hlopt{$}\hlstd{EndDaysUntil)}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, polldata}\hlopt{$}\hlstd{EndDaysUntil} \hlopt{<} \hlnum{100}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2008"}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlstd{polls2008temp[}\hlkwd{complete.cases}\hlstd{(polls2008temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2008"}\hlstd{,} \hlstr{"McCain"}\hlstd{,} \hlstr{"observations"}\hlstd{,}\hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2012temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2012"}\hlstd{)}
\hlstd{polls2012temp} \hlkwb{=} \hlstd{polls2012temp[}\hlkwd{complete.cases}\hlstd{(polls2012temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2012"}\hlstd{,} \hlstr{"Romney"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2016temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2016"}\hlstd{)}
\hlstd{polls2016temp} \hlkwb{=} \hlstd{polls2016temp[}\hlkwd{complete.cases}\hlstd{(polls2016temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Trump"}\hlstd{,} \hlstr{"Clinton"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2008ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2008temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{9}\hlstd{,} \hlnum{10}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[,} \hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,}\hlnum{4}\hlopt{:}\hlnum{5}\hlstd{) ],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2012ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2012temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{34}\hlstd{,} \hlnum{35}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{35}\hlstd{,}  \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,}\hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{5}\hlopt{:}\hlnum{6}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2016ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2016temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{44}\hlstd{,} \hlnum{45}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{45}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}\hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{6}\hlopt{:}\hlnum{7}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{error2008ra_4W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2012ra_4W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2016ra_4W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlkwd{mean}\hlstd{(error2008ra_4W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.03957621
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_4W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.03772721
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_4W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.03478827
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2008ra_4W[error2008ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2008ra[, 1] \%in\% comp2008: object 'error2008ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_4W[error2012ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2012ra[, 1] \%in\% comp2012: object 'error2012ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_4W[error2016ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2016ra[, 1] \%in\% comp2016: object 'error2016ra' not found}}\begin{alltt}
\hlstd{cicoverage2008_4W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlstd{cicoverage2012_4W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlstd{cicoverage2016_4W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_4W, cicoverage2012_4W, cicoverage2016_4W))}
\end{alltt}
\begin{verbatim}
## [1] 0.9133333
\end{verbatim}
\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_4W, cicoverage2012_4W, cicoverage2016_4W)}
\end{alltt}
\begin{verbatim}
## [1] 0.92 0.92 0.90
\end{verbatim}
\begin{alltt}
\hlstd{cicoverage2008_4Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2008)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2008ratemp[, 1] \%in\% comp2008: object 'comp2008' not found}}\begin{alltt}
\hlstd{cicoverage2012_4Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2012)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2012ratemp[, 1] \%in\% comp2012: object 'comp2012' not found}}\begin{alltt}
\hlstd{cicoverage2016_4Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2016)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2016ratemp[, 1] \%in\% comp2016: object 'comp2016' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_4Wcomp, cicoverage2012_4Wcomp, cicoverage2016_4Wcomp))}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in mean(c(cicoverage2008\_4Wcomp, cicoverage2012\_4Wcomp, cicoverage2016\_4Wcomp)): object 'cicoverage2008\_4Wcomp' not found}}\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_4Wcomp, cicoverage2012_4Wcomp, cicoverage2016_4Wcomp)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): object 'cicoverage2008\_4Wcomp' not found}}\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008))}
\end{alltt}
\begin{verbatim}
##    polls2008ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.12666745    AK             0.0544993131
## 2                       0.08956358    AL             0.0081017074
## 3                       0.10932458    AR             0.0474524578
## 4                       0.06225648    AZ             0.0475062206
## 5                       0.04630127    CA             0.0552149854
## 6                       0.04905291    CO             0.0338245584
## 7                       0.05054091    CT             0.1047376810
## 8                              NaN    DC                      NaN
## 9                       0.10942678    DE             0.1533488284
## 10                      0.06908143    FL             0.0304178198
## 11                      0.05591826    GA             0.0304723053
## 12                      0.21795446    HI             0.0810038413
## 13                      0.05333438    IA             0.0001204795
## 14                      0.15827411    ID             0.0073747206
## 15                      0.08205041    IL             0.0363259406
## 16                      0.03303036    IN             0.0195107686
## 17                      0.10942678    KS             0.0491553163
## 18                      0.09737456    KY             0.0118929038
## 19                      0.06726132    LA             0.0248863527
## 20                      0.08324658    MA             0.0436698125
## 21                      0.12712981    MD             0.0430513138
## 22                      0.10541034    ME             0.0480649726
## 23                      0.06449383    MI             0.0590835099
## 24                      0.06966563    MN             0.0244044349
## 25                      0.09777659    MO             0.0190853069
## 26                      0.04726377    MS             0.0101242217
## 27                      0.10942678    MT             0.0152734091
## 28                      0.09021493    NC             0.0238068501
## 29                      0.09169793    ND             0.0340378709
## 30                      0.08134080    NE             0.0246964647
## 31                      0.08234103    NH             0.0481391175
## 32                      0.05840841    NJ             0.0478791032
## 33                      0.08035388    NM             0.0563118587
## 34                      0.05981567    NV             0.0731221219
## 35                      0.07208735    NY             0.0557609820
## 36                      0.05911787    OH             0.0265363920
## 37                      0.10207724    OK             0.0128238593
## 38                      0.04773614    OR             0.0318067262
## 39                      0.06167281    PA             0.0177032371
## 40                      0.09696756    RI             0.0901466304
## 41                      0.09839868    SC             0.0054230424
## 42                      0.08546613    SD             0.0153459589
## 43                      0.08555888    TN             0.0141903974
## 44                      0.06163142    TX             0.0295777922
## 45                      0.14198273    UT             0.0126963395
## 46                      0.05985179    VA             0.0329235807
## 47                      0.10514242    VT             0.0677447631
## 48                      0.06764086    WA             0.0427420941
## 49                      0.03003103    WI             0.0276471364
## 50                      0.11253859    WV             0.0357124384
## 51                      0.15263799    WY             0.0934326855
##    Total.Average.Error
## 1         0.0544993131
## 2         0.0081017074
## 3         0.0474524578
## 4         0.0475062206
## 5         0.0552149854
## 6         0.0338245584
## 7         0.1047376810
## 8                  NaN
## 9         0.1533488284
## 10        0.0304178198
## 11        0.0304723053
## 12        0.0810038413
## 13        0.0001204795
## 14        0.0073747206
## 15        0.0363259406
## 16        0.0195107686
## 17        0.0491553163
## 18        0.0118929038
## 19        0.0248863527
## 20        0.0436698125
## 21        0.0430513138
## 22        0.0480649726
## 23        0.0590835099
## 24        0.0244044349
## 25        0.0190853069
## 26        0.0101242217
## 27        0.0152734091
## 28        0.0238068501
## 29        0.0340378709
## 30        0.0246964647
## 31        0.0481391175
## 32        0.0478791032
## 33        0.0563118587
## 34        0.0731221219
## 35        0.0557609820
## 36        0.0265363920
## 37        0.0128238593
## 38        0.0318067262
## 39        0.0177032371
## 40        0.0901466304
## 41        0.0054230424
## 42        0.0153459589
## 43        0.0141903974
## 44        0.0295777922
## 45        0.0126963395
## 46        0.0329235807
## 47        0.0677447631
## 48        0.0427420941
## 49        0.0276471364
## 50        0.0357124384
## 51        0.0934326855
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012))}
\end{alltt}
\begin{verbatim}
##    polls2012ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.09890315    AK             0.0388917425
## 2                       0.09890315    AL             0.0779011230
## 3                       0.36843248    AR             0.0479328325
## 4                       0.05554495    AZ             0.0121799890
## 5                       0.06726139    CA             0.0174231088
## 6                       0.03835253    CO             0.0143876689
## 7                       0.12357621    CT             0.0618527229
## 8                              NaN    DC                      NaN
## 9                       0.12357621    DE             0.0685964973
## 10                      0.05628465    FL             0.0125700961
## 11                      0.08942683    GA             0.0273060733
## 12                      0.13941357    HI             0.1603968682
## 13                      0.05447314    IA             0.0097495963
## 14                      0.09890315    ID             0.1299527061
## 15                      0.13941357    IL             0.0291336171
## 16                      0.06596356    IN             0.0022438449
## 17                      0.28306303    KS             0.0453879645
## 18                      0.22991176    KY             0.0807226922
## 19                      0.19714592    LA             0.0376803787
## 20                      0.07745830    MA             0.0068839822
## 21                      0.11643802    MD             0.0357444323
## 22                      0.06090418    ME             0.0011800177
## 23                      0.08675869    MI             0.0106256846
## 24                      0.02989029    MN             0.0039812818
## 25                      0.09349872    MO             0.0135212463
## 26                      0.16589153    MS             0.0005361552
## 27                      0.09807124    MT             0.0280250003
## 28                      0.04813436    NC             0.0087952253
## 29                      0.06071333    ND             0.0206672143
## 30                      0.09890315    NE             0.0770327404
## 31                      0.07444389    NH             0.0058932037
## 32                      0.04874840    NJ             0.0235925638
## 33                      0.12357621    NM             0.0270789946
## 34                      0.04251318    NV             0.0099717789
## 35                      0.05991028    NY             0.0225370253
## 36                      0.03238002    OH             0.0173997706
## 37                      0.09890315    OK             0.1334620351
## 38                      0.13941357    OR             0.0060700549
## 39                      0.04848323    PA             0.0142794525
## 40                      0.07508637    RI             0.0190631357
## 41                      0.08623353    SC             0.0320333284
## 42                      0.11572710    SD             0.0520023419
## 43                      0.10777011    TN             0.0682966947
## 44                      0.08239835    TX             0.0211290675
## 45                      0.12572054    UT             0.0516212234
## 46                      0.04785918    VA             0.0019476151
## 47                      0.33808656    VT             0.0448947670
## 48                      0.04250024    WA             0.0005986098
## 49                      0.05361999    WI             0.0015396015
## 50                      0.16004169    WV             0.0743016588
## 51                      0.09890315    WY             0.1773451778
##    Total.Average.Error
## 1         0.0388917425
## 2         0.0779011230
## 3         0.0479328325
## 4         0.0121799890
## 5         0.0174231088
## 6         0.0143876689
## 7         0.0618527229
## 8                  NaN
## 9         0.0685964973
## 10        0.0125700961
## 11        0.0273060733
## 12        0.1603968682
## 13        0.0097495963
## 14        0.1299527061
## 15        0.0291336171
## 16        0.0022438449
## 17        0.0453879645
## 18        0.0807226922
## 19        0.0376803787
## 20        0.0068839822
## 21        0.0357444323
## 22        0.0011800177
## 23        0.0106256846
## 24        0.0039812818
## 25        0.0135212463
## 26        0.0005361552
## 27        0.0280250003
## 28        0.0087952253
## 29        0.0206672143
## 30        0.0770327404
## 31        0.0058932037
## 32        0.0235925638
## 33        0.0270789946
## 34        0.0099717789
## 35        0.0225370253
## 36        0.0173997706
## 37        0.1334620351
## 38        0.0060700549
## 39        0.0142794525
## 40        0.0190631357
## 41        0.0320333284
## 42        0.0520023419
## 43        0.0682966947
## 44        0.0211290675
## 45        0.0516212234
## 46        0.0019476151
## 47        0.0448947670
## 48        0.0005986098
## 49        0.0015396015
## 50        0.0743016588
## 51        0.1773451778
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016))}
\end{alltt}
\begin{verbatim}
##    polls2016ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.06979145    AK              0.019185046
## 2                       0.05136888    AL              0.030913037
## 3                       0.18078640    AR              0.093772941
## 4                       0.06498468    AZ              0.011237566
## 5                       0.10457731    CA              0.023246256
## 6                       0.06826409    CO              0.009895999
## 7                       0.04910519    CT              0.006026772
## 8                       0.33221451    DC              0.160083590
## 9                       0.17720399    DE              0.006082512
## 10                      0.04347264    FL              0.011768863
## 11                      0.04435410    GA              0.006751146
## 12                      0.10646451    HI              0.026021898
## 13                      0.05009452    IA              0.027258293
## 14                      0.09111452    ID              0.037111722
## 15                      0.06460719    IL              0.003248294
## 16                      0.07242421    IN              0.025842978
## 17                      0.05847414    KS              0.025752984
## 18                      0.10921915    KY              0.065821285
## 19                      0.23853769    LA              0.060432652
## 20                      0.19737494    MA              0.002047710
## 21                      0.09900952    MD              0.006093317
## 22                      0.05957805    ME              0.024519983
## 23                      0.03728095    MI              0.022607225
## 24                      0.03955549    MN              0.027898300
## 25                      0.04083689    MO              0.117107736
## 26                      0.19721581    MS              0.002132480
## 27                      0.02654413    MT              0.096294940
## 28                      0.03045702    NC              0.032834595
## 29                      0.07873096    ND              0.077094364
## 30                      0.05092742    NE              0.034142782
## 31                      0.04652856    NH              0.024973322
## 32                      0.07546737    NJ              0.055392543
## 33                      0.07546737    NM              0.029058591
## 34                      0.03914030    NV              0.008903514
## 35                      0.07924585    NY              0.001773863
## 36                      0.05257658    OH              0.037382973
## 37                      0.05382625    OK              0.054951179
## 38                      0.15453009    OR              0.013926132
## 39                      0.04849363    PA              0.024844004
## 40                      0.08930026    RI              0.004632536
## 41                      0.05579846    SC              0.036367756
## 42                      0.15830266    SD              0.108983446
## 43                      0.09216993    TN              0.121822816
## 44                      0.05330863    TX              0.017610795
## 45                      0.11178120    UT              0.010321752
## 46                      0.04994783    VA              0.008781637
## 47                      0.09945029    VT              0.011033703
## 48                      0.04979514    WA              0.008914474
## 49                      0.07064199    WI              0.050818649
## 50                      0.14833283    WV              0.115359255
## 51                      0.08437517    WY              0.060416908
##    Total.Average.Error
## 1          0.019185046
## 2          0.030913037
## 3          0.093772941
## 4          0.011237566
## 5          0.023246256
## 6          0.009895999
## 7          0.006026772
## 8          0.160083590
## 9          0.006082512
## 10         0.011768863
## 11         0.006751146
## 12         0.026021898
## 13         0.027258293
## 14         0.037111722
## 15         0.003248294
## 16         0.025842978
## 17         0.025752984
## 18         0.065821285
## 19         0.060432652
## 20         0.002047710
## 21         0.006093317
## 22         0.024519983
## 23         0.022607225
## 24         0.027898300
## 25         0.117107736
## 26         0.002132480
## 27         0.096294940
## 28         0.032834595
## 29         0.077094364
## 30         0.034142782
## 31         0.024973322
## 32         0.055392543
## 33         0.029058591
## 34         0.008903514
## 35         0.001773863
## 36         0.037382973
## 37         0.054951179
## 38         0.013926132
## 39         0.024844004
## 40         0.004632536
## 41         0.036367756
## 42         0.108983446
## 43         0.121822816
## 44         0.017610795
## 45         0.010321752
## 46         0.008781637
## 47         0.011033703
## 48         0.008914474
## 49         0.050818649
## 50         0.115359255
## 51         0.060416908
\end{verbatim}
\end{kframe}
\end{knitrout}

3 weeks to go
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldata,} \hlnum{21} \hlopt{<}  \hlstd{polldata}\hlopt{$}\hlstd{EndDaysUntil)}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, polldata}\hlopt{$}\hlstd{EndDaysUntil} \hlopt{<} \hlnum{100}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2008"}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlstd{polls2008temp[}\hlkwd{complete.cases}\hlstd{(polls2008temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2008"}\hlstd{,} \hlstr{"McCain"}\hlstd{,} \hlstr{"observations"}\hlstd{,}\hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2012temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2012"}\hlstd{)}
\hlstd{polls2012temp} \hlkwb{=} \hlstd{polls2012temp[}\hlkwd{complete.cases}\hlstd{(polls2012temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2012"}\hlstd{,} \hlstr{"Romney"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2016temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2016"}\hlstd{)}
\hlstd{polls2016temp} \hlkwb{=} \hlstd{polls2016temp[}\hlkwd{complete.cases}\hlstd{(polls2016temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Trump"}\hlstd{,} \hlstr{"Clinton"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2008ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2008temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{9}\hlstd{,} \hlnum{10}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[,} \hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,}\hlnum{4}\hlopt{:}\hlnum{5}\hlstd{) ],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2012ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2012temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{34}\hlstd{,} \hlnum{35}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{35}\hlstd{,}  \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,}\hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{5}\hlopt{:}\hlnum{6}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2016ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2016temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{44}\hlstd{,} \hlnum{45}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{45}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}\hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{6}\hlopt{:}\hlnum{7}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{error2008ra_3W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2012ra_3W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2016ra_3W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlkwd{mean}\hlstd{(error2008ra_3W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.03465093
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_3W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.04376338
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_3W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.03442223
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2008ra_3W[error2008ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2008ra[, 1] \%in\% comp2008: object 'error2008ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_3W[error2012ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2012ra[, 1] \%in\% comp2012: object 'error2012ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_3W[error2016ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2016ra[, 1] \%in\% comp2016: object 'error2016ra' not found}}\begin{alltt}
\hlstd{cicoverage2008_3W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlstd{cicoverage2012_3W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlstd{cicoverage2016_3W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_3W, cicoverage2012_3W, cicoverage2016_3W))}
\end{alltt}
\begin{verbatim}
## [1] 0.8933333
\end{verbatim}
\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_3W, cicoverage2012_3W, cicoverage2016_3W)}
\end{alltt}
\begin{verbatim}
## [1] 0.92 0.84 0.92
\end{verbatim}
\begin{alltt}
\hlstd{cicoverage2008_3Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2008)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2008ratemp[, 1] \%in\% comp2008: object 'comp2008' not found}}\begin{alltt}
\hlstd{cicoverage2012_3Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2012)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2012ratemp[, 1] \%in\% comp2012: object 'comp2012' not found}}\begin{alltt}
\hlstd{cicoverage2016_3Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2016)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2016ratemp[, 1] \%in\% comp2016: object 'comp2016' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_3Wcomp, cicoverage2012_3Wcomp, cicoverage2016_3Wcomp))}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in mean(c(cicoverage2008\_3Wcomp, cicoverage2012\_3Wcomp, cicoverage2016\_3Wcomp)): object 'cicoverage2008\_3Wcomp' not found}}\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_3Wcomp, cicoverage2012_3Wcomp, cicoverage2016_3Wcomp)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): object 'cicoverage2008\_3Wcomp' not found}}\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008))}
\end{alltt}
\begin{verbatim}
##    polls2008ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.12208346    AK              0.042872602
## 2                       0.09533331    AL              0.008989376
## 3                       0.09633994    AR              0.063519411
## 4                       0.06295716    AZ              0.045446762
## 5                       0.08473132    CA              0.035763473
## 6                       0.04009710    CO              0.037806254
## 7                       0.04837026    CT              0.104167577
## 8                              NaN    DC                      NaN
## 9                       0.10396359    DE              0.064478585
## 10                      0.06683757    FL              0.028533333
## 11                      0.06844714    GA              0.036559109
## 12                      0.20323361    HI              0.078692752
## 13                      0.07765167    IA              0.001281397
## 14                      0.16188606    ID              0.007906686
## 15                      0.07458125    IL              0.035447878
## 16                      0.03331079    IN              0.018819345
## 17                      0.09924911    KS              0.005869073
## 18                      0.08276267    KY              0.007654620
## 19                      0.07252552    LA              0.027569912
## 20                      0.06840998    MA              0.039359694
## 21                      0.07792823    MD              0.050279893
## 22                      0.09172449    ME              0.032360275
## 23                      0.05467846    MI              0.061707598
## 24                      0.07431911    MN              0.009500243
## 25                      0.06850714    MO              0.017881387
## 26                      0.06017817    MS              0.008634080
## 27                      0.03998957    MT              0.021979410
## 28                      0.08015198    NC              0.030412198
## 29                      0.11968245    ND              0.023856207
## 30                      0.08552998    NE              0.015749066
## 31                      0.08153556    NH              0.044453924
## 32                      0.06205062    NJ              0.042618574
## 33                      0.04988497    NM              0.041368366
## 34                      0.08534818    NV              0.072798433
## 35                      0.09958377    NY              0.044892192
## 36                      0.06142719    OH              0.012493053
## 37                      0.16687280    OK              0.014111256
## 38                      0.04117058    OR              0.036188653
## 39                      0.06424283    PA              0.024007915
## 40                      0.08131352    RI              0.025689160
## 41                      0.08143608    SC              0.012386238
## 42                      0.08779631    SD              0.014856587
## 43                      0.09271951    TN              0.004715356
## 44                      0.11968245    TX              0.039129011
## 45                      0.14395515    UT              0.011436953
## 46                      0.07194248    VA              0.032074741
## 47                      0.16236311    VT              0.064243730
## 48                      0.04105428    WA              0.045367083
## 49                      0.03776102    WI              0.041357509
## 50                      0.11223182    WV              0.047360907
## 51                      0.14673253    WY              0.097898549
##    Total.Average.Error
## 1          0.042872602
## 2          0.008989376
## 3          0.063519411
## 4          0.045446762
## 5          0.035763473
## 6          0.037806254
## 7          0.104167577
## 8                  NaN
## 9          0.064478585
## 10         0.028533333
## 11         0.036559109
## 12         0.078692752
## 13         0.001281397
## 14         0.007906686
## 15         0.035447878
## 16         0.018819345
## 17         0.005869073
## 18         0.007654620
## 19         0.027569912
## 20         0.039359694
## 21         0.050279893
## 22         0.032360275
## 23         0.061707598
## 24         0.009500243
## 25         0.017881387
## 26         0.008634080
## 27         0.021979410
## 28         0.030412198
## 29         0.023856207
## 30         0.015749066
## 31         0.044453924
## 32         0.042618574
## 33         0.041368366
## 34         0.072798433
## 35         0.044892192
## 36         0.012493053
## 37         0.014111256
## 38         0.036188653
## 39         0.024007915
## 40         0.025689160
## 41         0.012386238
## 42         0.014856587
## 43         0.004715356
## 44         0.039129011
## 45         0.011436953
## 46         0.032074741
## 47         0.064243730
## 48         0.045367083
## 49         0.041357509
## 50         0.047360907
## 51         0.097898549
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012))}
\end{alltt}
\begin{verbatim}
##    polls2012ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.12716407    AK             0.0247415915
## 2                       0.12716407    AL             0.0637509720
## 3                       0.28848597    AR             0.0323020689
## 4                       0.06481644    AZ             0.0517842665
## 5                       0.06997179    CA             0.0103456839
## 6                       0.04256525    CO             0.0151389635
## 7                       0.05870610    CT             0.0234365700
## 8                              NaN    DC                      NaN
## 9                       0.10535564    DE             0.0530771254
## 10                      0.02848112    FL             0.0058099724
## 11                      0.07385150    GA             0.0077606805
## 12                      0.14013433    HI             0.1563181231
## 13                      0.05532613    IA             0.0078447730
## 14                      0.12716407    ID             0.1158025551
## 15                      0.09919393    IL             0.0234613769
## 16                      0.05517384    IN             0.0026731523
## 17                      0.06481644    KS             0.1167837317
## 18                      0.10535564    KY             0.1568201477
## 19                      0.10535564    LA             0.1288606799
## 20                      0.06676427    MA             0.0182181398
## 21                      0.10535564    MD             0.0918248341
## 22                      0.05882503    ME             0.0070851628
## 23                      0.04680066    MI             0.0021424409
## 24                      0.04622287    MN             0.0072596620
## 25                      0.09492808    MO             0.0137882820
## 26                      0.12716407    MS             0.0096076786
## 27                      0.10535564    MT             0.1117347424
## 28                      0.04637463    NC             0.0096124167
## 29                      0.06611741    ND             0.0129935436
## 30                      0.12716407    NE             0.0628825893
## 31                      0.05524380    NH             0.0004553563
## 32                      0.06277186    NJ             0.0162101211
## 33                      0.02481756    NM             0.0018744220
## 34                      0.04382359    NV             0.0118586903
## 35                      0.05595129    NY             0.0172263355
## 36                      0.03459643    OH             0.0172017294
## 37                      0.34307450    OK             0.0335336822
## 38                      0.04017332    OR             0.0125851094
## 39                      0.04851082    PA             0.0163082167
## 40                      0.06062542    RI             0.0407103939
## 41                      0.12716407    SC             0.0046712337
## 42                      0.10535564    SD             0.1335774152
## 43                      0.10535564    TN             0.1449031391
## 44                      0.10644400    TX             0.0639579617
## 45                      0.14489181    UT             0.0209624683
## 46                      0.06248843    VA             0.0071824688
## 47                      0.31418334    VT             0.0488377438
## 48                      0.02852368    WA             0.0135247429
## 49                      0.05039260    WI             0.0014754264
## 50                      0.16940925    WV             0.0740556005
## 51                      0.12716407    WY             0.1631950268
##    Total.Average.Error
## 1         0.0247415915
## 2         0.0637509720
## 3         0.0323020689
## 4         0.0517842665
## 5         0.0103456839
## 6         0.0151389635
## 7         0.0234365700
## 8                  NaN
## 9         0.0530771254
## 10        0.0058099724
## 11        0.0077606805
## 12        0.1563181231
## 13        0.0078447730
## 14        0.1158025551
## 15        0.0234613769
## 16        0.0026731523
## 17        0.1167837317
## 18        0.1568201477
## 19        0.1288606799
## 20        0.0182181398
## 21        0.0918248341
## 22        0.0070851628
## 23        0.0021424409
## 24        0.0072596620
## 25        0.0137882820
## 26        0.0096076786
## 27        0.1117347424
## 28        0.0096124167
## 29        0.0129935436
## 30        0.0628825893
## 31        0.0004553563
## 32        0.0162101211
## 33        0.0018744220
## 34        0.0118586903
## 35        0.0172263355
## 36        0.0172017294
## 37        0.0335336822
## 38        0.0125851094
## 39        0.0163082167
## 40        0.0407103939
## 41        0.0046712337
## 42        0.1335774152
## 43        0.1449031391
## 44        0.0639579617
## 45        0.0209624683
## 46        0.0071824688
## 47        0.0488377438
## 48        0.0135247429
## 49        0.0014754264
## 50        0.0740556005
## 51        0.1631950268
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016))}
\end{alltt}
\begin{verbatim}
##    polls2016ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.05487607    AK              0.026197981
## 2                       0.06527852    AL              0.040752929
## 3                       0.13034385    AR              0.096994523
## 4                       0.04258090    AZ              0.006649343
## 5                       0.12429374    CA              0.015358566
## 6                       0.05175484    CO              0.015570633
## 7                       0.04571410    CT              0.003321518
## 8                       0.23776203    DC              0.139579878
## 9                       0.05046615    DE              0.016375149
## 10                      0.04210071    FL              0.010434464
## 11                      0.02689073    GA              0.007628398
## 12                      0.08351026    HI              0.023149345
## 13                      0.04847016    IA              0.035727368
## 14                      0.05636970    ID              0.043212597
## 15                      0.09258185    IL              0.019254643
## 16                      0.09649112    IN              0.079044264
## 17                      0.04838468    KS              0.024769907
## 18                      0.10579146    KY              0.065979111
## 19                      0.07611740    LA              0.030987890
## 20                      0.09632105    MA              0.005770368
## 21                      0.09570701    MD              0.007496157
## 22                      0.06544207    ME              0.027975164
## 23                      0.05449237    MI              0.032096285
## 24                      0.03892430    MN              0.031734627
## 25                      0.03792873    MO              0.118059804
## 26                      0.07221829    MS              0.033267661
## 27                      0.05585176    MT              0.061072813
## 28                      0.03860951    NC              0.028779769
## 29                      0.14024693    ND              0.086917710
## 30                      0.04627062    NE              0.035124200
## 31                      0.06477678    NH              0.035973013
## 32                      0.05986792    NJ              0.002355572
## 33                      0.06757612    NM              0.003251826
## 34                      0.05364408    NV              0.016218176
## 35                      0.05403285    NY              0.008819316
## 36                      0.05245671    OH              0.033545349
## 37                      0.14024693    OK              0.081872653
## 38                      0.07816640    OR              0.001470420
## 39                      0.04250745    PA              0.037132869
## 40                      0.11290704    RI              0.013929958
## 41                      0.05522143    SC              0.035307336
## 42                      0.06121922    SD              0.091058861
## 43                      0.05231750    TN              0.059534327
## 44                      0.08636430    TX              0.022618644
## 45                      0.11966766    UT              0.017986470
## 46                      0.05473427    VA              0.010377316
## 47                      0.09877910    VT              0.001577871
## 48                      0.17090815    WA              0.010813593
## 49                      0.04968805    WI              0.024874964
## 50                      0.22976443    WV              0.117715593
## 51                      0.09561171    WY              0.064974218
##    Total.Average.Error
## 1          0.026197981
## 2          0.040752929
## 3          0.096994523
## 4          0.006649343
## 5          0.015358566
## 6          0.015570633
## 7          0.003321518
## 8          0.139579878
## 9          0.016375149
## 10         0.010434464
## 11         0.007628398
## 12         0.023149345
## 13         0.035727368
## 14         0.043212597
## 15         0.019254643
## 16         0.079044264
## 17         0.024769907
## 18         0.065979111
## 19         0.030987890
## 20         0.005770368
## 21         0.007496157
## 22         0.027975164
## 23         0.032096285
## 24         0.031734627
## 25         0.118059804
## 26         0.033267661
## 27         0.061072813
## 28         0.028779769
## 29         0.086917710
## 30         0.035124200
## 31         0.035973013
## 32         0.002355572
## 33         0.003251826
## 34         0.016218176
## 35         0.008819316
## 36         0.033545349
## 37         0.081872653
## 38         0.001470420
## 39         0.037132869
## 40         0.013929958
## 41         0.035307336
## 42         0.091058861
## 43         0.059534327
## 44         0.022618644
## 45         0.017986470
## 46         0.010377316
## 47         0.001577871
## 48         0.010813593
## 49         0.024874964
## 50         0.117715593
## 51         0.064974218
\end{verbatim}
\end{kframe}
\end{knitrout}


\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldata,} \hlnum{14} \hlopt{<}  \hlstd{polldata}\hlopt{$}\hlstd{EndDaysUntil)}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, polldata}\hlopt{$}\hlstd{EndDaysUntil} \hlopt{<} \hlnum{100}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2008"}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlstd{polls2008temp[}\hlkwd{complete.cases}\hlstd{(polls2008temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2008"}\hlstd{,} \hlstr{"McCain"}\hlstd{,} \hlstr{"observations"}\hlstd{,}\hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2012temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2012"}\hlstd{)}
\hlstd{polls2012temp} \hlkwb{=} \hlstd{polls2012temp[}\hlkwd{complete.cases}\hlstd{(polls2012temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2012"}\hlstd{,} \hlstr{"Romney"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2016temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2016"}\hlstd{)}
\hlstd{polls2016temp} \hlkwb{=} \hlstd{polls2016temp[}\hlkwd{complete.cases}\hlstd{(polls2016temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Trump"}\hlstd{,} \hlstr{"Clinton"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2008ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2008temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{9}\hlstd{,} \hlnum{10}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[,} \hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,}\hlnum{4}\hlopt{:}\hlnum{5}\hlstd{) ],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2012ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2012temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{34}\hlstd{,} \hlnum{35}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{35}\hlstd{,}  \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,}\hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{5}\hlopt{:}\hlnum{6}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2016ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2016temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{44}\hlstd{,} \hlnum{45}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{45}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}\hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{6}\hlopt{:}\hlnum{7}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{error2008ra_2W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2012ra_2W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2016ra_2W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlkwd{mean}\hlstd{(error2008ra_2W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.03248016
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_2W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.0368888
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_2W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.03466195
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2008ra_2W[error2008ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2008ra[, 1] \%in\% comp2008: object 'error2008ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_2W[error2012ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2012ra[, 1] \%in\% comp2012: object 'error2012ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_2W[error2016ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2016ra[, 1] \%in\% comp2016: object 'error2016ra' not found}}\begin{alltt}
\hlstd{cicoverage2008_2W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlstd{cicoverage2012_2W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlstd{cicoverage2016_2W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_2W, cicoverage2012_2W, cicoverage2016_2W))}
\end{alltt}
\begin{verbatim}
## [1] 0.9333333
\end{verbatim}
\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_2W, cicoverage2012_2W, cicoverage2016_2W)}
\end{alltt}
\begin{verbatim}
## [1] 0.94 0.96 0.90
\end{verbatim}
\begin{alltt}
\hlstd{cicoverage2008_2Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2008)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2008ratemp[, 1] \%in\% comp2008: object 'comp2008' not found}}\begin{alltt}
\hlstd{cicoverage2012_2Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2012)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2012ratemp[, 1] \%in\% comp2012: object 'comp2012' not found}}\begin{alltt}
\hlstd{cicoverage2016_2Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2016)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2016ratemp[, 1] \%in\% comp2016: object 'comp2016' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_2Wcomp, cicoverage2012_2Wcomp, cicoverage2016_2Wcomp))}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in mean(c(cicoverage2008\_2Wcomp, cicoverage2012\_2Wcomp, cicoverage2016\_2Wcomp)): object 'cicoverage2008\_2Wcomp' not found}}\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_2Wcomp, cicoverage2012_2Wcomp, cicoverage2016_2Wcomp)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): object 'cicoverage2008\_2Wcomp' not found}}\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008))}
\end{alltt}
\begin{verbatim}
##    polls2008ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.12530539    AK             3.817170e-02
## 2                       0.09389277    AL             9.071007e-03
## 3                       0.11251515    AR             7.820582e-02
## 4                       0.08397077    AZ             2.632189e-02
## 5                       0.07299710    CA             4.789560e-02
## 6                       0.03816642    CO             4.062481e-02
## 7                       0.05592669    CT             9.726402e-02
## 8                              NaN    DC                      NaN
## 9                       0.10557252    DE             6.551170e-02
## 10                      0.06618816    FL             1.439901e-02
## 11                      0.06671481    GA             3.630835e-02
## 12                      0.21601995    HI             8.087226e-02
## 13                      0.05402743    IA             4.736988e-04
## 14                      0.15408046    ID             6.941314e-03
## 15                      0.08190564    IL             3.148779e-02
## 16                      0.11251515    IN             2.873092e-02
## 17                      0.06629930    KS             7.041430e-03
## 18                      0.07386750    KY             6.986429e-03
## 19                      0.06844093    LA             2.467807e-02
## 20                      0.07133144    MA             3.933605e-02
## 21                      0.09709969    MD             5.721677e-02
## 22                      0.09035071    ME             3.445160e-02
## 23                      0.04897603    MI             7.240703e-02
## 24                      0.08981014    MN             5.316593e-03
## 25                      0.06732258    MO             1.562940e-02
## 26                      0.04715005    MS             9.492144e-03
## 27                      0.06619894    MT             1.892858e-02
## 28                      0.07538573    NC             1.861289e-02
## 29                      0.07588207    ND             2.420303e-02
## 30                      0.10471923    NE             1.312321e-02
## 31                      0.08172642    NH             4.416579e-02
## 32                      0.06353148    NJ             4.460669e-02
## 33                      0.06280030    NM             4.855174e-02
## 34                      0.08071901    NV             6.276362e-02
## 35                      0.07940657    NY             3.613443e-02
## 36                      0.05460647    OH             3.253992e-02
## 37                      0.11886130    OK             6.864618e-03
## 38                      0.04056586    OR             3.636232e-02
## 39                      0.04837736    PA             1.091792e-02
## 40                      0.19929144    RI             4.413269e-02
## 41                      0.15349852    SC             2.562678e-02
## 42                      0.11251515    SD             1.944569e-02
## 43                      0.08550489    TN             1.163278e-02
## 44                      0.06203570    TX             7.813974e-05
## 45                      0.14538235    UT             1.141287e-02
## 46                      0.05547627    VA             3.509254e-02
## 47                      0.09445360    VT             6.446127e-02
## 48                      0.05105431    WA             1.814241e-02
## 49                      0.05681792    WI             4.075978e-02
## 50                      0.09767632    WV             4.032674e-02
## 51                      0.10897089    WY             4.028619e-02
##    Total.Average.Error
## 1         3.817170e-02
## 2         9.071007e-03
## 3         7.820582e-02
## 4         2.632189e-02
## 5         4.789560e-02
## 6         4.062481e-02
## 7         9.726402e-02
## 8                  NaN
## 9         6.551170e-02
## 10        1.439901e-02
## 11        3.630835e-02
## 12        8.087226e-02
## 13        4.736988e-04
## 14        6.941314e-03
## 15        3.148779e-02
## 16        2.873092e-02
## 17        7.041430e-03
## 18        6.986429e-03
## 19        2.467807e-02
## 20        3.933605e-02
## 21        5.721677e-02
## 22        3.445160e-02
## 23        7.240703e-02
## 24        5.316593e-03
## 25        1.562940e-02
## 26        9.492144e-03
## 27        1.892858e-02
## 28        1.861289e-02
## 29        2.420303e-02
## 30        1.312321e-02
## 31        4.416579e-02
## 32        4.460669e-02
## 33        4.855174e-02
## 34        6.276362e-02
## 35        3.613443e-02
## 36        3.253992e-02
## 37        6.864618e-03
## 38        3.636232e-02
## 39        1.091792e-02
## 40        4.413269e-02
## 41        2.562678e-02
## 42        1.944569e-02
## 43        1.163278e-02
## 44        7.813974e-05
## 45        1.141287e-02
## 46        3.509254e-02
## 47        6.446127e-02
## 48        1.814241e-02
## 49        4.075978e-02
## 50        4.032674e-02
## 51        4.028619e-02
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012))}
\end{alltt}
\begin{verbatim}
##    polls2012ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.12686903    AK             0.0336033183
## 2                       0.12686903    AL             0.0726126988
## 3                       0.25679714    AR             0.0280643093
## 4                       0.05414426    AZ             0.0110891225
## 5                       0.07360111    CA             0.0189284375
## 6                       0.02571845    CO             0.0167973187
## 7                       0.06175186    CT             0.0261468916
## 8                              NaN    DC                      NaN
## 9                       0.11527874    DE             0.0718200609
## 10                      0.03556885    FL             0.0020849227
## 11                      0.06801708    GA             0.0114976061
## 12                      0.25981321    HI             0.0908437225
## 13                      0.05594425    IA             0.0160831674
## 14                      0.12686903    ID             0.1246642819
## 15                      0.06558644    IL             0.0202687592
## 16                      0.05548232    IN             0.0006706264
## 17                      0.27364762    KS             0.0406806340
## 18                      0.22148813    KY             0.0838781883
## 19                      0.19673949    LA             0.0354738674
## 20                      0.08007524    MA             0.0074571674
## 21                      0.11527874    MD             0.1105677695
## 22                      0.11527874    ME             0.0559497256
## 23                      0.04940367    MI             0.0042981276
## 24                      0.04427720    MN             0.0084101679
## 25                      0.05929130    MO             0.0277733800
## 26                      0.16931880    MS             0.0020186372
## 27                      0.17305979    MT             0.0435041509
## 28                      0.04811049    NC             0.0074198193
## 29                      0.12686903    ND             0.0615624964
## 30                      0.06112758    NE             0.0404847014
## 31                      0.08071002    NH             0.0140652582
## 32                      0.06403289    NJ             0.0215150814
## 33                      0.04263045    NM             0.0043447658
## 34                      0.04972426    NV             0.0140151643
## 35                      0.10055987    NY             0.0243677623
## 36                      0.04297580    OH             0.0094120577
## 37                      0.12686903    OK             0.1281736109
## 38                      0.03779820    OR             0.0144956905
## 39                      0.04444571    PA             0.0176315555
## 40                      0.07930961    RI             0.0190399077
## 41                      0.08731406    SC             0.0304201423
## 42                      0.11478585    SD             0.0507899814
## 43                      0.11658554    TN             0.0540111126
## 44                      0.07343647    TX             0.0175607664
## 45                      0.14474702    UT             0.0202442585
## 46                      0.05640501    VA             0.0070247310
## 47                      0.33954734    VT             0.0509315628
## 48                      0.04035480    WA             0.0148761408
## 49                      0.04667277    WI             0.0116060499
## 50                      0.15752853    WV             0.0732037201
## 51                      0.12686903    WY             0.1720567536
##    Total.Average.Error
## 1         0.0336033183
## 2         0.0726126988
## 3         0.0280643093
## 4         0.0110891225
## 5         0.0189284375
## 6         0.0167973187
## 7         0.0261468916
## 8                  NaN
## 9         0.0718200609
## 10        0.0020849227
## 11        0.0114976061
## 12        0.0908437225
## 13        0.0160831674
## 14        0.1246642819
## 15        0.0202687592
## 16        0.0006706264
## 17        0.0406806340
## 18        0.0838781883
## 19        0.0354738674
## 20        0.0074571674
## 21        0.1105677695
## 22        0.0559497256
## 23        0.0042981276
## 24        0.0084101679
## 25        0.0277733800
## 26        0.0020186372
## 27        0.0435041509
## 28        0.0074198193
## 29        0.0615624964
## 30        0.0404847014
## 31        0.0140652582
## 32        0.0215150814
## 33        0.0043447658
## 34        0.0140151643
## 35        0.0243677623
## 36        0.0094120577
## 37        0.1281736109
## 38        0.0144956905
## 39        0.0176315555
## 40        0.0190399077
## 41        0.0304201423
## 42        0.0507899814
## 43        0.0540111126
## 44        0.0175607664
## 45        0.0202442585
## 46        0.0070247310
## 47        0.0509315628
## 48        0.0148761408
## 49        0.0116060499
## 50        0.0732037201
## 51        0.1720567536
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016))}
\end{alltt}
\begin{verbatim}
##    polls2016ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.05364152    AK              0.026543747
## 2                       0.04808329    AL              0.041838286
## 3                       0.13999247    AR              0.106511889
## 4                       0.02873310    AZ              0.005841033
## 5                       0.11161792    CA              0.018964022
## 6                       0.07677809    CO              0.012668088
## 7                       0.04166739    CT              0.001519491
## 8                       0.07952414    DC              0.338614376
## 9                       0.05459149    DE              0.015944827
## 10                      0.04544123    FL              0.010036251
## 11                      0.03720243    GA              0.001745085
## 12                      0.08926530    HI              0.033022872
## 13                      0.06316669    IA              0.037486150
## 14                      0.06202919    ID              0.047236121
## 15                      0.18162850    IL              0.016609726
## 16                      0.06585290    IN              0.032368152
## 17                      0.04951526    KS              0.026171369
## 18                      0.06185331    KY              0.064800804
## 19                      0.07873178    LA              0.139427949
## 20                      0.09085069    MA              0.003959615
## 21                      0.10209317    MD              0.007929212
## 22                      0.06562872    ME              0.027448694
## 23                      0.04141599    MI              0.026271566
## 24                      0.04680337    MN              0.033968563
## 25                      0.03217003    MO              0.117399415
## 26                      0.07043053    MS              0.026829323
## 27                      0.04540742    MT              0.045564253
## 28                      0.04055298    NC              0.028696583
## 29                      0.11318904    ND              0.076342865
## 30                      0.05044828    NE              0.037370568
## 31                      0.05159932    NH              0.025818266
## 32                      0.07605071    NJ              0.018194215
## 33                      0.04832699    NM              0.007384279
## 34                      0.04034160    NV              0.007364527
## 35                      0.04838407    NY              0.006813316
## 36                      0.05426919    OH              0.034167794
## 37                      0.06946750    OK              0.065751626
## 38                      0.07072314    OR              0.004555067
## 39                      0.04830662    PA              0.038317749
## 40                      0.05204181    RI              0.001910408
## 41                      0.05428795    SC              0.035294445
## 42                      0.07236500    SD              0.084414601
## 43                      0.09617074    TN              0.041383664
## 44                      0.07467353    TX              0.028518856
## 45                      0.12390965    UT              0.021280471
## 46                      0.06055762    VA              0.012664793
## 47                      0.09327348    VT              0.008117074
## 48                      0.06079631    WA              0.011688060
## 49                      0.05002460    WI              0.027321692
## 50                      0.15073941    WV              0.117312380
## 51                      0.06823043    WY              0.064307488
##    Total.Average.Error
## 1          0.026543747
## 2          0.041838286
## 3          0.106511889
## 4          0.005841033
## 5          0.018964022
## 6          0.012668088
## 7          0.001519491
## 8          0.338614376
## 9          0.015944827
## 10         0.010036251
## 11         0.001745085
## 12         0.033022872
## 13         0.037486150
## 14         0.047236121
## 15         0.016609726
## 16         0.032368152
## 17         0.026171369
## 18         0.064800804
## 19         0.139427949
## 20         0.003959615
## 21         0.007929212
## 22         0.027448694
## 23         0.026271566
## 24         0.033968563
## 25         0.117399415
## 26         0.026829323
## 27         0.045564253
## 28         0.028696583
## 29         0.076342865
## 30         0.037370568
## 31         0.025818266
## 32         0.018194215
## 33         0.007384279
## 34         0.007364527
## 35         0.006813316
## 36         0.034167794
## 37         0.065751626
## 38         0.004555067
## 39         0.038317749
## 40         0.001910408
## 41         0.035294445
## 42         0.084414601
## 43         0.041383664
## 44         0.028518856
## 45         0.021280471
## 46         0.012664793
## 47         0.008117074
## 48         0.011688060
## 49         0.027321692
## 50         0.117312380
## 51         0.064307488
\end{verbatim}
\end{kframe}
\end{knitrout}


One week
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldata,} \hlnum{7} \hlopt{<}  \hlstd{polldata}\hlopt{$}\hlstd{EndDaysUntil)}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, polldata}\hlopt{$}\hlstd{EndDaysUntil} \hlopt{<} \hlnum{100}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2008"}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlstd{polls2008temp[}\hlkwd{complete.cases}\hlstd{(polls2008temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2008"}\hlstd{,} \hlstr{"McCain"}\hlstd{,} \hlstr{"observations"}\hlstd{,}\hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2012temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2012"}\hlstd{)}
\hlstd{polls2012temp} \hlkwb{=} \hlstd{polls2012temp[}\hlkwd{complete.cases}\hlstd{(polls2012temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2012"}\hlstd{,} \hlstr{"Romney"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2016temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2016"}\hlstd{)}
\hlstd{polls2016temp} \hlkwb{=} \hlstd{polls2016temp[}\hlkwd{complete.cases}\hlstd{(polls2016temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Trump"}\hlstd{,} \hlstr{"Clinton"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2008ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2008temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{9}\hlstd{,} \hlnum{10}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[,} \hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,}\hlnum{4}\hlopt{:}\hlnum{5}\hlstd{) ],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2012ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2012temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{34}\hlstd{,} \hlnum{35}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{35}\hlstd{,}  \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,}\hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{5}\hlopt{:}\hlnum{6}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2016ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2016temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{44}\hlstd{,} \hlnum{45}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{45}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}\hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{6}\hlopt{:}\hlnum{7}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{error2008ra_1W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2012ra_1W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2016ra_1W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlkwd{mean}\hlstd{(error2008ra_1W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.04152213
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_1W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.03810961
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_1W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.03190841
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2008ra_1W[error2008ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2008ra[, 1] \%in\% comp2008: object 'error2008ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_1W[error2012ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2012ra[, 1] \%in\% comp2012: object 'error2012ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_1W[error2016ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2016ra[, 1] \%in\% comp2016: object 'error2016ra' not found}}\begin{alltt}
\hlstd{cicoverage2008_1W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlstd{cicoverage2012_1W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlstd{cicoverage2016_1W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_1W, cicoverage2012_1W, cicoverage2016_1W))}
\end{alltt}
\begin{verbatim}
## [1] NA
\end{verbatim}
\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_1W, cicoverage2012_1W, cicoverage2016_1W)}
\end{alltt}
\begin{verbatim}
## [1] 0.88   NA 0.90
\end{verbatim}
\begin{alltt}
\hlstd{cicoverage2008_1Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2008)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2008ratemp[, 1] \%in\% comp2008: object 'comp2008' not found}}\begin{alltt}
\hlstd{cicoverage2012_1Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2012)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2012ratemp[, 1] \%in\% comp2012: object 'comp2012' not found}}\begin{alltt}
\hlstd{cicoverage2016_1Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2016)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2016ratemp[, 1] \%in\% comp2016: object 'comp2016' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_1Wcomp, cicoverage2012_1Wcomp, cicoverage2016_1Wcomp))}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in mean(c(cicoverage2008\_1Wcomp, cicoverage2012\_1Wcomp, cicoverage2016\_1Wcomp)): object 'cicoverage2008\_1Wcomp' not found}}\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_1Wcomp, cicoverage2012_1Wcomp, cicoverage2016_1Wcomp)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): object 'cicoverage2008\_1Wcomp' not found}}\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008))}
\end{alltt}
\begin{verbatim}
##    polls2008ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.12607354    AK             3.928197e-02
## 2                       0.09578293    AL             3.782970e-03
## 3                       0.11211762    AR             8.175201e-02
## 4                       0.07298957    AZ             1.896908e-02
## 5                       0.08102391    CA             4.228567e-02
## 6                       0.04940111    CO             3.627713e-02
## 7                       0.05365991    CT             1.060855e-01
## 8                              NaN    DC                      NaN
## 9                       0.10215803    DE             6.424435e-02
## 10                      0.07156296    FL             2.579086e-02
## 11                      0.03543786    GA             3.447902e-03
## 12                      0.09172282    HI             1.896132e-01
## 13                      0.05412364    IA             9.630252e-04
## 14                      0.14860334    ID             6.858527e-02
## 15                      0.08900853    IL             2.939156e-02
## 16                      0.03516711    IN             2.048356e-02
## 17                      0.09989873    KS             5.748051e-03
## 18                      0.07288051    KY             7.245938e-04
## 19                      0.11211762    LA             7.460655e-02
## 20                      0.10051040    MA             5.594387e-02
## 21                      0.09172282    MD             8.897684e-02
## 22                      0.09885135    ME             2.548524e-02
## 23                      0.04836392    MI             6.757096e-02
## 24                      0.07420460    MN             1.850448e-03
## 25                      0.09296556    MO             1.896216e-02
## 26                      0.04880590    MS             1.114726e-02
## 27                      0.06464242    MT             1.932682e-02
## 28                      0.06685801    NC             1.387335e-02
## 29                      0.07434684    ND             2.456119e-02
## 30                      0.07938726    NE             2.388152e-02
## 31                      0.07654886    NH             4.436929e-02
## 32                      0.06201726    NJ             4.007802e-02
## 33                      0.06095832    NM             4.771196e-02
## 34                      0.05405601    NV             7.334292e-02
## 35                      0.07957859    NY             6.673919e-02
## 36                      0.06081209    OH             2.642728e-02
## 37                      0.12474122    OK             6.189766e-03
## 38                      0.09172282    OR             4.381318e-02
## 39                      0.06669142    PA             2.122482e-02
## 40                      0.09172282    RI             1.016573e-01
## 41                      0.14860334    SC             1.621633e-02
## 42                      0.07950738    SD             1.198278e-02
## 43                      0.07142038    TN             7.544626e-03
## 44                      0.06279520    TX             2.404018e-05
## 45                      0.16694672    UT             9.172497e-03
## 46                      0.05492653    VA             3.453415e-02
## 47                      0.13429769    VT             1.363584e-01
## 48                      0.09585088    WA             4.525952e-02
## 49                      0.04641130    WI             3.663167e-02
## 50                      0.09191671    WV             3.925642e-02
## 51                      0.14860334    WY             1.039596e-01
##    Total.Average.Error
## 1         3.928197e-02
## 2         3.782970e-03
## 3         8.175201e-02
## 4         1.896908e-02
## 5         4.228567e-02
## 6         3.627713e-02
## 7         1.060855e-01
## 8                  NaN
## 9         6.424435e-02
## 10        2.579086e-02
## 11        3.447902e-03
## 12        1.896132e-01
## 13        9.630252e-04
## 14        6.858527e-02
## 15        2.939156e-02
## 16        2.048356e-02
## 17        5.748051e-03
## 18        7.245938e-04
## 19        7.460655e-02
## 20        5.594387e-02
## 21        8.897684e-02
## 22        2.548524e-02
## 23        6.757096e-02
## 24        1.850448e-03
## 25        1.896216e-02
## 26        1.114726e-02
## 27        1.932682e-02
## 28        1.387335e-02
## 29        2.456119e-02
## 30        2.388152e-02
## 31        4.436929e-02
## 32        4.007802e-02
## 33        4.771196e-02
## 34        7.334292e-02
## 35        6.673919e-02
## 36        2.642728e-02
## 37        6.189766e-03
## 38        4.381318e-02
## 39        2.122482e-02
## 40        1.016573e-01
## 41        1.621633e-02
## 42        1.198278e-02
## 43        7.544626e-03
## 44        2.404018e-05
## 45        9.172497e-03
## 46        3.453415e-02
## 47        1.363584e-01
## 48        4.525952e-02
## 49        3.663167e-02
## 50        3.925642e-02
## 51        1.039596e-01
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012))}
\end{alltt}
\begin{verbatim}
##    polls2012ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.11728271    AK             0.0306296827
## 2                       0.11728271    AL             0.0696390632
## 3                       0.26663784    AR             0.0316677841
## 4                       0.05657753    AZ             0.0142050562
## 5                       0.06311718    CA             0.0162866471
## 6                       0.05510809    CO             0.0093188303
## 7                       0.04381219    CT             0.0312331031
## 8                               NA    DC             0.0092098254
## 9                       0.12024499    DE             0.0593879928
## 10                      0.03202757    FL             0.0067379460
## 11                      0.06696686    GA             0.0072062352
## 12                      0.09405156    HI             0.1491136897
## 13                      0.05909216    IA             0.0100481760
## 14                      0.11728271    ID             0.1216906463
## 15                      0.13874041    IL             0.0152534713
## 16                      0.04846826    IN             0.0032052989
## 17                      0.28166922    KS             0.0418977182
## 18                      0.25243117    KY             0.0884634544
## 19                      0.21929519    LA             0.0372337475
## 20                      0.06214228    MA             0.0094810390
## 21                      0.06982796    MD             0.0286745301
## 22                      0.05706001    ME             0.0012611322
## 23                      0.04821110    MI             0.0030766945
## 24                      0.04309791    MN             0.0106587976
## 25                      0.09093799    MO             0.0121790068
## 26                      0.15606930    MS             0.0007807281
## 27                      0.12024499    MT             0.1054238751
## 28                      0.03212894    NC             0.0092247898
## 29                      0.07445593    ND             0.0355064444
## 30                      0.11728271    NE             0.0687706806
## 31                      0.05842126    NH             0.0015161359
## 32                      0.06095133    NJ             0.0200424397
## 33                      0.04799961    NM             0.0016711654
## 34                      0.03715549    NV             0.0129490320
## 35                      0.05154617    NY             0.0250244056
## 36                      0.03670168    OH             0.0073015123
## 37                      0.21059842    OK             0.0323224312
## 38                      0.03967013    OR             0.0220260151
## 39                      0.04901531    PA             0.0156892790
## 40                      0.05729352    RI             0.0195939090
## 41                      0.09327935    SC             0.0308250902
## 42                      0.12584735    SD             0.0538697614
## 43                      0.22536618    TN             0.0555277395
## 44                      0.07820015    TX             0.0745133566
## 45                              NA    UT             0.0760491230
## 46                      0.06002513    VA             0.0065286582
## 47                      0.32244799    VT             0.0422691167
## 48                      0.03998373    WA             0.0033895091
## 49                      0.05244167    WI             0.0023644846
## 50                      0.09405156    WV             0.2046677716
## 51                      0.11728271    WY             0.1690831180
##    Total.Average.Error
## 1         0.0306296827
## 2         0.0696390632
## 3         0.0316677841
## 4         0.0142050562
## 5         0.0162866471
## 6         0.0093188303
## 7         0.0312331031
## 8         0.0092098254
## 9         0.0593879928
## 10        0.0067379460
## 11        0.0072062352
## 12        0.1491136897
## 13        0.0100481760
## 14        0.1216906463
## 15        0.0152534713
## 16        0.0032052989
## 17        0.0418977182
## 18        0.0884634544
## 19        0.0372337475
## 20        0.0094810390
## 21        0.0286745301
## 22        0.0012611322
## 23        0.0030766945
## 24        0.0106587976
## 25        0.0121790068
## 26        0.0007807281
## 27        0.1054238751
## 28        0.0092247898
## 29        0.0355064444
## 30        0.0687706806
## 31        0.0015161359
## 32        0.0200424397
## 33        0.0016711654
## 34        0.0129490320
## 35        0.0250244056
## 36        0.0073015123
## 37        0.0323224312
## 38        0.0220260151
## 39        0.0156892790
## 40        0.0195939090
## 41        0.0308250902
## 42        0.0538697614
## 43        0.0555277395
## 44        0.0745133566
## 45        0.0760491230
## 46        0.0065286582
## 47        0.0422691167
## 48        0.0033895091
## 49        0.0023644846
## 50        0.2046677716
## 51        0.1690831180
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016))}
\end{alltt}
\begin{verbatim}
##    polls2016ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.05432823    AK             0.0265112552
## 2                       0.04813886    AL             0.0413086384
## 3                       0.11616330    AR             0.0779962929
## 4                       0.03397044    AZ             0.0013556134
## 5                       0.08673077    CA             0.0332382093
## 6                       0.06792463    CO             0.0054544349
## 7                       0.04534434    CT             0.0054429799
## 8                       0.23163564    DC             0.0504203174
## 9                       0.18774827    DE             0.0067713377
## 10                      0.04605912    FL             0.0098921495
## 11                      0.04130531    GA             0.0054093172
## 12                      0.07472743    HI             0.0320075882
## 13                      0.05065630    IA             0.0437967670
## 14                      0.06459301    ID             0.0486684895
## 15                      0.10043883    IL             0.0229192130
## 16                      0.05969353    IN             0.0222030364
## 17                      0.04844586    KS             0.0265260404
## 18                      0.07156620    KY             0.0591441327
## 19                      0.08382794    LA             0.0267542229
## 20                      0.09096648    MA             0.0005391619
## 21                      0.09659681    MD             0.0103114108
## 22                      0.05465936    ME             0.0337961773
## 23                      0.03355269    MI             0.0208687233
## 24                      0.04541368    MN             0.0356886044
## 25                      0.03947796    MO             0.1257344733
## 26                      0.07277627    MS             0.0257258538
## 27                      0.04495648    MT             0.0453401231
## 28                      0.04382137    NC             0.0286007956
## 29                      0.05655014    ND             0.0761742265
## 30                      0.05141665    NE             0.0373371146
## 31                      0.06152017    NH             0.0277730960
## 32                      0.08211379    NJ             0.0168376683
## 33                      0.05173013    NM             0.0064796498
## 34                      0.04286596    NV             0.0051192990
## 35                      0.05242216    NY             0.0135473776
## 36                      0.05450604    OH             0.0353611862
## 37                      0.06839740    OK             0.0652552000
## 38                      0.06787090    OR             0.0096129174
## 39                      0.04138903    PA             0.0416889810
## 40                      0.07710283    RI             0.0015152624
## 41                      0.04654626    SC             0.0383562443
## 42                      0.09274792    SD             0.0666791039
## 43                      0.04778326    TN             0.0625375611
## 44                      0.08390385    TX             0.0249623186
## 45                      0.12103113    UT             0.0149691689
## 46                      0.06254195    VA             0.0108220158
## 47                      0.09280590    VT             0.0033730555
## 48                      0.06102785    WA             0.0159843451
## 49                      0.04800754    WI             0.0272288329
## 50                      0.16029459    WV             0.1086070147
## 51                      0.07139480    WY             0.0631937006
##    Total.Average.Error
## 1         0.0265112552
## 2         0.0413086384
## 3         0.0779962929
## 4         0.0013556134
## 5         0.0332382093
## 6         0.0054544349
## 7         0.0054429799
## 8         0.0504203174
## 9         0.0067713377
## 10        0.0098921495
## 11        0.0054093172
## 12        0.0320075882
## 13        0.0437967670
## 14        0.0486684895
## 15        0.0229192130
## 16        0.0222030364
## 17        0.0265260404
## 18        0.0591441327
## 19        0.0267542229
## 20        0.0005391619
## 21        0.0103114108
## 22        0.0337961773
## 23        0.0208687233
## 24        0.0356886044
## 25        0.1257344733
## 26        0.0257258538
## 27        0.0453401231
## 28        0.0286007956
## 29        0.0761742265
## 30        0.0373371146
## 31        0.0277730960
## 32        0.0168376683
## 33        0.0064796498
## 34        0.0051192990
## 35        0.0135473776
## 36        0.0353611862
## 37        0.0652552000
## 38        0.0096129174
## 39        0.0416889810
## 40        0.0015152624
## 41        0.0383562443
## 42        0.0666791039
## 43        0.0625375611
## 44        0.0249623186
## 45        0.0149691689
## 46        0.0108220158
## 47        0.0033730555
## 48        0.0159843451
## 49        0.0272288329
## 50        0.1086070147
## 51        0.0631937006
\end{verbatim}
\end{kframe}
\end{knitrout}


Last week
\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{polldatatemp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, polldata}\hlopt{$}\hlstd{EndDaysUntil} \hlopt{<} \hlnum{100}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2008"}\hlstd{)}
\hlstd{polls2008temp} \hlkwb{=} \hlstd{polls2008temp[}\hlkwd{complete.cases}\hlstd{(polls2008temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2008"}\hlstd{,} \hlstr{"McCain"}\hlstd{,} \hlstr{"observations"}\hlstd{,}\hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2012temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2012"}\hlstd{)}
\hlstd{polls2012temp} \hlkwb{=} \hlstd{polls2012temp[}\hlkwd{complete.cases}\hlstd{(polls2012temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Obama2012"}\hlstd{,} \hlstr{"Romney"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2016temp} \hlkwb{=} \hlkwd{subset}\hlstd{(polldatatemp, Year} \hlopt{==} \hlstr{"2016"}\hlstd{)}
\hlstd{polls2016temp} \hlkwb{=} \hlstd{polls2016temp[}\hlkwd{complete.cases}\hlstd{(polls2016temp[,} \hlkwd{c}\hlstd{(}\hlstr{"Trump"}\hlstd{,} \hlstr{"Clinton"}\hlstd{,} \hlstr{"observations"}\hlstd{,} \hlstr{"end_date"}\hlstd{)]),]}
\hlstd{polls2008ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2008temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{9}\hlstd{,} \hlnum{10}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[,} \hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,}\hlnum{4}\hlopt{:}\hlnum{5}\hlstd{) ],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2012ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2012temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{34}\hlstd{,} \hlnum{35}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{35}\hlstd{,}  \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}  \hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,}\hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,}  \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{5}\hlopt{:}\hlnum{6}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{polls2016ratemp} \hlkwb{=} \hlkwd{noniterativegaussianmodelprop}\hlstd{(polls2016temp,} \hlkwc{stateloc} \hlstd{=} \hlnum{17}\hlstd{,} \hlkwc{proploc} \hlstd{=} \hlkwd{c}\hlstd{(}\hlnum{44}\hlstd{,} \hlnum{45}\hlstd{),} \hlkwc{candidateloc} \hlstd{=} \hlnum{45}\hlstd{,} \hlkwc{nloc} \hlstd{=} \hlnum{12}\hlstd{,} \hlkwc{dateloc} \hlstd{=} \hlnum{5}\hlstd{,} \hlkwc{idloc} \hlstd{=} \hlnum{1}\hlstd{,}\hlkwc{npolls} \hlstd{=} \hlnum{10}\hlstd{,} \hlkwc{invgamma} \hlstd{= T,} \hlkwc{v0}\hlstd{=}\hlnum{1}\hlstd{,} \hlkwc{a0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{b0}\hlstd{=}\hlnum{0.0001}\hlstd{,} \hlkwc{election_data} \hlstd{= electdata[}\hlkwd{c}\hlstd{(}\hlnum{1}\hlstd{,} \hlnum{6}\hlopt{:}\hlnum{7}\hlstd{)],} \hlkwc{cutoffs} \hlstd{=} \hlkwd{c}\hlstd{(}\hlopt{-}\hlnum{.25}\hlstd{,} \hlopt{-}\hlnum{.125}\hlstd{,} \hlopt{-}\hlnum{0.075}\hlstd{,} \hlnum{0.075}\hlstd{,} \hlnum{.125}\hlstd{,} \hlnum{.25}\hlstd{))}
\hlstd{error2008ra_0W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2012ra_0W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlstd{error2016ra_0W} \hlkwb{=} \hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{, ])}
\hlkwd{mean}\hlstd{(error2008ra_0W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.04807705
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_0W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.05246429
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_0W[,}\hlnum{2}\hlstd{])}
\end{alltt}
\begin{verbatim}
## [1] 0.03446773
\end{verbatim}
\begin{alltt}
\hlkwd{mean}\hlstd{(error2008ra_0W[error2008ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2008ra[, 1] \%in\% comp2008: object 'error2008ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2012ra_0W[error2012ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2012ra[, 1] \%in\% comp2012: object 'error2012ra' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(error2016ra_0W[error2016ra[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,}\hlnum{2}\hlstd{])}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in error2016ra[, 1] \%in\% comp2016: object 'error2016ra' not found}}\begin{alltt}
\hlstd{cicoverage2008_0W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlstd{cicoverage2012_0W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlstd{cicoverage2016_0W} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error[}\hlopt{-}\hlnum{8}\hlstd{]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[}\hlopt{-}\hlnum{8}\hlstd{,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[}\hlopt{-}\hlnum{8}\hlstd{,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlnum{50}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_0W, cicoverage2012_0W, cicoverage2016_0W))}
\end{alltt}
\begin{verbatim}
## [1] NA
\end{verbatim}
\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_0W, cicoverage2012_0W, cicoverage2016_0W)}
\end{alltt}
\begin{verbatim}
## [1] 0.78   NA 0.90
\end{verbatim}
\begin{alltt}
\hlstd{cicoverage2008_0Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,}\hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008[polls2008ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2008,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2008)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2008ratemp[, 1] \%in\% comp2008: object 'comp2008' not found}}\begin{alltt}
\hlstd{cicoverage2012_0Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012[polls2012ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2012,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2012)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2012ratemp[, 1] \%in\% comp2012: object 'comp2012' not found}}\begin{alltt}
\hlstd{cicoverage2016_0Wcomp} \hlkwb{=} \hlkwd{sum}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016]}\hlopt{>}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016[polls2016ratemp[,}\hlnum{1} \hlstd{]} \hlopt{%in%} \hlstd{comp2016,])[,}\hlnum{2}\hlstd{])}\hlopt{/}\hlkwd{length}\hlstd{(comp2016)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in polls2016ratemp[, 1] \%in\% comp2016: object 'comp2016' not found}}\begin{alltt}
\hlkwd{mean}\hlstd{(}\hlkwd{c}\hlstd{(cicoverage2008_0Wcomp, cicoverage2012_0Wcomp, cicoverage2016_0Wcomp))}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in mean(c(cicoverage2008\_0Wcomp, cicoverage2012\_0Wcomp, cicoverage2016\_0Wcomp)): object 'cicoverage2008\_0Wcomp' not found}}\begin{alltt}
\hlkwd{c}\hlstd{(cicoverage2008_0Wcomp, cicoverage2012_0Wcomp, cicoverage2016_0Wcomp)}
\end{alltt}


{\ttfamily\noindent\bfseries\color{errorcolor}{\#\# Error in eval(expr, envir, enclos): object 'cicoverage2008\_0Wcomp' not found}}\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2008ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2008ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2008))}
\end{alltt}
\begin{verbatim}
##    polls2008ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.17183502    AK             0.0608132694
## 2                       0.09517323    AL             0.0045671404
## 3                       0.10910594    AR             0.0804806532
## 4                       0.07216021    AZ             0.0170561026
## 5                       0.05792405    CA             0.0632638375
## 6                       0.04980828    CO             0.0339373150
## 7                       0.07243580    CT             0.1021867879
## 8                              NaN    DC                      NaN
## 9                       0.10337351    DE             0.0644939142
## 10                      0.05456394    FL             0.0141825980
## 11                      0.03480022    GA             0.0031134806
## 12                      0.08577442    HI             0.2026392007
## 13                      0.05600484    IA             0.0023479861
## 14                      0.17183502    ID             0.0804113183
## 15                      0.11696006    IL             0.1051016333
## 16                      0.03263951    IN             0.0195166581
## 17                      0.09919880    KS             0.0059473340
## 18                      0.06949506    KY             0.0002335441
## 19                      0.10910594    LA             0.0733351887
## 20                      0.08577442    MA             0.1046727241
## 21                      0.08577442    MD             0.1020028148
## 22                      0.10910594    ME             0.1095318028
## 23                      0.04673746    MI             0.0623662243
## 24                      0.09683251    MN             0.0243220594
## 25                      0.08187587    MO             0.0240247563
## 26                      0.04668843    MS             0.0098456670
## 27                      0.06508144    MT             0.0187074589
## 28                      0.04354360    NC             0.0106495235
## 29                      0.09979193    ND             0.0308847984
## 30                      0.17183502    NE             0.0262561645
## 31                      0.11569355    NH             0.0045115022
## 32                      0.07496922    NJ             0.0355289246
## 33                      0.05772331    NM             0.0528296392
## 34                      0.05443633    NV             0.0726474250
## 35                      0.07010171    NY             0.0702876940
## 36                      0.06118523    OH             0.0235688721
## 37                      0.12005465    OK             0.0054625977
## 38                      0.08577442    OR             0.0568391537
## 39                      0.05344035    PA             0.0317385628
## 40                      0.08577442    RI             0.1146833170
## 41                      0.17183502    SC             0.0043902879
## 42                      0.10910594    SD             0.0217205194
## 43                      0.07062721    TN             0.0077910708
## 44                      0.05649187    TX             0.0031127638
## 45                      0.18462812    UT             0.0067475741
## 46                      0.05307667    VA             0.0220169831
## 47                      0.11696006    VT             0.1667508102
## 48                      0.10118438    WA             0.0466668083
## 49                      0.05322030    WI             0.0450355590
## 50                      0.08793948    WV             0.0388450472
## 51                      0.17183502    WY             0.1157856538
##    Total.Average.Error
## 1         0.0608132694
## 2         0.0045671404
## 3         0.0804806532
## 4         0.0170561026
## 5         0.0632638375
## 6         0.0339373150
## 7         0.1021867879
## 8                  NaN
## 9         0.0644939142
## 10        0.0141825980
## 11        0.0031134806
## 12        0.2026392007
## 13        0.0023479861
## 14        0.0804113183
## 15        0.1051016333
## 16        0.0195166581
## 17        0.0059473340
## 18        0.0002335441
## 19        0.0733351887
## 20        0.1046727241
## 21        0.1020028148
## 22        0.1095318028
## 23        0.0623662243
## 24        0.0243220594
## 25        0.0240247563
## 26        0.0098456670
## 27        0.0187074589
## 28        0.0106495235
## 29        0.0308847984
## 30        0.0262561645
## 31        0.0045115022
## 32        0.0355289246
## 33        0.0528296392
## 34        0.0726474250
## 35        0.0702876940
## 36        0.0235688721
## 37        0.0054625977
## 38        0.0568391537
## 39        0.0317385628
## 40        0.1146833170
## 41        0.0043902879
## 42        0.0217205194
## 43        0.0077910708
## 44        0.0031127638
## 45        0.0067475741
## 46        0.0220169831
## 47        0.1667508102
## 48        0.0466668083
## 49        0.0450355590
## 50        0.0388450472
## 51        0.1157856538
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2012ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2012ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2012))}
\end{alltt}
\begin{verbatim}
##    polls2012ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.10812625    AK             4.073758e-02
## 2                       0.10812625    AL             7.974696e-02
## 3                       0.09100895    AR             1.640996e-01
## 4                       0.05826095    AZ             1.431552e-02
## 5                       0.08161568    CA             1.076972e-02
## 6                       0.05367853    CO             8.585131e-03
## 7                       0.04156266    CT             3.060437e-02
## 8                               NA    DC             9.209825e-03
## 9                       0.09100895    DE             5.191397e-02
## 10                      0.03082466    FL             7.268546e-03
## 11                      0.10330643    GA             2.516182e-04
## 12                      0.09047101    HI             1.622563e-01
## 13                      0.05534234    IA             1.054833e-02
## 14                      0.10812625    ID             1.317985e-01
## 15                      0.16919059    IL             1.177861e-02
## 16                      0.04149346    IN             6.800075e-03
## 17                      0.06277288    KS             1.126402e-01
## 18                      0.09100895    KY             1.579833e-01
## 19                      0.09100895    LA             1.300238e-01
## 20                      0.06142686    MA             9.828916e-03
## 21                      0.09100895    MD             9.066168e-02
## 22                      0.09100895    ME             3.604363e-02
## 23                      0.04682122    MI             2.324085e-03
## 24                      0.03095901    MN             9.808204e-05
## 25                      0.09100895    MO             9.034225e-02
## 26                      0.10812625    MS             2.560366e-02
## 27                      0.09100895    MT             1.128979e-01
## 28                      0.02918352    NC             5.921181e-03
## 29                      0.10812625    ND             6.869676e-02
## 30                      0.10812625    NE             7.887858e-02
## 31                      0.05579904    NH             9.424570e-04
## 32                      0.05341410    NJ             1.547280e-02
## 33                      0.04612864    NM             2.193753e-03
## 34                      0.03484641    NV             1.406558e-02
## 35                      0.09047101    NY             8.797709e-02
## 36                      0.03444706    OH             5.826652e-03
## 37                      0.30633191    OK             5.685035e-02
## 38                      0.09047101    OR             7.929494e-03
## 39                      0.04110583    PA             1.635607e-02
## 40                      0.05820222    RI             1.961565e-02
## 41                      0.08682112    SC             3.110984e-02
## 42                      0.13799119    SD             5.400467e-02
## 43                      0.22469588    TN             5.729870e-02
## 44                      0.06277288    TX             8.158586e-02
## 45                              NA    UT             7.604912e-02
## 46                      0.05611676    VA             1.507391e-02
## 47                      0.34356991    VT             4.527751e-02
## 48                      0.04109828    WA             4.628530e-03
## 49                      0.03146717    WI             6.821430e-03
## 50                      0.09047101    WV             1.915252e-01
## 51                      0.10812625    WY             1.791910e-01
##    Total.Average.Error
## 1         4.073758e-02
## 2         7.974696e-02
## 3         1.640996e-01
## 4         1.431552e-02
## 5         1.076972e-02
## 6         8.585131e-03
## 7         3.060437e-02
## 8         9.209825e-03
## 9         5.191397e-02
## 10        7.268546e-03
## 11        2.516182e-04
## 12        1.622563e-01
## 13        1.054833e-02
## 14        1.317985e-01
## 15        1.177861e-02
## 16        6.800075e-03
## 17        1.126402e-01
## 18        1.579833e-01
## 19        1.300238e-01
## 20        9.828916e-03
## 21        9.066168e-02
## 22        3.604363e-02
## 23        2.324085e-03
## 24        9.808204e-05
## 25        9.034225e-02
## 26        2.560366e-02
## 27        1.128979e-01
## 28        5.921181e-03
## 29        6.869676e-02
## 30        7.887858e-02
## 31        9.424570e-04
## 32        1.547280e-02
## 33        2.193753e-03
## 34        1.406558e-02
## 35        8.797709e-02
## 36        5.826652e-03
## 37        5.685035e-02
## 38        7.929494e-03
## 39        1.635607e-02
## 40        1.961565e-02
## 41        3.110984e-02
## 42        5.400467e-02
## 43        5.729870e-02
## 44        8.158586e-02
## 45        7.604912e-02
## 46        1.507391e-02
## 47        4.527751e-02
## 48        4.628530e-03
## 49        6.821430e-03
## 50        1.915252e-01
## 51        1.791910e-01
\end{verbatim}
\begin{alltt}
\hlkwd{cbind}\hlstd{(polls2016ratemp}\hlopt{$}\hlstd{Margin.of.Error,}\hlkwd{ae_by_state}\hlstd{(polls2016ratemp[,} \hlnum{1}\hlopt{:}\hlnum{2}\hlstd{], results2016))}
\end{alltt}
\begin{verbatim}
##    polls2016ratemp$Margin.of.Error state Average.Error.by.predict
## 1                       0.06686599    AK              0.023763302
## 2                       0.04609494    AL              0.049164076
## 3                       0.10132851    AR              0.086042780
## 4                       0.04680706    AZ              0.005792901
## 5                       0.07176507    CA              0.035219161
## 6                       0.07229972    CO              0.008260650
## 7                       0.04265404    CT              0.003897494
## 8                       0.29465064    DC              0.073959222
## 9                       0.17629344    DE              0.006934710
## 10                      0.04543690    FL              0.010225740
## 11                      0.06389765    GA              0.002075579
## 12                      0.13657360    HI              0.032130261
## 13                      0.04770711    IA              0.044582893
## 14                      0.05182973    ID              0.041973097
## 15                      0.08975522    IL              0.015247676
## 16                      0.05387371    IN              0.034491461
## 17                      0.05153590    KS              0.024998747
## 18                      0.07316593    KY              0.059162166
## 19                      0.07641330    LA              0.023716324
## 20                      0.07773936    MA              0.009225893
## 21                      0.09850130    MD              0.010412702
## 22                      0.05158794    ME              0.027133071
## 23                      0.03637831    MI              0.022684557
## 24                      0.04397076    MN              0.034510117
## 25                      0.04157978    MO              0.123940549
## 26                      0.06415606    MS              0.020708769
## 27                      0.05844786    MT              0.057697041
## 28                      0.04732527    NC              0.024969635
## 29                      0.05533986    ND              0.076799619
## 30                      0.05118724    NE              0.037147192
## 31                      0.06022656    NH              0.027648246
## 32                      0.14791304    NJ              0.011715919
## 33                      0.05359107    NM              0.005856146
## 34                      0.03877171    NV              0.007356356
## 35                      0.04605400    NY              0.012122230
## 36                      0.05395750    OH              0.047334732
## 37                      0.07166131    OK              0.065789577
## 38                      0.06985750    OR              0.009332263
## 39                      0.04609499    PA              0.035890500
## 40                      0.06529638    RI              0.001160220
## 41                      0.04621074    SC              0.038862960
## 42                      0.09242837    SD              0.066467217
## 43                      0.05295966    TN              0.067236766
## 44                      0.08635771    TX              0.024834364
## 45                      0.11687935    UT              0.015471787
## 46                      0.06204965    VA              0.011241865
## 47                      0.17629344    VT              0.098812759
## 48                      0.06003445    WA              0.017141769
## 49                      0.04895922    WI              0.026839604
## 50                      0.13883717    WV              0.111758152
## 51                      0.06668895    WY              0.067604818
##    Total.Average.Error
## 1          0.023763302
## 2          0.049164076
## 3          0.086042780
## 4          0.005792901
## 5          0.035219161
## 6          0.008260650
## 7          0.003897494
## 8          0.073959222
## 9          0.006934710
## 10         0.010225740
## 11         0.002075579
## 12         0.032130261
## 13         0.044582893
## 14         0.041973097
## 15         0.015247676
## 16         0.034491461
## 17         0.024998747
## 18         0.059162166
## 19         0.023716324
## 20         0.009225893
## 21         0.010412702
## 22         0.027133071
## 23         0.022684557
## 24         0.034510117
## 25         0.123940549
## 26         0.020708769
## 27         0.057697041
## 28         0.024969635
## 29         0.076799619
## 30         0.037147192
## 31         0.027648246
## 32         0.011715919
## 33         0.005856146
## 34         0.007356356
## 35         0.012122230
## 36         0.047334732
## 37         0.065789577
## 38         0.009332263
## 39         0.035890500
## 40         0.001160220
## 41         0.038862960
## 42         0.066467217
## 43         0.067236766
## 44         0.024834364
## 45         0.015471787
## 46         0.011241865
## 47         0.098812759
## 48         0.017141769
## 49         0.026839604
## 50         0.111758152
## 51         0.067604818
\end{verbatim}
\end{kframe}
\end{knitrout}


\end{document}
